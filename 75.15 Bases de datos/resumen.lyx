#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass article
\begin_preamble
\usepackage{titlesec}
\usepackage{graphicx}
\usepackage{color}

\titleformat{\section}
{\color{red}\normalfont\Large\bfseries}{\thesection}{1em}{}

\titleformat{\subsection}
{\color{blue}\normalfont\Large\bfseries}{\thesubsection}{1em}{}

\titleformat{\subsubsection}
{\color{cyan}\normalfont\Large\bfseries}{\thesubsubsection}{1em}{}

\def\ojoin{\setbox0=\hbox{$\bowtie$}%
  \rule[-.02ex]{.25em}{.4pt}\llap{\rule[\ht0]{.25em}{.4pt}}}
\def\leftouterjoin{\mathbin{\ojoin\mkern-5.8mu\bowtie}}
\def\rightouterjoin{\mathbin{\bowtie\mkern-5.8mu\ojoin}}
\def\fullouterjoin{\mathbin{\ojoin\mkern-5.8mu\bowtie\mkern-5.8mu\ojoin}}
\end_preamble
\use_default_options true
\maintain_unincluded_children false
\language spanish
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family sfdefault
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format pdf2
\output_sync 1
\bibtex_command default
\index_command default
\float_placement H
\paperfontsize default
\spacing single
\use_hyperref true
\pdf_title "Base de Datos"
\pdf_author "Maria Ines Parnisari"
\pdf_bookmarks true
\pdf_bookmarksnumbered false
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder false
\pdf_colorlinks false
\pdf_backref false
\pdf_pdfusetitle true
\papersize a4paper
\use_geometry true
\use_package amsmath 1
\use_package amssymb 2
\use_package cancel 0
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 0
\use_package mhchem 1
\use_package stackrel 0
\use_package stmaryrd 0
\use_package undertilde 0
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 2cm
\topmargin 2cm
\rightmargin 2cm
\bottommargin 2cm
\secnumdepth 3
\tocdepth 0
\paragraph_separation skip
\defskip smallskip
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\listings_params "language=SQL,basicstyle={\small \ttfamily},keywordstyle={\color{blue}},commentstyle={\color{red}}"
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
[75.15] Bases de Datos
\end_layout

\begin_layout Author
María Inés Parnisari
\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Part
Introducción a las Bases de Datos
\end_layout

\begin_layout Section
Modelo de datos
\end_layout

\begin_layout Standard
Un fenómeno o idea usualmente refiere a un objeto y a algún aspecto del
 objeto, el cual captura un determinado valor en un cierto momento.
\end_layout

\begin_layout Description
Dato tupla <nombre de objeto, propiedad de objeto, valor de la propiedad
 del objeto, instante>.
\end_layout

\begin_layout Description
Dato
\begin_inset space ~
\end_inset

elemental terna <nombre de objeto, propiedad de objeto, valor de la propiedad
 del objeto>.
\end_layout

\begin_layout Description
Modelo
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

datos herramienta intelectual que provee una interpretación del mundo real.
 Es un dispositivo de abstracción.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/datos_info_con.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Datos, información y conocimiento
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard

\emph on
Ejemplos de modelos de representación simbólica de la información: lenguaje
 natural, fórmulas matemáticas, mapas, partituras.
\end_layout

\begin_layout Standard
La pieza más elemental de información es el 
\series bold
dato
\series default
.
 Un dato solo es de utilidad si está vinculado a otros datos.
 La estructura y el contexto le dan significado a los datos.
\end_layout

\begin_layout Section
BDs y SGBDs
\end_layout

\begin_layout Description
Sistema
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

Base
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

Datos está formado por cuatro componentes:
\end_layout

\begin_layout Enumerate
Hardware
\end_layout

\begin_layout Enumerate
Software
\end_layout

\begin_layout Enumerate
Datos
\end_layout

\begin_layout Enumerate
Personas
\end_layout

\begin_deeper
\begin_layout Enumerate

\series bold
Administradores
\series default
: definen el esquema de la base de datos, definen permisos de acceso, ejecutan
 mantenimientos de rutina (backups, ampliando la capacidad de los discos,
 monitoreando la performance)
\end_layout

\begin_layout Enumerate

\series bold
Usuarios
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features rotate="0" tabularvalignment="middle" tabularwidth="100text%">
<column alignment="center" valignment="top" width="3cm">
<column alignment="center" valignment="top" width="5cm">
<column alignment="center" valignment="top" width="5cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Tipo de usuario
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Descripción
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Interfaz que utiliza
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Ingenuos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Consultan la base de datos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rellenando formularios de consulta, o leyendo reportes generados de la base
 de datos.
 Usan aplicaciones
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Sofisticados
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Consultan la base de datos mediante un lenguaje, sin programar aplicaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Itemize
Herramientas OLAP (
\emph on
Online Analytical Processing
\emph default
)
\end_layout

\begin_layout Itemize
Herramientas de 
\emph on
data mining
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Programador
\emph default
 
\emph on
de
\emph default
 
\emph on
aplicaciones
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Crean programas para acceder a la base de datos
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Herramientas RAD 
\emph on
(Rapid Application Development
\emph default
)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Especializados
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Programan aplicaciones especiales (
\emph on
knowledge
\emph default
 
\emph on
bases
\emph default
, sistemas expertos, etc.)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Description
Sistema
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

Gestión
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

Base
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

Datos
\begin_inset space ~
\end_inset

(SGBD) 
\emph on
Ejemplos: Oracle, MySQL, SQL Sever, DB2, Access, PosgreSQL
\emph default
.
 Sistema formado por datos y los programas que acceden a los datos.
 Su objetivo es almacenar y permitir consultas en formas convenientes y
 eficientes.
 
\end_layout

\begin_deeper
\begin_layout Standard
Está formado por tres capas, las 
\series bold
abstracciones
\series default
:
\end_layout

\begin_layout Enumerate

\emph on
Nivel exterior
\emph default
: 
\begin_inset Quotes eld
\end_inset

vistas
\begin_inset Quotes erd
\end_inset

 que ven los usuarios.
 Solo ven una parte de la base de datos, la que les interesa
\end_layout

\begin_layout Enumerate

\emph on
Nivel lógico
\emph default
: cómo se agrupan lógicamente los datos, las entidades y sus relaciones.
 
\emph on
Ejemplo: tablas, grafos.
\end_layout

\begin_layout Enumerate

\emph on
Nivel físico
\emph default
: como se organizan físicamente los datos.
 
\emph on
Ejemplos: bitmaps, árboles.
\end_layout

\end_deeper
\begin_layout Description
Gestión
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

Base
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

Datos está formada por las siguientes herramientas:
\end_layout

\begin_layout Enumerate

\emph on
Compiladores
\emph default
: proveen el lenguaje de consulta.
\end_layout

\begin_layout Enumerate

\emph on
Catálogo
\emph default
: provee información de la base de datos; por ejemplo, para sacar estadísticas
 de consultas.
\end_layout

\begin_layout Enumerate

\emph on
Optimizador de consultas
\end_layout

\begin_layout Enumerate

\emph on
Manejador de transacciones
\emph default
: asegura que una transacción se ejecute completamente o permita una vuelta
 atrás.
\end_layout

\begin_layout Enumerate

\emph on
Manejador de concurrencia
\emph default
: asegura la integridad de la base de datos ante usuarios concurrentes.
\end_layout

\begin_layout Enumerate

\emph on
Manejador de seguridad
\emph default
: 
\end_layout

\begin_deeper
\begin_layout Enumerate
Contra hechos no intencionales.
 
\emph on
Ejemplo: fallas de energía.
\end_layout

\begin_layout Enumerate
Contra hechos intencionales.
 
\emph on
Ejemplo: ataques de terceros para robar información.
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/bd_sgbd.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Los datos se almacenan en una base de datos, que es administrada por un
 sistema de gestión de bases de datos
\end_layout

\end_inset


\end_layout

\end_inset

 
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/estructura_bd.PNG
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Estructura general de un sistema de base de datos
\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
SGBD
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Base de datos
\end_layout

\begin_layout Description
Base
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

Datos
\begin_inset space ~
\end_inset

(BD) conjunto de datos interrelacionados.
\end_layout

\begin_layout Description
Instancia
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

la
\begin_inset space ~
\end_inset

base
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

datos colección de información en la base de datos en un momento particular.
\end_layout

\begin_layout Description
Esquema
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

la
\begin_inset space ~
\end_inset

base
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

datos descripción de la base de datos.
 La base de datos física varía con el tiempo (porque se producen altas,
 bajas y modificaciones), pero el esquema es fijo (o se cambia en raras
 ocasiones).
\end_layout

\begin_deeper
\begin_layout Itemize
Modelo conceptual: representación de alto nivel, que concentra los requerimiento
s del cliente.
 Utiliza el modelo Entidad-Relación.
\end_layout

\begin_layout Itemize
Modelo lógico: representación de bajo nivel.
 Utiliza el modelo relacional.
\end_layout

\begin_layout Itemize
Modelo físico: utiliza 
\series bold
SQL
\series default
.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/esquema_bd.PNG
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Base de datos
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
¿Por qué una base de datos y no un sistema de archivo?
\end_layout

\begin_layout Standard
Desventajas de usar un sistema de archivo:
\end_layout

\begin_layout Itemize
Inconsistencia y redundancia, porque se usan muchos archivos, y tal vez
 tienen distintos formatos
\end_layout

\begin_layout Itemize
Dificultad para acceder a los datos, porque se necesitan programas para
 acceder a los archivos
\end_layout

\begin_layout Itemize
Problemas de integridad, porque es difícil cambiar todos los programas para
 que adopten restricciones de consistencia
\end_layout

\begin_layout Itemize
Dificultad para asegurar la atomicidad de las transacciones
\end_layout

\begin_layout Itemize
Problemas para garantizar el acceso concurrente
\end_layout

\begin_layout Itemize
Problemas de seguridad
\end_layout

\begin_layout Subsection
Diseño de una base de datos
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/diseño_bd.png
	scale 60

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Metodología de diseño de una base de datos
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Modelos de datos
\end_layout

\begin_layout Description
Modelo
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

datos guía para organizar los datos de una base de datos.
 Formado por tres componentes: 
\end_layout

\begin_deeper
\begin_layout Enumerate
la 
\emph on
estructura
\emph default
 de los datos (tablas, árboles, redes, etc.),
\end_layout

\begin_layout Enumerate
las 
\emph on
operaciones
\emph default
 sobre las estructuras, y
\end_layout

\begin_layout Enumerate
las 
\emph on
restricciones
\emph default
 sobre las estructuras o sobre las operaciones (para que los datos mantengan
 su integridad semántica).
\end_layout

\end_deeper
\begin_layout Standard
La 
\series bold
potencia semántica
\series default
 de un modelo de datos está determinada por su capacidad de representar,
 además de la estructura de los datos, el significado de los mismos y sus
 interrelaciones.
\end_layout

\begin_layout Subsubsection
Operaciones en una base de datos
\end_layout

\begin_layout Description
Estado
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

una
\begin_inset space ~
\end_inset

BD valor de todos los atributos de todos los objetos de la base de datos.
\end_layout

\begin_layout Description
Operadores los hay de dos tipos:
\end_layout

\begin_layout Enumerate
De consulta (no modifican el estado de la base de datos)
\end_layout

\begin_layout Enumerate
De actualización (modifican el estado de la base de datos)
\end_layout

\begin_layout Description
Transacción conjunto de operaciones elementales.
 
\emph on
Ejemplo: la transferencia a una cuenta.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

leer(cuenta_a)
\end_layout

\begin_layout Plain Layout

cuenta_a <- cuenta_a + 100
\end_layout

\begin_layout Plain Layout

escribir(cuenta_a)
\end_layout

\begin_layout Plain Layout

leer(cuenta_b)
\end_layout

\begin_layout Plain Layout

cuenta_b <- cuenta_b - 100
\end_layout

\begin_layout Plain Layout

escribir(cuenta_b)
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Restricciones
\end_layout

\begin_layout Standard
Tipos de restricciones sobre una base de datos:
\end_layout

\begin_layout Itemize

\series bold
Inherentes
\series default
: determinado por la estructura de la base de datos
\end_layout

\begin_layout Itemize

\series bold
Explícitas
\series default
: provienen del mundo real
\end_layout

\begin_layout Itemize

\series bold
Implícitas
\series default
: se derivan de las explícitas
\end_layout

\begin_layout Itemize

\series bold
De estado
\series default
: restringen los posibles valores de los atributos.
 
\emph on
Ejemplo: la edad de una persona no puede ser negativa.
\end_layout

\begin_layout Itemize

\series bold
De actualización
\series default
: restringen las posibles operaciones sobre los atributos.
 
\emph on
Ejemplo: no se puede disminuir la edad de una persona.
\end_layout

\begin_layout Itemize

\series bold
De entidad
\series default
: 
\emph on
Ejemplo: no puede haber dos objetos iguales en la misma base de datos.
\end_layout

\begin_layout Itemize

\series bold
De integridad referencial
\series default
: 
\emph on
Ejemplo: no se puede referenciar a un objeto que no existe en la base de
 datos.
\end_layout

\begin_layout Subsection
Modelos de bases de datos
\end_layout

\begin_layout Enumerate
Entidad-Interrelación: para el diseño conceptual
\end_layout

\begin_layout Enumerate
Relacional: para el modelo lógico.
 La relaciones se representan a través de claves foráneas
\end_layout

\begin_layout Enumerate
Jerárquico (árbol): el acceso a niveles inferiores sólo es posible a través
 de sus padres
\end_layout

\begin_layout Enumerate
De red: las relaciones entre los datos se representan con referencias físicas
\end_layout

\begin_layout Enumerate
De objetos: existe una persistencia de los objetos más allá de la existencia
 en memoria
\end_layout

\begin_layout Section
\begin_inset CommandInset label
LatexCommand label
name "sec:Modelo-Entidad-Interrelación"

\end_inset

Modelo Entidad-Interrelación (E-R)
\end_layout

\begin_layout Standard

\bar under
Nota importante
\bar default
: no podemos tener nombres de entidades o interrelaciones repetidos.
\end_layout

\begin_layout Subsection
Entidades
\end_layout

\begin_layout Standard
El modelo entidad-interrelación se basa en la idea de que el mundo real
 está compuesto por objetos (las 
\emph on
entidades
\emph default
) y las 
\emph on
interrelaciones
\emph default
 que hay entre las entidades.
\end_layout

\begin_layout Description
Entidad algo que existe, concreto o abstracto.
 
\emph on
Ejemplo: una persona Juan, la cuenta bancaria n° 4500011.
\end_layout

\begin_layout Description
Conjunto
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

entidades
\begin_inset space ~
\end_inset

/
\begin_inset space ~
\end_inset

tipo
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

entidad conjunto de entidades del mismo tipo.
 
\emph on
Ejemplo: el conjunto de entidades 
\begin_inset Quotes eld
\end_inset

cliente
\begin_inset Quotes erd
\end_inset

 abarca todas las personas que tienen cuenta en un banco.
\end_layout

\begin_deeper
\begin_layout Standard
Un conjunto de entidades 
\begin_inset Formula $E$
\end_inset

 tiene un predicado asociado 
\begin_inset Formula $p$
\end_inset

 para probar si una entidad 
\begin_inset Formula $e$
\end_inset

 pertenece al conjunto.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E=\left\{ e/p(e)\right\} 
\]

\end_inset


\end_layout

\begin_layout Standard
Los conjuntos de entidades no necesitan ser disjuntos.
 
\emph on
Ejemplo: 
\begin_inset Quotes eld
\end_inset

animales
\begin_inset Quotes erd
\end_inset

 y 
\begin_inset Quotes eld
\end_inset

mamíferos
\begin_inset Quotes erd
\end_inset

 no son disjuntos.
\end_layout

\begin_layout Standard
Un tipo de entidad queda definido por:
\end_layout

\begin_layout Enumerate

\series bold
Nombre
\series default
: en singular o frase simple en singular.
 
\emph on
Ejemplos: 
\begin_inset Quotes eld
\end_inset

cliente
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

cuenta corriente
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Enumerate

\series bold
Significado
\series default
: texto preciso, conciso y claro.
 Debe indicar, si existieran, dependencias con otros tipos de entidades
\end_layout

\begin_layout Enumerate

\series bold
Atributos
\series default
: características de todas las entidades de ese tipo.
 
\emph on
Ejemplo: para el conjunto de entidades 
\begin_inset Quotes eld
\end_inset

cliente
\begin_inset Quotes erd
\end_inset

, posibles atributos son 
\begin_inset Quotes eld
\end_inset

nombre
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

DNI
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

calle
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

ciudad
\begin_inset Quotes erd
\end_inset

, etc.
 
\emph default
Cada atributo tiene un conjunto de 
\series bold
valores
\series default
 permitidos, denominado el 
\series bold
dominio 
\series default
del atributo.
 
\emph on
Ejemplo: el DNI debe ser un número positivo.
 
\emph default
Los atributos deben ser 
\series bold
atómicos
\series default
 (es decir, que no se pueden descomponer), y no pueden estar repetidos.
\end_layout

\begin_deeper
\begin_layout Standard
Formalmente, un 
\series bold
atributo
\series default
 es una función que hace corresponder un conjunto de entidades a un dominio
 o producto cartesiano de dominios.
 
\emph on
Ejemplo: una entidad 
\begin_inset Quotes eld
\end_inset

empleado
\begin_inset Quotes erd
\end_inset

 está descrita por el conjunto {(nombre, Juan), (apellido, Cancela), (DNI,
 5.678.901)}.
\end_layout

\begin_layout Standard
Un atributo puede tener el valor 
\series bold
nulo
\series default
, por varias razones:
\end_layout

\begin_layout Enumerate
No aplica
\end_layout

\begin_layout Enumerate
Faltante
\end_layout

\begin_layout Enumerate
Desconocido
\end_layout

\begin_layout Standard
Tipos de atributos:
\end_layout

\begin_layout Enumerate

\emph on
Simple vs compuesto.
 Ejemplo: nombre puede descomponerse en primer nombre, segundo nombre, y
 apellido.
\end_layout

\begin_layout Enumerate

\emph on
Un valor vs Multivaluado
\emph default
: se repite varias veces en la entidad.
 
\emph on
Ejemplo: número de teléfono.
\end_layout

\begin_layout Enumerate

\emph on
Derivable
\emph default
: su valor puede calcularse a partir de otros atributos.
 Debe evitarse.
 
\emph on
Ejemplo: si tengo el atributo 
\begin_inset Quotes eld
\end_inset

fecha de nacimiento
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

edad
\begin_inset Quotes erd
\end_inset

 es un atributo derivable.
\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
Identificador
\series default
: atributo o conjunto de atributos que permiten distinguir a cada entidad
 dentro del conjunto de entidades del mismo tipo.
\end_layout

\end_deeper
\begin_layout Subsection
Interrelaciones
\end_layout

\begin_layout Description
Interrelación asociación entre dos o más conjuntos de entidades.
\end_layout

\begin_layout Description
Conjunto
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

interrelaciones
\begin_inset space ~
\end_inset

/
\begin_inset space ~
\end_inset

tipo
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

interrelación conjunto de interrelaciones del mismo tipo.
 Si 
\begin_inset Formula $E_{1},E_{2},\ldots,E_{n}$
\end_inset

 son conjuntos de entidades, entonces el conjunto de interrelaciones 
\begin_inset Formula $R$
\end_inset

 es un subconjunto del producto cartesiano 
\begin_inset Formula 
\[
\left\{ \left(e_{1},e_{2},\ldots,e_{n}\right)/e_{1}\in E_{1},e_{2}\in E_{2},\ldots,e_{n}\in E_{n}\right\} 
\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
donde la tupla 
\begin_inset Formula $\left(e_{1},e_{2},\ldots,e_{n}\right)$
\end_inset

 es una interrelación.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/er_model.PNG
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Quotes eld
\end_inset

Tenencia
\begin_inset Quotes erd
\end_inset

 es una interrelación entre dos entidades
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Un tipo de interrelación puede tener atributos descriptivos.
 
\emph on
Ejemplo: la interrelación 
\begin_inset Quotes eld
\end_inset

tenencia
\begin_inset Quotes erd
\end_inset

 puede tener un atributo 
\begin_inset Quotes eld
\end_inset

fecha último movimiento
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Características:
\end_layout

\begin_layout Description
Grado
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

una
\begin_inset space ~
\end_inset

interrelación cantidad de tipos de entidades que participan en la relación.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/grados_interrelacion.PNG
	scale 60

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Grado de una interrelación
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Description
Cardinalidad
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

una
\begin_inset space ~
\end_inset

interrelación cantidad de tipos de entidades con las que puede estar relacionado.
\end_layout

\end_deeper
\begin_layout Description
Rol función que desempeña una entidad en una interrelación.
 Normalmente no se especifica porque está implícito.
 
\emph on
Ejemplos: un cliente 
\begin_inset Quotes eld
\end_inset

tiene
\begin_inset Quotes erd
\end_inset

 una cuenta, un empleado 
\begin_inset Quotes eld
\end_inset

es jefe de
\begin_inset Quotes erd
\end_inset

 
\begin_inset Formula $n$
\end_inset

 empleados.
\end_layout

\begin_layout Description
Instancia
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

una
\begin_inset space ~
\end_inset

interrelación asociación entre dos o más entidades.
 Debe ser unívocamente identificable s
\emph on
in usar los atributos descriptivos de la interrelación
\emph default
.
\end_layout

\begin_layout Standard
Un tipo de interrelación puede identificarse por:
\end_layout

\begin_layout Enumerate
Un atributo propio, o
\end_layout

\begin_layout Enumerate
Una clave primaria, formada por los atributos de las claves primarias de
 los tipos de entidad que asocian.
 
\emph on
Ejemplo: 
\begin_inset Quotes eld
\end_inset

DNI
\begin_inset Quotes erd
\end_inset

 es la clave primaria de 
\begin_inset Quotes eld
\end_inset

cliente
\begin_inset Quotes erd
\end_inset

, y 
\begin_inset Quotes eld
\end_inset

nro cuenta
\begin_inset Quotes erd
\end_inset

 es la clave primaria de 
\begin_inset Quotes eld
\end_inset

cuenta
\begin_inset Quotes erd
\end_inset

.
 La clave primaria del tipo de interrelación 
\begin_inset Quotes eld
\end_inset

tenencia
\begin_inset Quotes erd
\end_inset

 es (DNI, nro cuenta)
\end_layout

\begin_layout Standard
La estructura de la clave primaria de una interrelación 
\begin_inset Formula $R$
\end_inset

 depende de las restricciones de cardinalidad del conjunto de interrelaciones.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/interrelacion.jpg
	scale 25

\end_inset


\end_layout

\begin_layout Subsubsection
Tipos de interrelaciones
\end_layout

\begin_layout Description
Especialización un conjunto de entidades se divide en grupos de entidades
 que son distintivas.
 
\emph on
Ejemplo: en el contexto de un banco, una persona puede ser 
\begin_inset Quotes eld
\end_inset

especializada
\begin_inset Quotes erd
\end_inset

 en un empleado o un cliente, o ambas, o ninguna
\end_layout

\begin_layout Description
Generalización la inversa de especialización.
 Existe una superclase y una o más subclases.
 
\end_layout

\begin_deeper
\begin_layout Standard
Puede haber restricciones de pertenencia:
\end_layout

\begin_layout Enumerate
¿Qué tipos de entidades pueden ser miembros de una subclase?
\end_layout

\begin_deeper
\begin_layout Enumerate
Definido por condición: existe una condición o predicado explícito que decide
 la pertenencia o no pertenencia.
\end_layout

\begin_layout Enumerate
Definido por el usuario: el usuario de la BD asigna entidades a una subclase.
\end_layout

\end_deeper
\begin_layout Enumerate
¿Las entidades pueden pertenecer a más de una subclase dentro de una superclase?
\end_layout

\begin_deeper
\begin_layout Enumerate
Sí 
\begin_inset Formula $\implies$
\end_inset

Generalizaciones 
\series bold
superpuestas
\end_layout

\begin_layout Enumerate
No 
\begin_inset Formula $\implies$
\end_inset

Generalizaciones 
\series bold
disjuntas
\end_layout

\end_deeper
\begin_layout Enumerate
¿Una entidad en la superclase debe pertenecer a al menos una entidad en
 la subclase?
\end_layout

\begin_deeper
\begin_layout Enumerate
Sí 
\begin_inset Formula $\implies$
\end_inset

Generalización 
\series bold
total
\end_layout

\begin_layout Enumerate
No 
\begin_inset Formula $\implies$
\end_inset

Generalización 
\series bold
parcial
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
En la especialización y en la generalización, las subclases 
\emph on
heredan atributos
\emph default
 de la superclase.
\end_layout

\begin_layout Description
Agregación abstracción mediante la cual un conjunto de interrelación es
 tratado como una superclase.
\end_layout

\begin_layout Subsection
Restricciones
\end_layout

\begin_layout Subsubsection
Restricciones de participación
\end_layout

\begin_layout Standard
Se dice que la participación de un conjunto de entidades 
\begin_inset Formula $E$
\end_inset

 en un conjunto de interrelaciones 
\begin_inset Formula $R$
\end_inset

 es 
\series bold
total
\series default
 cuando cada entidad en 
\begin_inset Formula $E$
\end_inset

 participa en al menos una interrelación en 
\begin_inset Formula $R$
\end_inset

.
 Si solo algunas entidades participan, la participación es 
\series bold
parcial
\series default
.
\end_layout

\begin_layout Subsubsection
Restricciones de cardinalidad de correspondencia
\end_layout

\begin_layout Description
Cardinalidad
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

correspondencia cantidad mínima y máxima de entidades a las cuales puede
 asociarse una entidad a través de un tipo de interrelación.
\end_layout

\begin_deeper
\begin_layout Standard
Para una interrelación 
\emph on
binaria
\emph default
 
\begin_inset Formula $R$
\end_inset

 entre dos tipos de entidades 
\begin_inset Formula $A$
\end_inset

 y 
\begin_inset Formula $B$
\end_inset

, la cardinalidad puede ser:
\end_layout

\begin_layout Enumerate
Uno a uno 
\begin_inset Formula $(1:1)$
\end_inset

: Una entidad en 
\begin_inset Formula $A$
\end_inset

 está asociada como máximo a una entidad en 
\begin_inset Formula $B$
\end_inset

, y una entidad en 
\begin_inset Formula $B$
\end_inset

 está asociada como máximo a una entidad en 
\begin_inset Formula $A$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/cardinalidad_11.PNG
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $1:1$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Uno a muchos 
\begin_inset Formula $(1:M)$
\end_inset

: Una entidad en 
\begin_inset Formula $A$
\end_inset

 está asociada como máximo con cualquier cantidad de entidades en 
\begin_inset Formula $B$
\end_inset

, y una entidad en 
\begin_inset Formula $B$
\end_inset

 está asociada como máximo a una entidad en 
\begin_inset Formula $A$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Standard
También existe la restricción 
\begin_inset Quotes eld
\end_inset

muchos a uno
\begin_inset Quotes erd
\end_inset

 (
\begin_inset Formula $M:1$
\end_inset

).
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/cardinalidad_1M.PNG

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $1:M$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Muchos a muchos 
\begin_inset Formula $(M:M)$
\end_inset

: Una entidad en 
\begin_inset Formula $A$
\end_inset

 está asociada como máximo con cualquier cantidad de entidades en 
\begin_inset Formula $B$
\end_inset

, y una entidad en 
\begin_inset Formula $B$
\end_inset

 está asociada como máximo con cualquier cantidad de entidades en 
\begin_inset Formula $A$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/cardinalidad_MM.PNG
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset Formula $M:M$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
Para una interrelación 
\emph on
ternaria
\emph default
 
\begin_inset Formula $R$
\end_inset

 entre tres tipos de entidades 
\begin_inset Formula $A,B$
\end_inset

 y 
\begin_inset Formula $C$
\end_inset

, la cardinalidad puede ser:
\end_layout

\begin_layout Itemize
N:N:N
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/ternaria_nnn.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Las fábricas le compran insumos a proveedores.
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Claves candidatas de 
\begin_inset Quotes eld
\end_inset

Compra
\begin_inset Quotes erd
\end_inset

: 
\begin_inset Formula $\left\{ id_{fábrica},id_{insumo},id_{proveedor}\right\} $
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
N:N:1
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/ternaria_nn1.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Las fábricas le compran insumos a proveedores.
 Una fábrica no puede comprar el mismo insumo a más de un proveedor.
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Claves candidatas de 
\begin_inset Quotes eld
\end_inset

Compra
\begin_inset Quotes erd
\end_inset

: 
\begin_inset Formula $\left\{ id_{fábrica},id_{insumo}\right\} $
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
N:1:1
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/ternaria_n11.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Las fábricas le compran insumos a proveedores.
 Una fábrica no puede comprar el mismo insumo a más de un proveedor.
 Un proveedor no puede venderle el mismo insumo a más de una fabrica.
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Claves candidatas de 
\begin_inset Quotes eld
\end_inset

Compra
\begin_inset Quotes erd
\end_inset

: 
\begin_inset Formula $\left\{ id_{fábrica},id_{insumo}\right\} ;\left\{ id_{proveedor},id_{insumo}\right\} $
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
1:1:1
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/ternaria_111.png
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Las fábricas le compran insumos a proveedores.
 Una fábrica no puede comprar el mismo insumo a más de un proveedor.
 Un proveedor no puede venderle el mismo insumo a más de una fabrica.
 Una fábrica no puede comprarle más de un insumo a cada proveedor.
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Claves candidatas de 
\begin_inset Quotes eld
\end_inset

Compra
\begin_inset Quotes erd
\end_inset

: 
\begin_inset Formula $\left\{ id_{fábrica},id_{insumo}\right\} ;\left\{ id_{proveedor},id_{insumo}\right\} ;\left\{ id_{fábrica},id_{proveedor}\right\} $
\end_inset


\end_layout

\end_deeper
\begin_layout Description
Teorema: en las relaciones ternarias, las restricciones de cardinalidad
 no imponen restricciones en las relaciones binarias.
 
\emph on
En el ejemplo anterior, una fábrica puede comprar 
\begin_inset Formula $N$
\end_inset

 insumos.
 Una fábrica puede comprarle a 
\begin_inset Formula $N$
\end_inset

 proveedores.
 Un proveedor puede proveer 
\begin_inset Formula $N$
\end_inset

 insumos.
\end_layout

\end_deeper
\begin_layout Subsubsection
Restricciones de dependencia existencial
\end_layout

\begin_layout Standard
Si la existencia de la entidad 
\begin_inset Formula $S$
\end_inset

 depende de la existencia de la entidad 
\begin_inset Formula $D$
\end_inset

, entonces se dice que 
\begin_inset Formula $S$
\end_inset

 tiene 
\series bold
dependencia existencial
\series default
 de 
\begin_inset Formula $D$
\end_inset

.
 Operacionalmente, esto significa que si 
\begin_inset Formula $D$
\end_inset

 es borrado, también 
\begin_inset Formula $S$
\end_inset

 es borrado.
 La entidad 
\begin_inset Formula $D$
\end_inset

 es la entidad 
\series bold
dominante
\series default
 y 
\begin_inset Formula $S$
\end_inset

 es la entidad 
\series bold
subordinada
\series default
.
\end_layout

\begin_layout Subsubsection
Restricciones de identificación
\end_layout

\begin_layout Description
Superclave conjunto de uno o más atributos que, tomados en conjunto, permiten
 identificar unívocamente una entidad o una interrelación en el conjunto
 de entidades o interrelaciones del mismo tipo
\emph on
.
\end_layout

\begin_deeper
\begin_layout Standard
Si 
\begin_inset Formula $K$
\end_inset

 es una superclave, cualquier superconjunto de 
\begin_inset Formula $K$
\end_inset

 también es una superclave.
\end_layout

\end_deeper
\begin_layout Description
Clave
\begin_inset space ~
\end_inset

candidata superclaves minimales; aquellas para las cuales ningún subconjunto
 propio es una superclave.
\end_layout

\begin_deeper
\begin_layout Standard
Sea 
\begin_inset Formula $R$
\end_inset

 un esquema de relación con atributos 
\begin_inset Formula $A_{1},\dots,A_{n}$
\end_inset

.
 El conjunto de atributos 
\begin_inset Formula $K=\left(A_{1},\dots,A_{k}\right)$
\end_inset

 es una clave candidata de 
\begin_inset Formula $R$
\end_inset

 sí y sólo sí satisface:
\end_layout

\begin_layout Enumerate

\emph on
Unicidad
\emph default
: en todo momento, no existen dos tuplas distintas de 
\begin_inset Formula $R$
\end_inset

 que tengan el mismo valor para 
\begin_inset Formula $A_{i}$
\end_inset

, donde 
\begin_inset Formula $i\in[1,k]$
\end_inset

.
\end_layout

\begin_layout Enumerate

\emph on
Minimalidad
\emph default
: ningún atributo de 
\begin_inset Formula $K$
\end_inset

 puede ser eliminado sin que se pierda la propiedad de unicidad.
\end_layout

\end_deeper
\begin_layout Description
Clave
\begin_inset space ~
\end_inset

primaria aquella clave candidata que es elegida por el diseñador del modelo
 de datos para identificar entidades dentro del conjunto de entidades.
 Esta clave no debería cambiar en el tiempo.
 
\emph on
Ejemplo: la dirección de un cliente no es una buena clave primaria, porque
 se puede mudar
\end_layout

\begin_layout Description
Clave
\begin_inset space ~
\end_inset

foránea atributo o conjunto de atributos que es clave primaria en otra relación.
 
\emph on
Ejemplo: en una relación 
\begin_inset Quotes eld
\end_inset

autos
\begin_inset Quotes erd
\end_inset

, puede haber una clave foránea 
\begin_inset Quotes eld
\end_inset

DNI
\begin_inset Quotes erd
\end_inset

 que es la clave primaria en otra relación 
\begin_inset Quotes eld
\end_inset

personas
\begin_inset Quotes erd
\end_inset

, y que indica el dueño de ese auto
\end_layout

\begin_layout Description
Entidad
\begin_inset space ~
\end_inset

débil entidad que tiene 
\series bold
dependencia de identificación
\series default
, porque no es identificable por sus propios atributos.
 Está subordinada a otro tipo de entidad, la entidad fuerte.
\end_layout

\begin_layout Description
Entidad
\begin_inset space ~
\end_inset

fuerte entidad que tiene una clave primaria propia.
\end_layout

\begin_layout Standard
El concepto de entidades fuertes y débiles está relacionado con el concepto
 de dependencia de existencia.
 Una entidad débil es, por definición, una entidad subordinada a la entidad
 dominante de la cual depende su identidad.
 Toda dependencia de identidad es una dependencia de existencia, pero una
 dependencia de existencia no implica necesariamente una dependencia de
 identidad.
\end_layout

\begin_layout Description
Discriminador atributo o conjunto de atributos de una entidad débil que
 lo distingue de otras entidades débiles que dependen de la misma entidad
 fuerte.
\end_layout

\begin_layout Standard
Para una entidad débil, su clave primaria está formada por su identificador
 más la clave primaria de la entidad fuerte de la cual depende.
\end_layout

\begin_layout Subsection
Diagramas E-R
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/simbologia_er.PNG
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Simbología en los diagramas E-R
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/simbologia_er_2.PNG
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Simbología en los diagramas E-R para entidades fuertes (
\emph on
cuenta
\emph default
) y débiles (
\emph on
transacción
\emph default
).
 La clave primaria de la entidad fuerte se identifica con el atributo subrayado
 (
\emph on
nro.
 cuenta
\emph default
).
 La dependencia a la entidad fuerte se identifica con arcos dobles.
 El discriminador de la entidad débil se identifica con el atributo subrayado
 a medias (
\emph on
nro.
 transacción
\emph default
).
 El identificador de la entidad débil es la suma de su discriminador y de
 la clave primaria de la entidad fuerte (
\emph on
nro.
 cuenta + nro.
 transacción
\emph default
)
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Cuestiones de diseño
\end_layout

\begin_layout Enumerate
Conjuntos de entidades vs Atributos?
\end_layout

\begin_deeper
\begin_layout Enumerate
Algunos atributos no pueden transformarse en entidades.
 
\emph on
Ejemplo: el nombre de una persona
\end_layout

\begin_layout Enumerate
Algunos atributos están mejor representados como entidades, para permitir
 atributos.
 
\emph on
Ejemplo: teléfonos de una persona
\end_layout

\end_deeper
\begin_layout Enumerate
Conjuntos de entidades vs Conjuntos de interrelaciones?
\end_layout

\begin_deeper
\begin_layout Standard
Las interrelaciones modelan 
\begin_inset Quotes eld
\end_inset

acciones
\begin_inset Quotes erd
\end_inset

 que ocurren entre entidades.
\end_layout

\end_deeper
\begin_layout Enumerate
Conjuntos de interrelaciones binarias vs n-arias?
\end_layout

\begin_deeper
\begin_layout Description
Teorema es posible reemplazar cualquier conjunto de interrelaciones 
\begin_inset Formula $n-$
\end_inset

aria (con 
\begin_inset Formula $n>2$
\end_inset

) con un número de interrelaciones binarias.
\end_layout

\end_deeper
\begin_layout Enumerate
Localización de atributos de interrelaciones
\end_layout

\begin_deeper
\begin_layout Enumerate
Relaciones 
\begin_inset Formula $1:1$
\end_inset

 
\begin_inset Formula $\implies$
\end_inset

en cualquiera de las dos entidades participantes
\end_layout

\begin_layout Enumerate
Relaciones 
\begin_inset Formula $1:N$
\end_inset


\begin_inset Formula $\implies$
\end_inset

en la segunda entidad
\end_layout

\begin_layout Enumerate
Relaciones 
\begin_inset Formula $N:N$
\end_inset


\begin_inset Formula $\implies$
\end_inset

en la interrelación
\end_layout

\end_deeper
\begin_layout Subsection
Reducción de un esquema E-R a un modelo relacional
\end_layout

\begin_layout Standard
Para cada entidad y para cada interrelación, se construye una única tabla.
 Cada tabla contiene múltiples columnas.
\end_layout

\begin_layout Itemize
Representación de conjuntos de entidades fuertes
\end_layout

\begin_deeper
\begin_layout Standard
Sea 
\begin_inset Formula $E$
\end_inset

 un conjunto de entidad fuerte con atributos 
\begin_inset Formula $a_{1},\ldots,a_{n}$
\end_inset

.
 Se representa a la misma con una tabla llamada 
\begin_inset Formula $E$
\end_inset

 con 
\begin_inset Formula $n$
\end_inset

 columnas.
 Cada fila de la tabla es una entidad.
 El conjunto de todas las posibles filas de la tabla es el 
\series bold
producto cartesiano 
\series default
entre los dominios de cada atributo:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
D_{1}\times\ldots\times D_{n}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Representación de conjuntos de entidades débiles
\end_layout

\begin_deeper
\begin_layout Standard
Sea 
\begin_inset Formula $A$
\end_inset

 un conjunto de entidad débil con atributos 
\begin_inset Formula $a_{1},\ldots,a_{m}$
\end_inset

.
 Sea 
\begin_inset Formula $B$
\end_inset

 el conjunto de entidad fuerte del cual depende 
\begin_inset Formula $A$
\end_inset

.
 La clave primaria de 
\begin_inset Formula $B$
\end_inset

 está formada por los atributos 
\begin_inset Formula $b_{1},\ldots,b_{n}$
\end_inset

.
 Se representa a 
\begin_inset Formula $A$
\end_inset

 con una tabla con 
\begin_inset Formula $m+n$
\end_inset

 columnas 
\begin_inset Formula $a_{1},\ldots,a_{m},b_{1},\ldots,b_{n}$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Itemize
Representación de conjuntos de interrelaciones
\end_layout

\begin_deeper
\begin_layout Standard
Sea 
\begin_inset Formula $R$
\end_inset

 un conjunto de interrelaciones entre las entidades 
\begin_inset Formula $E_{1},\dots,E_{n}$
\end_inset

 con atributos 
\begin_inset Formula $r_{1},\ldots,r_{m}$
\end_inset

.
 Sean 
\begin_inset Formula $a_{1},\ldots,a_{n}$
\end_inset

 el conjunto de atributos formado por la unión de las claves primarias de
 cada entidad participante.
 Se representa a 
\begin_inset Formula $R$
\end_inset

 con una tabla con columnas 
\begin_inset Formula $a_{1},\ldots,a_{n},r_{1},\ldots,r_{m}$
\end_inset

.
\end_layout

\begin_layout Itemize
Si la interrelación relaciona un conjunto de entidades débil y otro fuerte,
 la tabla de 
\begin_inset Formula $R$
\end_inset

 no es necesaria, es redundante.
\end_layout

\end_deeper
\begin_layout Itemize
Representación de interrelaciones 
\begin_inset Formula $1:N$
\end_inset

 entre entidades 
\begin_inset Formula $A$
\end_inset

 y 
\begin_inset Formula $B$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Si la participación de 
\begin_inset Formula $A$
\end_inset

 en 
\begin_inset Formula $R$
\end_inset

 es total (i.e.
 cada entidad en 
\begin_inset Formula $A$
\end_inset

 debe participar en la relación 
\begin_inset Formula $R$
\end_inset

), se pueden unir las tablas de 
\begin_inset Formula $A$
\end_inset

 y 
\begin_inset Formula $R$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Representación de atributos compuestos
\end_layout

\begin_deeper
\begin_layout Standard
Sea el atributo compuesto 
\begin_inset Formula $x$
\end_inset

 formado por 
\begin_inset Formula $x_{1},\ldots,x_{n}$
\end_inset

.
 Se debe generar una columna para cada 
\begin_inset Formula $x_{1},\ldots,x_{n}$
\end_inset

, pero 
\emph on
no
\emph default
 para 
\begin_inset Formula $x$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Itemize
Representación de atributos multivaluados
\end_layout

\begin_deeper
\begin_layout Standard
Sea el atributo multivaluado 
\begin_inset Formula $x$
\end_inset

.
 Se debe crear una tabla 
\begin_inset Formula $T$
\end_inset

 con una columna 
\begin_inset Formula $C$
\end_inset

 que corresponde a 
\begin_inset Formula $x$
\end_inset

 y el resto de las columnas son la clave primaria del conjunto de entidades
 o interrelación del cual 
\begin_inset Formula $x$
\end_inset

 es un atributo.
\end_layout

\end_deeper
\begin_layout Itemize
Representación de generalización
\end_layout

\begin_deeper
\begin_layout Standard
Hay dos métodos:
\end_layout

\begin_layout Enumerate
Una tabla para la superclase + una tabla para cada subclase, que incluya
 una columna con la clave primaria de la superclase
\end_layout

\begin_layout Enumerate
Si la generalización es disjunta y completa, no se crea una tabla para la
 superclase.
 Se crea una tabla para cada subclase, que incluya todos los atributos de
 la superclase.
\end_layout

\end_deeper
\begin_layout Itemize
Representación de agregación
\end_layout

\begin_deeper
\begin_layout Standard
La tabla de la interrelación 
\begin_inset Formula $R$
\end_inset

 entre la agregación 
\begin_inset Formula $A$
\end_inset

 y el conjunto de entidades 
\begin_inset Formula $B$
\end_inset

 incluye una columna por cada clave primaria de 
\begin_inset Formula $B$
\end_inset

 y 
\begin_inset Formula $A$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Section
\begin_inset CommandInset label
LatexCommand label
name "sec:Modelo-relacional"

\end_inset

Modelo Relacional
\end_layout

\begin_layout Subsection
Estructura del modelo relacional
\end_layout

\begin_layout Standard
El modelo relacional es un ejemplo de modelo basado en registros.
 Usa un grupo de tablas para representar los datos y las relaciones entre
 los datos.
 Cada tabla tiene múltiples columnas.
 Cada tabla contiene registros de un tipo en particular.
 Cada registro tiene atributos (las columnas).
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/tablas.PNG
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tablas
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Description
Dominio valores posibles de un conjunto.
 
\emph on
Ejemplo: 
\begin_inset Formula $D_{padron}=\{1,2,\dots100000\}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
Existe un valor que es posible en cualquier dominio: el valor 
\series bold
nulo
\series default
.
 Este valor significa 
\begin_inset Quotes eld
\end_inset

atributo desconocido
\begin_inset Quotes erd
\end_inset

 o 
\begin_inset Quotes eld
\end_inset

atributo inexistente
\begin_inset Quotes erd
\end_inset

.
 Se puede prohibir, para un atributo, que este tenga el valor nulo, ya que
 puede causar problemas al realizar consultas.
\end_layout

\end_deeper
\begin_layout Description
Esquema
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

relación descripción de una relación.
 Es el nombre de la relación seguido de la lista de los atributos con sus
 dominios.
 
\emph on
Ejemplo: Estudiante (Padrón, nombre, dirección, fechaIngreso)
\end_layout

\begin_layout Description
Relación instancia de un esquema.
 Subconjunto del producto cartesiano de una lista de dominios
\emph on
.
 
\emph default
Sea el esquema de relación 
\begin_inset Formula $R$
\end_inset

, denotamos a la instancia 
\begin_inset Formula $r$
\end_inset

 mediante 
\begin_inset Formula $r(R)$
\end_inset

.
\end_layout

\begin_layout Description
Tabla representación de una relación.
 Se pueden relacionar entre sí al compartir atributos.
 Una tabla de 
\begin_inset Formula $n$
\end_inset

 atributos es un subconjunto de 
\begin_inset Formula $D_{1}\times D_{2}\times\dots\times D_{n}$
\end_inset

.
 Notar que al ser un conjunto, el orden no interesa.
 
\end_layout

\begin_layout Description
Atributo nombre de cada columna de una tabla.
\end_layout

\begin_layout Description
Esquema
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

BD
\begin_inset space ~
\end_inset

relacional conjunto de esquemas de relación.
\end_layout

\begin_layout Description
Tupla miembro de una relación.
 Son las filas de una tabla.
\end_layout

\begin_layout Subsection
Restricciones del modelo relacional
\end_layout

\begin_layout Itemize
Regla de integridad de entidad
\end_layout

\begin_deeper
\begin_layout Standard
Ningún atributo de la clave primaria de un esquema de relación puede tomar
 valor nulo.
\end_layout

\end_deeper
\begin_layout Itemize
Regla de integridad referencial
\end_layout

\begin_deeper
\begin_layout Standard
Si la relación 
\begin_inset Formula $r$
\end_inset

 incluye una clave foránea 
\begin_inset Formula $F$
\end_inset

 que es la clave primaria 
\begin_inset Formula $P$
\end_inset

 de una relación 
\begin_inset Formula $s$
\end_inset

, entonces todo valor de 
\begin_inset Formula $F$
\end_inset

 en 
\begin_inset Formula $r$
\end_inset

 debe ser totalmente nulo o ser igual al valor de 
\begin_inset Formula $P$
\end_inset

 en alguna tupla de 
\begin_inset Formula $s$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Subsection
Operaciones del modelo relacional: álgebra relacional
\end_layout

\begin_layout Standard
Es un lenguaje
\series bold
 formal 
\series default
y 
\series bold
procedural 
\series default
que
\series bold
 
\series default
permite realizar consultas sobre un conjunto de relaciones, y produce relaciones
 como resultado.
\end_layout

\begin_layout Subsubsection
Operadores básicos
\end_layout

\begin_layout Standard
Los siguientes operadores son linealmente independientes.
 Se utilizan para filtrar,
\emph on
 
\emph default
cortar y combinar relaciones.
\end_layout

\begin_layout Enumerate
Operaciones unarias:
\end_layout

\begin_deeper
\begin_layout Enumerate

\series bold
Proyección
\series default
 (
\begin_inset Formula $\pi_{a_{1},\dots,a_{n}}(r)$
\end_inset

).
 
\end_layout

\begin_deeper
\begin_layout Standard
Dados los atributos 
\begin_inset Formula $a_{1},\dots,a_{n}$
\end_inset

 que pertenecen a 
\begin_inset Formula $r$
\end_inset

, devuelve una relación de esquema 
\begin_inset Formula $\{a_{1},\dots,a_{n}\}$
\end_inset

.
\end_layout

\begin_layout Standard
Se eliminan las tuplas repetidas.
\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
Selección
\series default
 (
\begin_inset Formula $\sigma_{p}(r)$
\end_inset

).
 
\end_layout

\begin_deeper
\begin_layout Standard
Devuelve una relación 
\begin_inset Formula $r'$
\end_inset

 con el mismo esquema que 
\begin_inset Formula $r$
\end_inset

, en la que las tuplas son aquellas pertenecientes a 
\begin_inset Formula $r$
\end_inset

 que satisfacen la condición o el predicado 
\begin_inset Formula $p$
\end_inset

.
 La condición puede ser de dos estilos:
\end_layout

\begin_layout Enumerate

\emph on
Atómica
\emph default
: expresión lógica simple del tipo que utiliza un operador de comparación
 
\begin_inset Formula $\theta$
\end_inset

, tal que 
\begin_inset Formula $\theta\in\left\{ =,\neq,<,>,\leq,\geq\right\} $
\end_inset

.
 Se permiten dos tipos de expresiones:
\end_layout

\begin_deeper
\begin_layout Enumerate
Atributo 
\begin_inset Formula $\theta$
\end_inset

 atributo
\end_layout

\begin_layout Enumerate
Atributo 
\begin_inset Formula $\theta$
\end_inset

 constante
\end_layout

\end_deeper
\begin_layout Enumerate

\emph on
Compuesta
\emph default
: utiliza conectores 
\emph on
and, or, not
\emph default
.
\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
Renombre
\series default
 (
\begin_inset Formula $\rho_{R(A_{1},A_{2},\dots,A_{n})}(E)$
\end_inset

).
 
\end_layout

\begin_deeper
\begin_layout Standard
Cambia el nombre de la relación 
\begin_inset Formula $E$
\end_inset

 a 
\begin_inset Formula $R$
\end_inset

, y también cambia el nombre de sus atributos a 
\begin_inset Formula $A_{1},A_{2},\dots,A_{n}$
\end_inset

.
\end_layout

\end_deeper
\end_deeper
\begin_layout Enumerate
Operaciones binarias:
\end_layout

\begin_deeper
\begin_layout Enumerate

\series bold
Unión
\series default
 (
\begin_inset Formula $r\bigcup s$
\end_inset

).
\end_layout

\begin_deeper
\begin_layout Standard
Sean 
\begin_inset Formula $r$
\end_inset

 y 
\begin_inset Formula $s$
\end_inset

 instancias 
\emph on
homogéneas
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Las relaciones homogéneas tienen: (a) la misma cantidad de atributos, y
 (b) para todo 
\begin_inset Formula $i$
\end_inset

, el dominio del atributo 
\begin_inset Formula $i$
\end_inset

 de 
\begin_inset Formula $r$
\end_inset

 es el mismo que el dominio del atributo 
\begin_inset Formula $i$
\end_inset

 de 
\begin_inset Formula $s$
\end_inset


\end_layout

\end_inset

 
\emph default
de las relaciones 
\begin_inset Formula $R$
\end_inset

 y 
\begin_inset Formula $S$
\end_inset

 respectivamente.
 
\begin_inset Formula $r$
\end_inset

 contiene 
\begin_inset Formula $m$
\end_inset

 tuplas y 
\begin_inset Formula $s$
\end_inset

 contiene 
\begin_inset Formula $n$
\end_inset

 tuplas.
 La unión se define como:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
r\bigcup s=\left\{ x:\, x\in r\vee x\in s\right\} 
\]

\end_inset


\end_layout

\begin_layout Standard
Las tuplas repetidas se eliminan.
\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
Diferencia
\series default
 (
\begin_inset Formula $r-s$
\end_inset

).
\end_layout

\begin_deeper
\begin_layout Standard
Sean 
\begin_inset Formula $r$
\end_inset

 y 
\begin_inset Formula $s$
\end_inset

 instancias 
\emph on
homogéneas 
\emph default
de las relaciones 
\begin_inset Formula $R$
\end_inset

 y 
\begin_inset Formula $S$
\end_inset

 respectivamente.
 La diferencia se define como:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
r-s=\left\{ x:\, x\in r\wedge x\not\in s\right\} 
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
Producto cartesiano
\series default
 (
\begin_inset Formula $r\times s$
\end_inset

).
 
\end_layout

\begin_deeper
\begin_layout Standard
Sean 
\begin_inset Formula $r$
\end_inset

 y 
\begin_inset Formula $s$
\end_inset

 instancias de las relaciones 
\begin_inset Formula $R$
\end_inset

 y 
\begin_inset Formula $S$
\end_inset

 respectivamente.
 El producto cartesiano es el conjunto de tuplas que resulta de concatenar
 cada tupla de 
\begin_inset Formula $r$
\end_inset

 con cada tupla de 
\begin_inset Formula $s$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
r\times s=\left\{ \left(r_{1},s_{1}\right);\ldots;\left(r_{1},s_{m}\right);\ldots;\left(r_{n},s_{1}\right)\ldots,\left(r_{n},s_{m}\right)\right\} 
\]

\end_inset


\end_layout

\begin_layout Standard
Si 
\begin_inset Formula $r$
\end_inset

 tiene 
\begin_inset Formula $n$
\end_inset

 tuplas y 
\begin_inset Formula $s$
\end_inset

 tiene 
\begin_inset Formula $m$
\end_inset

 tuplas, 
\begin_inset Formula $r\times s$
\end_inset

 tendrá 
\begin_inset Formula $n\cdot m$
\end_inset

 tuplas.
 El grado de 
\begin_inset Formula $r\times s$
\end_inset

 es la suma de los grados de 
\begin_inset Formula $r$
\end_inset

 y 
\begin_inset Formula $s$
\end_inset

.
\end_layout

\end_deeper
\end_deeper
\begin_layout Subsubsection
Operadores secundarios
\end_layout

\begin_layout Standard
No proporcionan nuevas funcionalidades, solo simplifican las consultas.
\end_layout

\begin_layout Enumerate

\series bold
Intersección
\series default
 (
\begin_inset Formula $r\bigcap s$
\end_inset

)
\end_layout

\begin_deeper
\begin_layout Standard
Dadas las relaciones 
\begin_inset Formula $r_{1}$
\end_inset

 y 
\begin_inset Formula $r_{2}$
\end_inset

 con el mismo esquema, devuelve una relación 
\begin_inset Formula $r$
\end_inset

 con igual esquema, tal que 
\begin_inset Formula $r=\left\{ x:\, x\in r_{1}\wedge x\in r_{2}\right\} $
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
r\bigcap s\equiv r-\left(r-s\right)
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
Junta (
\emph on
join
\emph default
) (
\begin_inset Formula $r\bowtie s$
\end_inset

)
\end_layout

\begin_deeper
\begin_layout Standard
La junta de dos relaciones 
\begin_inset Formula $r$
\end_inset

 y 
\begin_inset Formula $s$
\end_inset

 según un predicado 
\begin_inset Formula $P$
\end_inset

 es una relación de esquema igual al producto cartesiano 
\begin_inset Formula $r\times s$
\end_inset

, cuyas tuplas son el conjunto de tuplas de 
\begin_inset Formula $r\times s$
\end_inset

 que satisfacen el predicado 
\begin_inset Formula $P$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
r\bowtie_{p}s\equiv\sigma_{p}\left(r\times s\right)
\]

\end_inset


\end_layout

\begin_layout Enumerate

\series bold
\emph on
Equi-join
\series default
\emph default
: dadas las relaciones 
\begin_inset Formula $r$
\end_inset

 y 
\begin_inset Formula $s$
\end_inset

, es el 
\emph on
join
\emph default
 según el predicado 
\begin_inset Formula $r.A_{i}=s.A_{j}$
\end_inset


\end_layout

\begin_layout Enumerate

\series bold
\emph on
Auto-join
\series default
\emph default
: dada la relación 
\begin_inset Formula $r$
\end_inset

, es el 
\emph on
join
\emph default
 de 
\begin_inset Formula $r$
\end_inset

 consigo mismo según el predicado 
\begin_inset Formula $1.A_{i}\,\theta\,2.A_{i}$
\end_inset

 donde 
\begin_inset Formula $1$
\end_inset

 y 
\begin_inset Formula $2$
\end_inset

 son aliases de 
\begin_inset Formula $r$
\end_inset

.
\end_layout

\begin_layout Enumerate

\series bold
\emph on
Natural join
\emph default
 
\series default
(
\begin_inset Formula $r*s$
\end_inset

).
 Requiere que haya atributos compartidos entre las relaciones 
\begin_inset Formula $r$
\end_inset

 y 
\begin_inset Formula $s$
\end_inset

, y además que 
\begin_inset Formula $R\bigcap S\neq\emptyset$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
r*s\equiv\pi_{R\cup S}\left(\sigma_{r.c_{1}=s.c_{1}\wedge r.c_{2}=s.c_{2}\wedge\dots\wedge r.c_{h}=s.c_{h}}\left(r\times s\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard
El 
\emph on
join
\emph default
 natural es una operación asociativa, por lo tanto, 
\begin_inset Formula $(r*s)*t=r*(s*t)$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/join_natural.PNG
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Junta natural
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
División
\series default
 (
\begin_inset Formula $r/s$
\end_inset

).
 
\end_layout

\begin_deeper
\begin_layout Standard
Sean las relaciones 
\begin_inset Formula $r\in R$
\end_inset

 con 
\begin_inset Formula $n$
\end_inset

 atributos y 
\begin_inset Formula $s\in S$
\end_inset

 con 
\begin_inset Formula $m$
\end_inset

 atributos, tal que 
\begin_inset Formula $m<n$
\end_inset

 y 
\begin_inset Formula $S\subset R$
\end_inset

.
 La división son todas las tuplas 
\begin_inset Formula $t$
\end_inset

 tales que, multiplicadas por 
\series bold
todas
\series default
 las filas 
\begin_inset Formula $u$
\end_inset

 de 
\begin_inset Formula $s$
\end_inset

, me dan filas que están en 
\begin_inset Formula $r$
\end_inset

.
 El esquema de la división es 
\begin_inset Formula $R-S$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
r/s\equiv\pi_{1,\dots,n-m}(r)-\pi_{1,\dots,n-m}\left(\left(\pi_{1,\dots,n-m}(r)\times s\right)-r\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/division.PNG
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
División
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
Asignación
\series default
 (
\begin_inset Formula $r\leftarrow s$
\end_inset

)
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula $r$
\end_inset

 no cambia al ejecutar operaciones de actualización sobre 
\begin_inset Formula $s$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Subsection
Operadores extendidos
\end_layout

\begin_layout Enumerate

\series bold
Proyección generalizada
\series default
: permite operadores aritméticos como parte de una proyección.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
\pi_{F_{1},F_{2},\dots,F_{n}}(E)
\]

\end_inset


\end_layout

\begin_layout Standard
donde 
\begin_inset Formula $E$
\end_inset

 es una expresión de álgebra relacional, y 
\begin_inset Formula $F_{i}$
\end_inset

 es una expresión aritmética que involucra constantes y atributos del esquema
 
\begin_inset Formula $E$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
Funciones agregadas
\series default
: son funciones que toman como parámetro un multiconjunto
\begin_inset Foot
status open

\begin_layout Plain Layout
Un 
\series bold
multiconjunto
\series default
 es un conjunto en el que un valor puede aparecer muchas veces.
\end_layout

\end_inset

.
\end_layout

\begin_deeper
\begin_layout Standard

\family typewriter
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

sum
\end_layout

\begin_layout Plain Layout

count
\end_layout

\begin_layout Plain Layout

min
\end_layout

\begin_layout Plain Layout

max
\end_layout

\begin_layout Plain Layout

avg
\end_layout

\end_inset


\end_layout

\begin_layout Standard
La forma general es: 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
_{G_{1},\dots G_{n}}\mathcal{G}_{F_{1}(A_{1}),\dots,F_{m}(A_{m})}(E)
\]

\end_inset


\end_layout

\begin_layout Standard
donde 
\begin_inset Formula $E$
\end_inset

 una expresión de álgebra relacional; 
\begin_inset Formula $G_{i}$
\end_inset

 es un atributo para formar grupos, 
\begin_inset Formula $F_{i}$
\end_inset

 es una función agregada, y 
\begin_inset Formula $A_{i}$
\end_inset

 es un atributo.
 Las tuplas de la relación resultado de 
\begin_inset Formula $E$
\end_inset

 se particionan en grupos de tal forma que
\end_layout

\begin_layout Enumerate
Todas las tuplas en un grupo tienen el mismo valor para 
\begin_inset Formula $G_{i}\,\forall i\in[1,n]$
\end_inset


\end_layout

\begin_layout Enumerate
Tuplas en distintos grupos tienen distinto valor para 
\begin_inset Formula $G_{i}\,\forall i\in[1,n]$
\end_inset


\end_layout

\begin_layout Standard
Para cada grupo, la relación tendrá una tupla 
\begin_inset Formula $(g_{1},\dots,g_{n},a_{1},\dots,a_{m})$
\end_inset

 donde para cada 
\begin_inset Formula $i$
\end_inset

, 
\begin_inset Formula $a_{i}$
\end_inset

 es el resultado de aplicar la función 
\begin_inset Formula $F_{i}$
\end_inset

 en el multiconjunto, para el atributo 
\begin_inset Formula $A_{i}$
\end_inset

 del grupo.
\end_layout

\begin_layout Standard

\emph on
Ejemplo: dada la relación EmpleadosPartTime(nombre,sucursal,salario), la
 siguiente expresión devuelve una relación con un solo atributo (sin nombre)
 y una sola fila, que contiene el valor de la suma de todos los salarios:
\emph default
 
\begin_inset Formula 
\[
\mathcal{G}_{sum(salario)}EmpleadosPartTime
\]

\end_inset


\end_layout

\begin_layout Standard
Se puede usar el operador 
\family typewriter
distinct
\family default
 para eliminar múltiples ocurrencias de un valor.
\end_layout

\begin_layout Standard

\emph on
Ejemplo: con la misma relación anterior, la siguiente expresión devuelve
 una relación con un solo atributo (sin nombre) y una sola fila, que contiene
 la cantidad de sucursales:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\mathcal{G}_{count-distinct(sucursal)}EmpleadosPartTime
\]

\end_inset


\end_layout

\begin_layout Standard
Se puede usar el operador de 
\series bold
grupos
\emph on
 
\series default
\emph default
para particionar una relación y computar una función agregada a cada grupo.
 
\end_layout

\begin_layout Standard

\emph on
Ejemplo: con la misma relación anterior, la siguiente expresión devuelve
 una relación con dos atributos (sin nombres), que contiene la suma de salarios
 de cada sucursal:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
_{sucursal}\mathcal{G}_{sum(salario)}EmpleadosPartTime
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
Join externo
\series default
 (
\emph on
outer join
\emph default
): es una extensión de la operación de 
\emph on
join
\emph default
 que lidia con información faltante (
\emph on
null
\emph default
s).
\end_layout

\begin_deeper
\begin_layout Enumerate

\emph on
Left outer join
\emph default
 (
\series bold

\begin_inset Formula $r_{1}$
\end_inset


\begin_inset Formula $ $
\end_inset


\begin_inset Formula $\leftouterjoin\, r_{2}$
\end_inset


\series default
): hace un 
\emph on
join
\emph default
 
\emph on
natural
\emph default
, y toma todas las tuplas de 
\begin_inset Formula $r_{1}$
\end_inset

 que no matchearon con ninguna tupla de 
\begin_inset Formula $r_{2}$
\end_inset

, les agrega valores 
\emph on
null
\emph default
 a los atributos de 
\begin_inset Formula $r_{2}$
\end_inset

, y los agrega al resultado.
\end_layout

\begin_layout Enumerate

\emph on
Right outer join
\emph default
 (
\series bold

\begin_inset Formula $r_{1}$
\end_inset


\begin_inset Formula $\rightouterjoin\, r_{2}$
\end_inset


\series default
): hace un 
\emph on
join
\emph default
 
\emph on
natural
\emph default
, y toma todas las tuplas de 
\begin_inset Formula $r_{2}$
\end_inset

 que no matchearon con ninguna tupla de 
\begin_inset Formula $r_{1}$
\end_inset

, les agrega valores 
\emph on
null
\emph default
 a los atributos de 
\begin_inset Formula $r_{1}$
\end_inset

, y los agrega al resultado.
\end_layout

\begin_layout Enumerate

\emph on
Full outer join
\emph default
 (
\series bold

\begin_inset Formula $r_{1}$
\end_inset


\begin_inset Formula $\fullouterjoin\, r_{2}$
\end_inset


\series default
): combina las dos operaciones anteriores.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/fullouterjoin.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Ejemplo de 
\emph on
full outer join
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Subsection
Actualizaciones a bases de datos
\end_layout

\begin_layout Subsubsection
Delete
\end_layout

\begin_layout Standard
En álgebra relacional se expresa como 
\begin_inset Formula $r\leftarrow r-E$
\end_inset

, donde 
\begin_inset Formula $r$
\end_inset

 es una relación y 
\begin_inset Formula $E$
\end_inset

 es una expresión de consulta.
\end_layout

\begin_layout Standard
Solo se pueden borrar tuplas completas, no valores de atributos.
\end_layout

\begin_layout Subsubsection
Insert
\end_layout

\begin_layout Standard
En álgebra relacional se expresa como 
\begin_inset Formula $r\leftarrow r\cup E$
\end_inset

, donde 
\begin_inset Formula $r$
\end_inset

 es una relación y 
\begin_inset Formula $E$
\end_inset

 es una expresión de consulta, o una relación constante con una sola tupla.
\end_layout

\begin_layout Subsubsection
Update
\end_layout

\begin_layout Standard
En álgebra relacional se expresa como 
\begin_inset Formula $r\leftarrow\pi_{F_{1},\dots,F_{n}}(r)$
\end_inset

, donde 
\begin_inset Formula $r$
\end_inset

 es una relación y cada 
\begin_inset Formula $F_{i}$
\end_inset

 es, o el atributo i-ésimo de 
\begin_inset Formula $r$
\end_inset

, o una expresión que involucra solo constantes y el nuevo valor de 
\begin_inset Formula $r$
\end_inset

, que da el nuevo valor del atributo i-ésimo.
\end_layout

\begin_layout Subsection
Vistas (
\emph on
views
\emph default
)
\end_layout

\begin_layout Description
Vista relación que no es parte del modelo lógico de la base de datos, pero
 que es visible para el usuario como una relación 
\begin_inset Quotes eld
\end_inset

virtual
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE VIEW v AS <expresion de consulta>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Limitaciones:
\end_layout

\begin_layout Itemize
No se pueden ejecutar operaciones de 
\emph on
update
\emph default
 sobre una vista, salvo que la vista sobre la relación 
\begin_inset Formula $R$
\end_inset

 cumpla lo siguiente:
\end_layout

\begin_deeper
\begin_layout Itemize
Deben usar 
\family typewriter
SELECT
\family default
, y no 
\family typewriter
SELECT DISTINCT
\end_layout

\begin_layout Itemize
La cláusula 
\family typewriter
WHERE
\family default
 no debe incluir a 
\begin_inset Formula $R$
\end_inset

 en una consulta anidada
\end_layout

\begin_layout Itemize
La cláusula 
\family typewriter
WHERE
\family default
 no debe incluir a otra relación
\end_layout

\begin_layout Itemize
Los atributos del 
\family typewriter
SELECT
\family default
 deben ser 
\family typewriter
NOT NULL
\end_layout

\begin_layout Standard
El 
\emph on
update
\emph default
 solo se ejecutará sobre los atributos del 
\family typewriter
SELECT
\family default
.
\end_layout

\end_deeper
\begin_layout Itemize
A las operaciones de 
\emph on
delete
\emph default
 sobre una vista se les pasa la cláusula 
\family typewriter
WHERE
\family default
 de la vista (para borrar solo las tuplas que se pueden ver en la vista).
\end_layout

\begin_layout Itemize
Si las relaciones subyacentes son modificadas, la vista queda desactualizada.
 Por eso, en los motores, en una expresión que involucra una vista, la relación
 de la vista se recalcula al evaluar la expresión.
\end_layout

\begin_layout Description
Vista
\begin_inset space ~
\end_inset

materializada vista que se evalúa y se almacena físicamente.
 Los cambios a estas vistas se realizan de forma 
\emph on
incremental 
\emph default
(no se reconstruye toda la vista desde cero).
\end_layout

\begin_layout Section
Cálculo relacional
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
COMPLETAR
\end_layout

\end_inset

 COMPLETAR
\end_layout

\begin_layout Section
Lenguajes de consulta
\end_layout

\begin_layout Description
Query expresión que solicita una porción de información.
\end_layout

\begin_layout Standard
Hay dos tipos de lenguajes de consulta (
\emph on
query languages
\emph default
):
\end_layout

\begin_layout Enumerate

\series bold
Procedurales:
\series default
 el usuario indica una serie de operaciones a ejecutar sobre una base de
 datos para producir el resultado deseado.
 
\emph on
Ejemplos: SQL.
\end_layout

\begin_layout Enumerate

\series bold
No procedurales:
\series default
 el usuario indica la información deseada, sin especificar el procedimiento
 para obtenerla.
 
\emph on
Ejemplos: Datalog (similar a Prolog).
\end_layout

\begin_layout Section
Integridad y seguridad
\end_layout

\begin_layout Standard
En SQL, tenemos las siguientes restricciones:
\end_layout

\begin_layout Itemize

\family typewriter
NOT NULL
\family default
: indica que un atributo no puede tener el valor 
\emph on
null
\end_layout

\begin_layout Itemize

\family typewriter
UNIQUE
\family default
: asegura que para todas las tuplas, el valor del atributo es único
\end_layout

\begin_layout Itemize

\family typewriter
PRIMARY KEY
\family default
: asegura que una o varias columnas tengan una identidad única, no nula
\end_layout

\begin_layout Itemize

\family typewriter
FOREIGN KEY
\family default
: asegura la integridad referencial de una tabla
\end_layout

\begin_layout Itemize

\family typewriter
CHECK
\family default
: asegura que el valor de un atributo satisface una condición especificada
\end_layout

\begin_layout Itemize

\family typewriter
DEFAULT
\family default
: especifica un valor por defecto cuando no se especifique ninguo
\end_layout

\begin_layout Subsection
Restricciones de dominio
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE DOMAIN color AS VARCHAR(10)
\end_layout

\begin_layout Plain Layout

	DEFAULT 'SinColor'
\end_layout

\begin_layout Plain Layout

	CHECK (value IN ('SinColor', 'Azul', 'Rojo'));
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

CAST relacion.Atributo AS <dominio>;
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

DROP DOMAIN <dominio>;
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

ALTER DOMAIN <dominio>;
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Restricciones de integridad referencial
\end_layout

\begin_layout Standard
Ejemplo: 
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE TABLE hospital (
\end_layout

\begin_layout Plain Layout

	IdHosp SMALLINT,
\end_layout

\begin_layout Plain Layout

	PRIMARY KEY (IdHosp));
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

CREATE TABLE medico (
\end_layout

\begin_layout Plain Layout

	IdHosp SMALLINT,
\end_layout

\begin_layout Plain Layout

	IdMedico SMALLINT,
\end_layout

\begin_layout Plain Layout

	Nombre VARCHAR(40)
\end_layout

\begin_layout Plain Layout

	PRIMARY KEY (IdMedico));
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

ALTER TABLE medico
\end_layout

\begin_layout Plain Layout

	ADD CONSTRAINT FK_medico 
\end_layout

\begin_layout Plain Layout

	FOREIGN KEY IdHosp 
\end_layout

\begin_layout Plain Layout

	REFERENCES hospital(IdHosp);
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Acciones referenciales
\end_layout

\begin_layout Standard
Son llamadas SQL que se ejecutan de forma automática ante la eliminación
 o actualización de una restricción de integridad referencial, para mantener
 la misma.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

ALTER TABLE medico 
\end_layout

\begin_layout Plain Layout

	ADD CONSTRAINT FK_medico 
\end_layout

\begin_layout Plain Layout

	FOREIGN KEY IdHosp 
\end_layout

\begin_layout Plain Layout

	REFERENCES hospital(IdHosp)
\end_layout

\begin_layout Plain Layout

		ON [DELETE|UPDATE] [SET DEFAULT|SET NULL|CASCADE|NO ACTION];
\end_layout

\end_inset


\end_layout

\begin_layout Standard
De esta forma, cuando se elimine o actualice una fila en la tabla 
\family typewriter
Hospital
\family default
, el sistema de base de datos ejecutará la acción especificada en la tabla
 
\family typewriter
Medico
\family default
:
\end_layout

\begin_layout Itemize

\family typewriter
SET DEFAULT / SET NULL
\family default
: se fija el valor predeterminado o nulo en la fila referenciante.
\end_layout

\begin_layout Itemize

\family typewriter
CASCADE
\family default
: al eliminar una tupla referenciada, las tuplas referenciantes son eliminadas.
 Al modificar la clave en la tabla referenciada, el correspondiente valor
 de la clave foránea es actualizado.
\end_layout

\begin_layout Subsection
Seguridad y autorizaciones
\end_layout

\begin_layout Standard
Para brindar autorizaciones, se brindan privilegios.
 Los privilegios son tipos de autorizaciones para leer, insertar, actualizar
 o borrar datos.
 También existe el privilegio 
\family typewriter
references
\family default
, que permite declarar claves foráneas al crear relaciones nuevas.
\end_layout

\begin_layout Standard
Con la opción 
\family typewriter
WITH GRANT OPTION
\family default
 se permite que el usuario que recibe el permiso se lo conceda a alguien
 más.
 El pase de autorizaciones de un usuario a otro se representa con un 
\series bold
grafo de autorización
\series default
, donde cada nodo es un usuario (la raíz es el DBA), y las aristas representan
 autorizaciones concedidas.
\end_layout

\begin_layout Standard
Un usuario tiene autorización sí y solo sí existe un camino desde la raíz
 del grafo hacia el nodo usuario.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

GRANT <privilegios>
\end_layout

\begin_layout Plain Layout

	ON <[relacion|vista]>
\end_layout

\begin_layout Plain Layout

	TO <[usuario|rol]>
\end_layout

\begin_layout Plain Layout

	[WITH GRANT OPTION];
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Para eliminar autorizaciones se usa el comando 
\family typewriter
REVOKE
\family default
.
 Por defecto, este comando tiene el efecto de revocar los privilegios que
 el usuario le brindó a otros.
 Para evitar este efecto cascada, se usa la opción 
\family typewriter
RESTRICT
\family default
.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

REVOKE <privilegios>
\end_layout

\begin_layout Plain Layout

	ON <[relacion|vista]>
\end_layout

\begin_layout Plain Layout

	FROM <[usuario|rol]>
\end_layout

\begin_layout Plain Layout

	[RESTRICT];
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Para crear roles:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE ROLE instructor;
\end_layout

\end_inset


\end_layout

\begin_layout Section
Triggers
\end_layout

\begin_layout Description
Trigger comando que el sistema ejecuta automáticamente si un 
\emph on
evento
\emph default
 satisface cierta 
\emph on
condición
\emph default
.
 Son un conjunto de acciones; por ejemplo, enviar un e-mail, ejecutar el
 
\emph on
rollback
\emph default
 de una transacción, o crear una copia de la base de datos.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE TRIGGER chequear_horario
\end_layout

\begin_layout Plain Layout

[BEFORE|AFTER] [UPDATE|INSERT|DELETE] [OF atributo] ON curso
\end_layout

\begin_layout Plain Layout

WHEN condicion
\end_layout

\begin_layout Plain Layout

BEGIN
\end_layout

\begin_layout Plain Layout

	acciones
\end_layout

\begin_layout Plain Layout

END
\end_layout

\end_inset


\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Part
Diseño de bases de datos
\end_layout

\begin_layout Standard
Objetivos:
\end_layout

\begin_layout Itemize
Reducir la redundancia de la información (porque ocupa espacio y es más
 difícil de actualizar): repetición de información en varias tuplas
\end_layout

\begin_layout Itemize
Eliminar las anomalías:
\end_layout

\begin_deeper
\begin_layout Itemize
De actualización: podría darse el caso de que actualizamos una tupla y no
 actualizamos otra tupla con el mismo dato
\end_layout

\begin_layout Itemize
De inserción: no es posible insertar ciertos datos sin insertar otros (posibleme
nte no relacionados)
\end_layout

\begin_layout Itemize
De eliminación: podría darse el caso de que eliminamos una tupla y, sin
 querer, borramos un dato importante
\end_layout

\end_deeper
\begin_layout Itemize
Devolver información rápidamente
\end_layout

\begin_layout Standard
Notación:
\end_layout

\begin_layout Itemize
Nombre de esquemas: 
\begin_inset Formula $R,S,R_{1},\dots,R_{n},S_{1},\dots,S_{n}$
\end_inset


\end_layout

\begin_layout Itemize
Instancias de esquemas: 
\begin_inset Formula $r,s,r_{1},\dots r_{n},s_{1},\dots,s_{n}$
\end_inset


\end_layout

\begin_layout Itemize
Conjuntos de atributos: 
\begin_inset Formula $\alpha,\beta,\gamma$
\end_inset


\end_layout

\begin_layout Itemize
Atributos: 
\begin_inset Formula $A,B,C$
\end_inset


\end_layout

\begin_layout Itemize
Tuplas: 
\begin_inset Formula $t_{1},t_{2}$
\end_inset


\end_layout

\begin_layout Subsection
Dependencias funcionales
\end_layout

\begin_layout Description
Dependencia
\begin_inset space ~
\end_inset

funcional sea el esquema 
\begin_inset Formula $R$
\end_inset

, y sean 
\begin_inset Formula $\alpha\subseteq R$
\end_inset

 y 
\begin_inset Formula $\beta\subseteq R$
\end_inset

.
 La dependencia funcional 
\begin_inset Formula $\alpha\to\beta$
\end_inset

 se cumple si para cada par de tuplas 
\begin_inset Formula $t_{1},t_{2}$
\end_inset

 tal que 
\begin_inset Formula $t_{1}[\alpha]=t_{2}[\alpha]$
\end_inset

 , también se cumple que 
\begin_inset Formula $t_{1}[\beta]=t_{2}[\beta]$
\end_inset

.
 
\end_layout

\begin_deeper
\begin_layout Standard
Una dependencia funcional es 
\series bold
trivial
\series default
 si 
\begin_inset Formula $\beta\subseteq\alpha$
\end_inset

.
 En particular, 
\begin_inset Formula $\alpha\to\alpha$
\end_inset

 es trivial.
\end_layout

\begin_layout Standard
Un conjunto 
\begin_inset Formula $K$
\end_inset

 es superclave de 
\begin_inset Formula $R$
\end_inset

 si 
\begin_inset Formula $K\to R$
\end_inset

.
\end_layout

\begin_layout Standard
Un conjunto 
\begin_inset Formula $J$
\end_inset

 es clave candidata de 
\begin_inset Formula $R$
\end_inset

 si 
\begin_inset Formula $J\to R$
\end_inset

 y además 
\begin_inset Formula $\not\exists\gamma\subset J/\gamma\to R$
\end_inset

.
\end_layout

\begin_layout Standard
Una dependencia funcional, a diferencia de una diferencia multivaluada o
 de junta, prohíbe que ciertas tuplas existan.
\end_layout

\end_deeper
\begin_layout Description
Dependencias
\begin_inset space ~
\end_inset

funcionales
\begin_inset space ~
\end_inset

implicadas sea el esquema 
\begin_inset Formula $R$
\end_inset

.
 Una dependencia funcional 
\begin_inset Formula $f$
\end_inset

 está lógicamente implicada por un conjunto de dependencias 
\begin_inset Formula $F$
\end_inset

, si para cada instancia de relación 
\begin_inset Formula $r(R)$
\end_inset

 que cumple 
\begin_inset Formula $F$
\end_inset

, también cumple 
\begin_inset Formula $f$
\end_inset

.
\end_layout

\begin_layout Subsubsection
Axiomas de Armstrong
\end_layout

\begin_layout Standard
Se utilizan para hallar las dependencias funcionales implicadas, es decir,
 
\begin_inset Formula $F^{+}$
\end_inset

 de un conjunto 
\begin_inset Formula $F$
\end_inset

.
\end_layout

\begin_layout Enumerate
Regla de reflexividad
\end_layout

\begin_deeper
\begin_layout Standard
Si 
\begin_inset Formula $\alpha$
\end_inset

 es un conjunto de atributos y 
\begin_inset Formula $\beta\subseteq\alpha,$
\end_inset

 entonces 
\begin_inset Formula $(\alpha\to\beta)\in F^{+}$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Regla de augmentación
\end_layout

\begin_deeper
\begin_layout Standard
Si 
\begin_inset Formula $\alpha\to\beta$
\end_inset

 es una dependencia funcional y 
\begin_inset Formula $\gamma$
\end_inset

 es un conjunto de atributos, entonces 
\begin_inset Formula $(\gamma\alpha\to\gamma\beta)\in F^{+}$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Regla de transitividad
\end_layout

\begin_deeper
\begin_layout Standard
Si 
\begin_inset Formula $\alpha\to\beta$
\end_inset

 es una dependencia funcional y 
\begin_inset Formula $\beta\to\gamma$
\end_inset

 es otra dependencia funcional, entonces 
\begin_inset Formula $(\alpha\to\gamma)\in F^{+}$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
Propiedades deducidas:
\end_layout

\begin_layout Enumerate
Regla de unión
\end_layout

\begin_deeper
\begin_layout Standard
Si se cumplen 
\begin_inset Formula $\alpha\to\beta$
\end_inset

 y 
\begin_inset Formula $\alpha\to\gamma$
\end_inset

, entonces también se cumple 
\begin_inset Formula $\alpha\to\beta\gamma$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Regla de descomposición
\end_layout

\begin_deeper
\begin_layout Standard
Si se cumple 
\begin_inset Formula $\alpha\to\beta\gamma$
\end_inset

, entonces también se cumplen 
\begin_inset Formula $\alpha\to\beta$
\end_inset

 y 
\begin_inset Formula $\alpha\to\gamma$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Regla de pseudotransitividad
\end_layout

\begin_deeper
\begin_layout Standard
Si se cumplen 
\begin_inset Formula $\alpha\to\beta$
\end_inset

 y 
\begin_inset Formula $\gamma\beta\to\delta$
\end_inset

, entonces también se cumple 
\begin_inset Formula $\gamma\alpha\to\delta$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard

\series bold
Teorema
\series default
: 
\begin_inset Formula $R$
\end_inset

 satisface la dependencia funcional 
\begin_inset Formula $X\to Y$
\end_inset

 sí y sólo sí 
\begin_inset Formula $R$
\end_inset

 descompone sin pérdida sobre los esquemas 
\begin_inset Formula $XY$
\end_inset

 y 
\begin_inset Formula $X(R-XY)$
\end_inset

, es decir, si 
\begin_inset Formula $R$
\end_inset

 satisface la dependencia de junta 
\begin_inset Formula $*\left(XY,X(R-XY)\right)$
\end_inset


\end_layout

\begin_layout Subsubsection
Clausura y superclaves
\end_layout

\begin_layout Description
Clausura
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

F sea 
\begin_inset Formula $F$
\end_inset

 un conjunto de dependencias funcionales sobre el esquema 
\begin_inset Formula $R$
\end_inset

.
 
\begin_inset Formula $F^{+}$
\end_inset

 es el conjunto de dependencias funcionales implicadas por 
\begin_inset Formula $F$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
F^{+}=\left\{ \alpha\to\beta/F\vDash\alpha\to\beta\right\} 
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status collapsed

\begin_layout Plain Layout
Entrada: relación 
\begin_inset Formula $R$
\end_inset

, conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: 
\begin_inset Formula $F^{+}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $F^{+}=F$
\end_inset


\end_layout

\begin_layout Enumerate
Repetir hasta que 
\begin_inset Formula $F^{+}$
\end_inset

 no varíe:
\end_layout

\begin_deeper
\begin_layout Enumerate
Para cada dependencia funcional 
\begin_inset Formula $f$
\end_inset

 en 
\begin_inset Formula $F^{+}$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Plain Layout
Aplicar reglas de reflexividad y aumentación a 
\begin_inset Formula $f$
\end_inset


\end_layout

\begin_layout Plain Layout
Agregar las dependencias funcionales restantes a 
\begin_inset Formula $F^{+}$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Para cada par de dependencias funcionales 
\begin_inset Formula $f_{1},f_{2}$
\end_inset

 en 
\begin_inset Formula $F^{+}$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
Si 
\begin_inset Formula $f_{1},f_{2}$
\end_inset

 pueden combinarse usando el axioma de transitividad:
\end_layout

\begin_deeper
\begin_layout Plain Layout
Agregar la dependencia funcional resultante a 
\begin_inset Formula $F^{+}$
\end_inset


\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Enumerate
Devolver 
\begin_inset Formula $F^{+}$
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Computar 
\begin_inset Formula $F^{+}$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Para un esquema 
\begin_inset Formula $R$
\end_inset

 con 
\begin_inset Formula $n$
\end_inset

 atributos, hay 
\begin_inset Formula $2^{n+1}$
\end_inset

 posibles dependencias funcionales.
\end_layout

\begin_layout Standard

\series bold
Clausura de 
\begin_inset Formula $\alpha$
\end_inset


\series default
 
\series bold
bajo 
\begin_inset Formula $F$
\end_inset


\series default
: es el conjunto de atributos de 
\begin_inset Formula $R$
\end_inset

 que dependen funcionalmente de 
\begin_inset Formula $\alpha$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{F}^{+}=\left\{ \beta/\beta\subset R\,\wedge\, F\vDash\alpha\to\beta\right\} 
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status collapsed

\begin_layout Plain Layout
Entrada: relación 
\begin_inset Formula $R$
\end_inset

, conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset

, atributo 
\begin_inset Formula $\alpha$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: 
\begin_inset Formula $\alpha_{F}^{+}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $a^{+}=a$
\end_inset


\end_layout

\begin_layout Enumerate
Repetir hasta que 
\begin_inset Formula $a^{+}$
\end_inset

 no varíe:
\end_layout

\begin_deeper
\begin_layout Enumerate
Para cada dependencia funcional 
\begin_inset Formula $B\to Y\in F$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
Si 
\begin_inset Formula $B\subseteq a^{+}$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Plain Layout
\begin_inset Formula $a^{+}=a^{+}\cup Y$
\end_inset


\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Enumerate
Devolver 
\begin_inset Formula $a^{+}$
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Computar 
\begin_inset Formula $\alpha^{+}$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Usos del algoritmo de cálculo de la clausura de 
\begin_inset Formula $a^{+}$
\end_inset

:
\end_layout

\begin_layout Enumerate
Para determinar si 
\begin_inset Formula $\alpha$
\end_inset

 es una superclave de 
\begin_inset Formula $R$
\end_inset

: debe cumplirse que 
\begin_inset Formula $\alpha^{+}=R$
\end_inset

.
\end_layout

\begin_layout Enumerate
Para determinar si la dependencia funcional 
\begin_inset Formula $\alpha\to\beta\in F^{+}$
\end_inset

 : debe cumplirse que 
\begin_inset Formula $\beta\subseteq\alpha^{+}$
\end_inset

.
\end_layout

\begin_layout Enumerate
Es una forma alternativa de calcular 
\begin_inset Formula $F^{+}$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status collapsed

\begin_layout Plain Layout
Entrada: relación 
\begin_inset Formula $R$
\end_inset

, conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: claves candidatas de 
\begin_inset Formula $R$
\end_inset


\end_layout

\begin_layout Enumerate
Dibujar el grafo de dependencias funcionales (si 
\begin_inset Formula $X\to Y\in F$
\end_inset

, dibujar una arista entre 
\begin_inset Formula $X$
\end_inset

 e 
\begin_inset Formula $Y$
\end_inset

)
\end_layout

\begin_layout Enumerate
\begin_inset Formula $V_{ni}=$
\end_inset

 atributos sin aristas entrantes
\end_layout

\begin_layout Enumerate
\begin_inset Formula $V_{oi}=$
\end_inset

 atributos que solo tienen aristas entrantes
\end_layout

\begin_layout Enumerate
\begin_inset Formula $K=\{\}$
\end_inset


\end_layout

\begin_layout Enumerate
Repetir hasta que no se pueda agregar nada a 
\begin_inset Formula $K$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Formula $CC=$
\end_inset

 todos los atributos de 
\begin_inset Formula $V_{ni}$
\end_inset


\end_layout

\begin_layout Enumerate
Agregar a 
\begin_inset Formula $CC$
\end_inset

 un atributo de 
\begin_inset Formula $R$
\end_inset

 que no esté en 
\begin_inset Formula $V_{oi}$
\end_inset

 ni 
\begin_inset Formula $V_{ni}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $K=K\cup CC$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Devolver 
\begin_inset Formula $K$
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Cálculo de claves candidatas mediante un grafo
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Cubrimiento minimal
\end_layout

\begin_layout Description
Atributo
\begin_inset space ~
\end_inset

extráneo atributo de una dependencia funcional que se puede quitar de la
 misma sin cambiar
\emph on
 
\emph default
la clausura del conjunto de dependencias funcionales.
 
\end_layout

\begin_deeper
\begin_layout Standard
Sea el conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset

 y la dependencia funcional 
\begin_inset Formula $\alpha\to\beta$
\end_inset

 en 
\begin_inset Formula $F$
\end_inset

.
\end_layout

\begin_layout Itemize
El atributo 
\begin_inset Formula $A$
\end_inset

 es extráneo en 
\begin_inset Formula $\alpha$
\end_inset

 si, cuando lo sacamos de 
\begin_inset Formula $\alpha$
\end_inset

, la dependencia funcional se sigue cumpliendo (
\begin_inset Formula $B\in(\alpha-A)_{F}^{+}$
\end_inset

).
 Formalmente:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $A\in\alpha$
\end_inset

, y
\end_layout

\begin_layout Itemize
\begin_inset Formula $F$
\end_inset

 implica lógicamente a 
\begin_inset Formula $\left(F-\left\{ \alpha\to B\right\} \right)\cup\left\{ \left(\alpha-A\right)\to\beta\right\} $
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
El atributo 
\begin_inset Formula $B$
\end_inset

 es extráneo en 
\begin_inset Formula $\beta$
\end_inset

 si, cuando lo sacamos de 
\begin_inset Formula $\beta$
\end_inset

, la dependencia funcional se sigue cumpliendo (
\begin_inset Formula $\alpha\to(\beta-B)$
\end_inset

) Formalmente:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $B\in\beta$
\end_inset

, y
\end_layout

\begin_layout Itemize
El conjunto 
\begin_inset Formula $\left(F-\left\{ \alpha\to\beta\right\} \right)\cup\left\{ \alpha\to\left(\beta-B\right)\right\} $
\end_inset

 implica lógicamente a 
\begin_inset Formula $F$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Description
Cubrimiento
\begin_inset space ~
\end_inset

minimal El cubrimiento minimal 
\begin_inset Formula $F_{min}$
\end_inset

 para 
\begin_inset Formula $F$
\end_inset

 es un conjunto de dependencias funcionales tales que 
\begin_inset Formula $F$
\end_inset

 implica todas las dependencias en 
\begin_inset Formula $F_{min}$
\end_inset

, y 
\begin_inset Formula $F_{min}$
\end_inset

 implica todas las dependencias en 
\begin_inset Formula $F$
\end_inset

.
 
\end_layout

\begin_layout Standard
\begin_inset Formula $F_{min}$
\end_inset

 debe tener las propiedades siguientes:
\end_layout

\begin_layout Itemize
Ninguna dependencia funcional en 
\begin_inset Formula $F_{min}$
\end_inset

 contiene un atributo extráneo
\end_layout

\begin_layout Itemize
No existen dos dependencias funcionales 
\begin_inset Formula $\alpha_{1}\to\beta$
\end_inset

 y 
\begin_inset Formula $\alpha_{2}\to\gamma$
\end_inset

 en 
\begin_inset Formula $F_{min}$
\end_inset

 tales que 
\begin_inset Formula $\alpha_{1}=\alpha_{2}$
\end_inset

.
 Es decir, los lados izquierdos deben ser únicos
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: cubrimiento minimal 
\begin_inset Formula $F_{min}$
\end_inset


\end_layout

\begin_layout Enumerate
Usar el axioma de la descomposición para dejar un solo atributo en el lado
 derecho de cada dependencia funcional.
\end_layout

\begin_layout Enumerate
Eliminar los atributos extráneos de los lados izquierdos.
\end_layout

\begin_deeper
\begin_layout Plain Layout
Sea 
\begin_inset Formula $Y\to B$
\end_inset

 una dependencia funcional en 
\begin_inset Formula $F$
\end_inset

, con al menos dos atributos en 
\begin_inset Formula $Y$
\end_inset

.
 Sea 
\begin_inset Formula $Z$
\end_inset

 igual a 
\begin_inset Formula $Y$
\end_inset

 pero con algún atributo de menos.
 Si 
\begin_inset Formula $F$
\end_inset

 implica a 
\begin_inset Formula $Z\to B$
\end_inset

, entonces reemplazar 
\begin_inset Formula $Y\to B$
\end_inset

 con 
\begin_inset Formula $Z\to B$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Enumerate
Eliminar las dependencias funcionales redundantes (es decir, que se deducen
 de los axiomas de Armstrong).
\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Cálculo de cubrimiento minimal
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard

\emph on
Ejemplo: sea el conjunto de dependencias 
\begin_inset Formula $F=\{A\to BD,B\to CD,AC\to E\}$
\end_inset

.
 Calcular el cubrimiento minimal.
\end_layout

\begin_layout Enumerate

\emph on
Dejar todos los lados derechos con un único atributo.
\end_layout

\begin_deeper
\begin_layout Standard

\emph on
\begin_inset Formula $F_{min}=\{A\to B,A\to D,B\to C,B\to D,AC\to E\}$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate

\emph on
Eliminar todos los atributos redundantes del lado izquierdo.
\end_layout

\begin_deeper
\begin_layout Enumerate

\emph on
Hay que analizar solamente la dependencia que tiene lado izquierdo compuesto:
 
\begin_inset Formula $AC\to E$
\end_inset

.
\end_layout

\begin_layout Enumerate

\emph on
¿
\begin_inset Formula $C$
\end_inset

 es redundante en 
\begin_inset Formula $AC\to E$
\end_inset

? Hay que verificar si 
\begin_inset Formula $E$
\end_inset

 está en 
\begin_inset Formula $A_{F}^{+}$
\end_inset

.
 Como 
\begin_inset Formula $A_{F}^{+}=ABCDE$
\end_inset

, entonces 
\begin_inset Formula $C$
\end_inset

 es redundante en 
\begin_inset Formula $AC\to E$
\end_inset

 y podemos reemplazar esta dependencia funcional por 
\begin_inset Formula $A\to E$
\end_inset

.
\end_layout

\begin_layout Standard

\emph on
\begin_inset Formula $F_{min}=\{A\to B,A\to D,B\to C,B\to D,A\to E\}$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate

\emph on
Eliminar las dependencias redundantes.
\end_layout

\begin_deeper
\begin_layout Itemize

\emph on
Hay que revisar una por una todas las dependencias de 
\begin_inset Formula $F_{min}$
\end_inset

.
 En caso de que una sea redundante, se la elimina de 
\begin_inset Formula $F_{min}$
\end_inset

 y se sigue analizando el resto tomando como referencia el nuevo 
\begin_inset Formula $F_{min}$
\end_inset

.
 
\end_layout

\begin_layout Itemize

\emph on
¿
\begin_inset Formula $A\to D$
\end_inset

 es redundante en 
\begin_inset Formula $F_{c}$
\end_inset

? Hay que verificar si 
\begin_inset Formula $D$
\end_inset

 está en 
\begin_inset Formula $A_{F_{c}-\{A\to D\}}^{+}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize

\emph on
\begin_inset Formula $F_{min}-\{A\to D\}=\{A\to B,B\to C,B\to D,A\to E\}$
\end_inset


\end_layout

\begin_layout Itemize

\emph on
\begin_inset Formula $A_{F_{min}-\{A\to D\}}^{+}=ABCDE$
\end_inset


\end_layout

\begin_layout Itemize

\emph on
Como 
\begin_inset Formula $D\in F_{min}-\{A\to D\}$
\end_inset

, 
\begin_inset Formula $A\to D$
\end_inset

 es redundante
\end_layout

\begin_layout Standard
\begin_inset Formula $F_{min}=\left\{ A\to B,B\to C,B\to D,A\to E\right\} $
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
Puede comprobarse que el resto de las dependencias funcionales no es redundante.
\end_layout

\end_deeper
\begin_layout Subsection
Primera forma normal (1FN)
\end_layout

\begin_layout Description
Dominio
\begin_inset space ~
\end_inset

atómico los elementos del dominio se consideran unidades indivisibles.
\end_layout

\begin_layout Standard
Una relación con esquema 
\begin_inset Formula $R$
\end_inset

 está en 1FN si los dominios de sus atributos son atómicos, y si no hay
 atributos similares repetidos.
\end_layout

\begin_layout Standard

\series bold
\emph on
Ejemplo
\series default
\emph default
: la siguiente relación no está en 1FN.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Título Libro
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Autor 1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Autor 2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Autor 3
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Database System Concepts
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Avi Silberschatz
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Henry Korth
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
S.
 Sudarshan
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Applied Cryptography
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Bruce Schneier
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NULL
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NULL
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
Para normalizarla, hay que dividirla en dos relaciones.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="2">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
ID libro
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Título Libro
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Database System Concepts
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Applied Cryptography
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="2">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
ID libro
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Autor
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Avi Silberschatz
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Henry Korth
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
S.
 Sudarshan
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Bruce Schneier
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection
Descomposición de una relación
\end_layout

\begin_layout Description
Descomposición
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

una
\begin_inset space ~
\end_inset

relación Sea el esquema relacional 
\begin_inset Formula $R$
\end_inset

.
 El conjunto de esquemas 
\begin_inset Formula $\left\{ R_{1},R_{2},\dots,R_{n}\right\} $
\end_inset

 es una descomposición de 
\begin_inset Formula $R$
\end_inset

 si
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R=R_{1}\cup R_{2}\cup\dots\cup R_{n}
\]

\end_inset


\end_layout

\begin_layout Standard
Sea la relación 
\begin_inset Formula $r(R)$
\end_inset

.
 Sean 
\begin_inset Formula $r_{i}=\pi_{R_{i}}(r)$
\end_inset

 para 
\begin_inset Formula $i=1,2,\dots,n$
\end_inset

.
 Es decir, 
\begin_inset Formula $\left\{ r_{1},r_{2},\dots,r_{n}\right\} $
\end_inset

 es la base de datos que resulta de descomponer 
\begin_inset Formula $R$
\end_inset

 en 
\begin_inset Formula $\left\{ R_{1},R_{2},\dots,R_{n}\right\} $
\end_inset

.
 Siempre se verifica que
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
r\subseteq r_{1}\bowtie r_{2}\bowtie\dots\bowtie r_{n}
\]

\end_inset


\end_layout

\begin_layout Standard
Es decir, 
\begin_inset Formula $r$
\end_inset

 es un subconjunto de la junta de la descomposición (la junta podría tener
 tuplas que no están en 
\begin_inset Formula $r$
\end_inset

).
\end_layout

\begin_layout Standard
Propiedades deseadas de la descomposición:
\end_layout

\begin_layout Enumerate

\series bold
Sin pérdida de información: 
\series default
verifica que
\series bold
 
\emph on

\begin_inset Formula $r=\pi_{R_{1}}(r)\bowtie\pi_{R_{2}}(r)\bowtie\dots\bowtie\pi_{R_{n}}(r)$
\end_inset

.
 
\end_layout

\begin_layout Enumerate

\series bold
Preservación de dependencias
\end_layout

\begin_deeper
\begin_layout Standard
Una descomposición que verifica que 
\begin_inset Formula $F'^{+}=F^{+}$
\end_inset

 preserva dependencias, donde 
\begin_inset Formula $F'=F_{1}\cup F_{2}\cup\dots\cup F_{n}$
\end_inset

 son las dependencias proyectadas.
\end_layout

\begin_layout Standard
Esta propiedad es deseable porque significa que podemos chequear si se cumple
 la dependencia con solo verificarla en una relación individual, y no necesitamo
s hacer un 
\emph on
join
\emph default
 de las relaciones de la descomposición.
\end_layout

\end_deeper
\begin_layout Enumerate
Poca o nula redundancia de información
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: relación 
\begin_inset Formula $R$
\end_inset

, relación 
\begin_inset Formula $R_{i}$
\end_inset

, conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: conjunto de dependencias funcionales que se verifican en 
\begin_inset Formula $R_{i}$
\end_inset

 (
\begin_inset Formula $F_{i}$
\end_inset

)
\end_layout

\begin_layout Enumerate
\begin_inset Formula $F_{i}=\{\}$
\end_inset


\end_layout

\begin_layout Enumerate
Para cada conjunto de atributos 
\begin_inset Formula $X$
\end_inset

 que es un subconjunto de atributos de 
\begin_inset Formula $R_{i}$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Enumerate
Calcular 
\begin_inset Formula $X_{F}^{+}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $F_{i}=F_{i}\cup\left\{ X\to A\right\} $
\end_inset

, tal que 
\begin_inset Formula $A\subseteq X_{F}^{+}$
\end_inset

 y 
\begin_inset Formula $A\subseteq R_{i}$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Devolver 
\begin_inset Formula $F_{i}$
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Cálculo de la proyección de dependencias 
\begin_inset Formula $F_{i}$
\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: dependencia funcional 
\begin_inset Formula $A\to B$
\end_inset

, conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset

, descomposición 
\begin_inset Formula $\left\{ R_{1},\ldots,R_{n}\right\} $
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: 
\begin_inset Quotes eld
\end_inset

verdadero
\begin_inset Quotes erd
\end_inset

 si la descomposición preserva 
\begin_inset Formula $A\to B$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $Z=A$
\end_inset


\end_layout

\begin_layout Enumerate
Repetir hasta que 
\begin_inset Formula $Z$
\end_inset

 no varíe o hasta que 
\begin_inset Formula $Z$
\end_inset

 incluya a 
\begin_inset Formula $B$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
Para cada 
\begin_inset Formula $R_{i}$
\end_inset

: 
\begin_inset Formula $Z=Z\cup\left[\left(Z\cap R_{i}\right)^{+}\cap R_{i}\right]$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Si 
\begin_inset Formula $B\subseteq Z$
\end_inset

: devolver 
\begin_inset Quotes eld
\end_inset

verdadero
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Enumerate
Si no: devolver 
\begin_inset Quotes eld
\end_inset

falso
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Cálculo para saber si una descomposición preserva una dependencia
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Descomposición SPI en 2 relaciones
\end_layout

\begin_layout Standard
Sea el esquema relacional 
\begin_inset Formula $R$
\end_inset

, y sea 
\begin_inset Formula $F$
\end_inset

 el conjunto de dependencias funcionales sobre 
\begin_inset Formula $R$
\end_inset

.
 Sean 
\begin_inset Formula $R_{1}$
\end_inset

 y 
\begin_inset Formula $R_{2}$
\end_inset

 una descomposición de 
\begin_inset Formula $R$
\end_inset

.
 Esta descomposición es 
\emph on
sin pérdida de información
\emph default
 (SPI) si al menos una de las siguientes dependencias funcionales está en
 
\begin_inset Formula $F^{+}$
\end_inset

:
\end_layout

\begin_layout Itemize
\begin_inset Formula $R_{1}\cap R_{2}\to R_{1}-R_{2}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $R_{1}\cap R_{2}\to R_{2}-R_{1}$
\end_inset


\end_layout

\begin_layout Standard

\emph on
Ejemplo: ¿La descomposición de 
\begin_inset Formula $R(A,B,C,D,E,F)$
\end_inset

 en 
\begin_inset Formula $R_{1}=(A,D,E,F)$
\end_inset

 y 
\begin_inset Formula $R_{2}=(B,C,D)$
\end_inset

 es SPI respecto de 
\begin_inset Formula $F=\{A\to BD,B\to CD,AC\to E\}$
\end_inset

?
\end_layout

\begin_layout Itemize
\begin_inset Formula $R_{1}\cap R_{2}=D$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $R_{1}-R_{2}=AEF$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $R_{2}-R_{1}=BC$
\end_inset


\end_layout

\begin_layout Itemize

\emph on
Como 
\begin_inset Formula $D_{F}^{+}=\{D\}$
\end_inset

, vemos que no se cumplen ni 
\begin_inset Formula $R_{1}\cap R_{2}\to R_{1}-R_{2}$
\end_inset

 ni 
\begin_inset Formula $R_{1}\cap R_{2}\to R_{2}-R_{1}$
\end_inset

.
 Por lo tanto, esta descomposición no es SPI.
 
\end_layout

\begin_layout Subsubsection
Descomposición SPI en más de 2 relaciones
\end_layout

\begin_layout Standard
El algoritmo 
\series bold
Chase Tableau 
\series default
se utiliza para verificar si una descomposición de 
\begin_inset Formula $R$
\end_inset

 en 
\begin_inset Formula $R_{1},\ldots,R_{k}$
\end_inset

 (
\begin_inset Formula $k>2)$
\end_inset

 es SPI.
 Es decir, si la proyección de un esquema restringido por dependencias en
 una descomposición, puede recuperarse haciendo el 
\emph on
join
\emph default
 de las proyecciones.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: esquema de relación 
\begin_inset Formula $R$
\end_inset

, conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset

, descomposición 
\begin_inset Formula $\left\{ R_{1},\ldots,R_{k}\right\} $
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: 
\begin_inset Quotes eld
\end_inset

verdadero
\begin_inset Quotes erd
\end_inset

 si 
\begin_inset Formula $\left\{ R_{1},\ldots,R_{n}\right\} $
\end_inset

 descompone SPI.
\end_layout

\begin_layout Enumerate
Armar una matriz 
\begin_inset Formula $T^{(0)}$
\end_inset

 con las relaciones 
\begin_inset Formula $R_{i}$
\end_inset

 en las filas (
\begin_inset Formula $i=1,\ldots,k$
\end_inset

) y los atributos 
\begin_inset Formula $A_{j}$
\end_inset

 en las columnas.
 Cada elemento de la matriz tendrá valor:
\end_layout

\begin_deeper
\begin_layout Plain Layout
\begin_inset Formula 
\[
m_{ij}=\begin{cases}
a_{j} & \text{ si }A_{j}\in R_{i}\text{ (variable distinguida)}\\
b_{ij} & \text{ si }A_{j}\not\in R_{i}\text{ (variable ligada)}
\end{cases}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
\begin_inset Formula $i=1$
\end_inset


\end_layout

\begin_layout Enumerate
Obtener 
\begin_inset Formula $T^{(i)}$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
Para cada dependencia funcional 
\begin_inset Formula $X\to Y\in F$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
Si 
\begin_inset Formula $\exists$
\end_inset

 tuplas 
\begin_inset Formula $t_{1},t_{2}$
\end_inset

 tal que 
\begin_inset Formula $t_{1}[X]=t_{2}[x]$
\end_inset

, realizar un cambio de variable en 
\begin_inset Formula $t_{1}[Y]$
\end_inset

 y en 
\begin_inset Formula $t_{2}[Y]$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Variables ligadas por distinguidas
\end_layout

\begin_layout Itemize
Si hay dos ligadas, poner la de menor subíndice
\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Enumerate
Si hay una fila sólo con variables distinguidas, devolver 
\begin_inset Quotes eld
\end_inset

verdadero
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Enumerate
Si 
\begin_inset Formula $T^{(i)}=T^{(i-1)}$
\end_inset

 y además no hay una fila sólo con variables distinguidas, devolver 
\begin_inset Quotes eld
\end_inset

falso
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Enumerate
Si no, 
\begin_inset Formula $i\leftarrow i+1$
\end_inset

 y volver a 3.
\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Algoritmo Chase Tableau
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard

\emph on
Ejemplo: sea el esquema de relación 
\begin_inset Formula $R(A,B,C,D)$
\end_inset

 con 
\begin_inset Formula $F=\{A\to B,B\to C,CD\to A\}$
\end_inset

.
 Sea la descomposición 
\begin_inset Formula $R_{1}=(A,D)$
\end_inset

, 
\begin_inset Formula $R_{2}=(A,C)$
\end_inset

, 
\begin_inset Formula $R_{3}=(B,C,D)$
\end_inset

.
 ¿La descomposición es SPI?
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $A$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $B$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $C$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $D$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{1}(A,D)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\begin_inset Formula $a_{1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\begin_inset Formula $b_{12}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{13}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{4}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{2}(A,C)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{22}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{24}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{3}(B,C,D)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{31}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{2}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\begin_inset Formula $a_{4}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
Aplicamos 
\begin_inset Formula $A\to B$
\end_inset

.
 Como 
\begin_inset Formula $a_{1}$
\end_inset

 es igual en las primeras dos filas, pero 
\begin_inset Formula $b_{12}$
\end_inset

 y 
\begin_inset Formula $b_{22}$
\end_inset

 no, cambiamos 
\begin_inset Formula $b_{22}$
\end_inset

 por 
\begin_inset Formula $b_{12}$
\end_inset

 en la segunda fila.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $A$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $B$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $C$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $D$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{1}(A,D)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{12}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{13}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{4}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{2}(A,C)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\mathbf{b_{12}}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{24}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{3}(B,C,D)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{31}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{2}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\begin_inset Formula $a_{4}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
Aplicamos 
\begin_inset Formula $B\to C.$
\end_inset

 Las filas 1 y 2 coinciden en 
\begin_inset Formula $b_{12}$
\end_inset

 pero no en 
\begin_inset Formula $c$
\end_inset

.
 Entonces, cambiamos 
\begin_inset Formula $b_{13}$
\end_inset

 por 
\begin_inset Formula $a_{3}$
\end_inset

 en la fila 1.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $A$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $B$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $C$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $D$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{1}(A,D)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{12}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\mathbf{a_{3}}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{4}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{2}(A,C)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{12}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{24}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{3}(B,C,D)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{31}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{2}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\begin_inset Formula $a_{4}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
Aplicamos 
\begin_inset Formula $CD\to A$
\end_inset

.
 Las filas 1 y 3 tienen mismo valor para 
\begin_inset Formula $c$
\end_inset

 y 
\begin_inset Formula $d$
\end_inset

, pero distinto valor para 
\begin_inset Formula $a$
\end_inset

.
 Por lo tanto, cambiamos 
\begin_inset Formula $b_{31}$
\end_inset

 por 
\begin_inset Formula $a_{1}$
\end_inset

 en la tercera fila.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $A$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $B$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $C$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $D$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{1}(A,D)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{12}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{4}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{2}(A,C)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{12}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $b_{24}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $R_{3}(B,C,D)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\mathbf{a_{1}}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{2}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $a_{3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\begin_inset Formula $a_{4}$
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
En este punto notamos que la fila 3 tiene valores de la forma 
\begin_inset Formula $a_{j}$
\end_inset

.
 Como son todas variables distinguidas, la descomposición es sin pérdida
 de información.
\end_layout

\begin_layout Subsection
Segunda forma normal (2FN)
\end_layout

\begin_layout Description
Atributo
\begin_inset space ~
\end_inset

primo atributo de 
\begin_inset Formula $R$
\end_inset

 que pertenece a una clave candidata.
\end_layout

\begin_layout Standard
Sea 
\begin_inset Formula $R$
\end_inset

 una relación y 
\begin_inset Formula $F$
\end_inset

 el conjunto de sus dependencias funcionales.
 
\begin_inset Formula $R$
\end_inset

 estará en 2FN si para toda dependencia funcional 
\begin_inset Formula $X\to Y$
\end_inset

 que está en en 
\begin_inset Formula $F^{+}$
\end_inset

, se cumple al menos una de las siguientes condiciones:
\end_layout

\begin_layout Enumerate
\begin_inset Formula $X\to Y$
\end_inset

 es trivial
\end_layout

\begin_layout Enumerate
\begin_inset Formula $Y$
\end_inset

 es un atributo primo,
\end_layout

\begin_layout Enumerate
\begin_inset Formula $X$
\end_inset

 no es un subconjunto de una clave candidata
\end_layout

\begin_layout Standard

\series bold
\emph on
Ejemplo
\series default
\emph default
: la siguiente relación no está en 2FN porque 
\emph on
Dirección de local
\emph default
 depende sólo de 
\emph on
ID de local
\emph default
, que no es una clave.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
ID de cliente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
ID de local
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dirección de local
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Los Angeles
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
San Francisco
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Los Angeles
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $F=\{Id\, cliente,Id\, local\to Direccion\, local;Id\, local\to Direccion\, local\}$
\end_inset

.
 
\emph on
La segunda dependencia funcional no es trivial, el lado derecho no pertenece
 a una clave candidata, y el lado izquierdo es un subconjunto de la clave
 candidata.
\end_layout

\begin_layout Standard

\emph on
Para normalizarla, hay que dividirla en dos relaciones.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
ID de cliente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
ID de local
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="2">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
ID de local
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dirección de local
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Los Angeles
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
San Francisco
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection
Forma Normal Boyce-Codd (FNBC)
\end_layout

\begin_layout Standard
Un esquema de relación 
\begin_inset Formula $R$
\end_inset

 está en FNBC con respecto a un conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset

 si, para todas las dependencias funcionales en 
\begin_inset Formula $F^{+}$
\end_inset

 de la forma 
\begin_inset Formula $\alpha\to\beta$
\end_inset

, donde 
\begin_inset Formula $\alpha\subseteq R$
\end_inset

 y 
\begin_inset Formula $\beta\subseteq R$
\end_inset

, se cumple alguna de las siguientes:
\end_layout

\begin_layout Itemize
\begin_inset Formula $\alpha\to\beta$
\end_inset

 es trivial (es decir, 
\begin_inset Formula $\beta\subseteq\alpha$
\end_inset

)
\end_layout

\begin_layout Itemize
\begin_inset Formula $\alpha$
\end_inset

 es una superclave para 
\begin_inset Formula $R$
\end_inset

 
\end_layout

\begin_layout Standard
Propiedades:
\end_layout

\begin_layout Itemize
Cualquier relación de dos atributos está en FNBC
\end_layout

\begin_layout Itemize
Brinda eliminación de anomalías
\end_layout

\begin_layout Itemize
Brinda una descomposición SPI
\end_layout

\begin_layout Itemize
No garantiza que se preserven las dependencias funcionales
\end_layout

\begin_layout Standard
Para verificar si una dependencia funcional 
\begin_inset Formula $\alpha\to\beta$
\end_inset

 viola FNBC, alcanza con computar 
\begin_inset Formula $\alpha^{+}$
\end_inset

 y ver si es 
\begin_inset Formula $R$
\end_inset

.
\end_layout

\begin_layout Standard
Para verificar si una relación 
\begin_inset Formula $R$
\end_inset

 está en FNBC, alcanza con ver si las dependencias de 
\begin_inset Formula $F$
\end_inset

 no violan FNBC.
\end_layout

\begin_layout Standard
Para verificar si una descomposición 
\begin_inset Formula $R_{i}$
\end_inset

 está en FNBC, para cada subconjunto 
\begin_inset Formula $\alpha$
\end_inset

 de atributos de 
\begin_inset Formula $R_{i}$
\end_inset

, verificar que 
\begin_inset Formula $\alpha_{F}^{+}$
\end_inset

 o no incluya atributos de 
\begin_inset Formula $R_{i}-\alpha$
\end_inset

, o incluya todos los atributos de 
\begin_inset Formula $R_{i}$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: una relación 
\begin_inset Formula $R$
\end_inset

, un conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: una descomposición 
\begin_inset Formula $\rho=\left\{ R_{1},\ldots,R_{n}\right\} $
\end_inset

 tal que 
\begin_inset Formula $R_{i}$
\end_inset

 está en FNBC con respecto a 
\begin_inset Formula $F_{i}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $\rho=R$
\end_inset


\end_layout

\begin_layout Enumerate
Repetir hasta que no haya esquemas en 
\begin_inset Formula $\rho$
\end_inset

 que violen FNBC
\end_layout

\begin_deeper
\begin_layout Enumerate
Elegir una dependencia funcional 
\begin_inset Formula $X\to Y$
\end_inset

 que viole FNBC sobre 
\begin_inset Formula $\rho_{i}$
\end_inset


\end_layout

\begin_layout Enumerate
Descomponer 
\begin_inset Formula $\rho_{i}$
\end_inset

 en dos relaciones:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $R_{1}(XY)$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $R_{2}(X(R-XY))$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
En 
\begin_inset Formula $\rho$
\end_inset

, reemplazar 
\begin_inset Formula $\rho_{i}$
\end_inset

 por 
\begin_inset Formula $R_{1}$
\end_inset

 y 
\begin_inset Formula $R_{2}$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Devolver 
\begin_inset Formula $\rho$
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Descomposición FNBC
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Tercera forma normal (3FN)
\end_layout

\begin_layout Quote

\emph on
A statement of Codd's definition of 3NF, paralleling the traditional pledge
 to give true evidence in a court of law, was given by Bill Kent: "[Every]
 non-key [attribute] must provide a fact about the key, the whole key, and
 nothing but the key." A common variation supplements this definition with
 the oath: "so help me Codd".
\end_layout

\begin_layout Quote

\emph on
Requiring existence of "the key" ensures that the table is in 1NF; requiring
 that non-key attributes be dependent on "the whole key" ensures 2NF; further
 requiring that non-key attributes be dependent on "nothing but the key"
 ensures 3NF.
\end_layout

\begin_layout Standard
Un esquema de relación 
\begin_inset Formula $R$
\end_inset

 está en 3FN con respecto a un conjunto de dependencias funcionales 
\begin_inset Formula $F$
\end_inset

 si, para todas las dependencias funcionales en 
\begin_inset Formula $F^{+}$
\end_inset

 de la forma 
\begin_inset Formula $\alpha\to\beta$
\end_inset

, donde 
\begin_inset Formula $\alpha\subseteq R$
\end_inset

 y 
\begin_inset Formula $\beta\subseteq R$
\end_inset

, se cumple alguna de las siguientes:
\end_layout

\begin_layout Itemize
\begin_inset Formula $\alpha\to\beta$
\end_inset

 es trivial (es decir, 
\begin_inset Formula $\beta\subseteq\alpha$
\end_inset

)
\end_layout

\begin_layout Itemize
\begin_inset Formula $\alpha$
\end_inset

 es una superclave para 
\begin_inset Formula $R$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $\beta$
\end_inset

 es un atributo primo
\end_layout

\begin_layout Standard
Dicho de otra forma, 
\begin_inset Formula $R$
\end_inset

 no debe tener dependencias funcionales transitivas: todos los atributos
 que no son clave deben depender funcionalmente de la clave primaria.
\end_layout

\begin_layout Standard
Propiedades:
\end_layout

\begin_layout Itemize
No tiene pérdida de información
\end_layout

\begin_layout Itemize
No hay pérdida de dependencias
\end_layout

\begin_layout Itemize
No garantiza la eliminación de anomalías (es decir, tiene redundancia)
\end_layout

\begin_layout Itemize
Es menos estricta que FNBC (FNBC 
\begin_inset Formula $\implies$
\end_inset

3FN)
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: una relación 
\begin_inset Formula $R$
\end_inset

, un cubrimiento minimal 
\begin_inset Formula $F_{min}$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: una descomposición 
\begin_inset Formula $\rho=\left\{ R_{1},\ldots,R_{n}\right\} $
\end_inset

 tal que 
\begin_inset Formula $R_{i}$
\end_inset

 está en 3FN con respecto a 
\begin_inset Formula $F_{i}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $\rho=\{\}$
\end_inset


\end_layout

\begin_layout Enumerate
Para cada dependencia funcional 
\begin_inset Formula $X\to Y\in F_{min}$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Plain Layout
\begin_inset Formula $\rho=\rho\cup R_{i}\left(XY\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Si existen 
\begin_inset Formula $R_{i},R_{j}\in\rho$
\end_inset

 tal que 
\begin_inset Formula $R_{i}\subseteq R_{j}$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Plain Layout
\begin_inset Formula $\rho=\rho-R_{i}$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Si ninguna relación es una superclave de 
\begin_inset Formula $R$
\end_inset

, y 
\begin_inset Formula $K$
\end_inset

 es una clave para 
\begin_inset Formula $R$
\end_inset


\end_layout

\begin_deeper
\begin_layout Plain Layout
\begin_inset Formula $\rho=\rho\cup K$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Devolver 
\begin_inset Formula $\rho$
\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Descomposición 3FN
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard

\series bold
\emph on
Ejemplo
\series default
\emph default
: la siguiente relación no está en 3FN porque 
\emph on
Fecha de nacimiento del ganador
\emph default
 depende sólo de 
\emph on
Ganador
\emph default
, que depende de la clave candidata 
\emph on
{Torneo, Año}
\emph default
.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Torneo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Año
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ganador
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Fecha de nacimiento de ganador
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Indiana Invitational 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1998
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Al Fredrickson 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
21 Julio 1975
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cleveland Open 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Bob Albertson 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
28 Septiembre 1968
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Des Moines Masters 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Al Fredrickson 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
21 Julio 1975
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Indiana Invitational 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Chip Masterson 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
14 Marzo 1977
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $F=\{Torneo,Año\to Ganador,Ganador\to Fecha\, nacimiento\, ganador\}$
\end_inset

.
 La segunda dependencia funcional no es trivial, el lado derecho no pertenece
 a una clave candidata (no es atributo primo), y el lado izquierdo no es
 una superclave.
\end_layout

\begin_layout Standard
Para normalizarla, hay que dividirla en dos relaciones.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Torneo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Año
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ganador
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Indiana Invitational 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1998
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Al Fredrickson 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cleveland Open 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Bob Albertson 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Des Moines Masters 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Al Fredrickson 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Indiana Invitational 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Chip Masterson 
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Ganador
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Fecha de nacimiento
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Chip Masterson 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
14 Marzo 1977
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Al Fredrickson 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
21 Julio 1975
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Bob Albertson 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
28 Septiembre 1968
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection
Dependencias multivaluadas
\end_layout

\begin_layout Standard
Una dependencia multivaluada expresa que dos conjuntos de atributos en un
 esquema son mutuamente independientes.
\end_layout

\begin_layout Standard
Sean los conjuntos de atributos 
\emph on
disjuntos
\emph default
 
\begin_inset Formula $A$
\end_inset

 y 
\begin_inset Formula $B$
\end_inset

 de la relación 
\begin_inset Formula $R(A,B,U-A-B)$
\end_inset

.
 Sean las tuplas 
\begin_inset Formula $t_{1}$
\end_inset

 y 
\begin_inset Formula $t_{2}$
\end_inset

.
 La dependencia multivaluada 
\begin_inset Formula $A\twoheadrightarrow B$
\end_inset

 indica que si 
\begin_inset Formula $t_{1}[A]=t_{2}[A]$
\end_inset

, entonces podemos encontrar tuplas 
\begin_inset Formula $t_{3}$
\end_inset

 y 
\begin_inset Formula $t_{4}$
\end_inset

 tales que:
\end_layout

\begin_layout Itemize
\begin_inset Formula $t_{1}[A]=t_{2}[A]=t_{3}[A]=t_{4}[A]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $t_{3}[B]=t_{1}[B]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $t_{3}[U-A-B]=t_{2}[U-A-B]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $t_{4}[B]=t_{2}[B]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $t_{4}[U-A-B]=t_{1}[U-A-B]$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/multivalued_dependency.PNG
	scale 80

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Dependencia multivaluada 
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard

\series bold
\emph on
Ejemplo
\series default
: sea 
\begin_inset Formula $R(curso,libro,profesor)$
\end_inset

 una relación que indica una lista de cursos universitarios, los libros
 que se usan en el curso, y los profesores que la dictan.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Curso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Libro
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Profesor
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Álgebra II
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
David Lay - Algebra Lineal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Acero
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Álgebra II
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Strang - Algebra Lineal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Acero
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Álgebra II
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
David Lay - Algebra Lineal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Piortrowsky
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Algebra II
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Strang - Algebra Lineal
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Piortrowsky
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\emph on
Dado que los profesores de un curso y los libros de un curso son independientes
 entre sí, esta relación tiene una DMV.
 Si tuviésemos que agregar un nuevo libro al curso 
\begin_inset Quotes eld
\end_inset

Álgebra II
\begin_inset Quotes erd
\end_inset

, deberíamos agregar una tupla para cada profesor del curso.
 Es decir, formalmente, hay dos DMV en esta relación: 
\begin_inset Formula $\{curso\}\twoheadrightarrow\{libro\}$
\end_inset

 y 
\begin_inset Formula $\{curso\}\twoheadrightarrow\{profesor\}$
\end_inset

.
 Esta relación exhibe redundancia.
\end_layout

\begin_layout Description
Dependencia
\begin_inset space ~
\end_inset

multivaluada no existen en el esquema original pero son satisfechas por
 la descomposición del mismo.
\end_layout

\begin_layout Subsubsection
Propiedades de las DMVs
\end_layout

\begin_layout Itemize
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset

 es 
\series bold
trivial
\series default
 si 
\begin_inset Formula $\beta\subseteq\alpha$
\end_inset

 ó si 
\begin_inset Formula $R=\alpha\beta$
\end_inset

.
\end_layout

\begin_layout Itemize
Una dependencia multivaluada garantiza que ciertas tuplas existan.
\end_layout

\begin_layout Itemize

\series bold
Regla de transitividad
\series default
 
\series bold
multivaluada
\series default
: Si 
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset

 y 
\begin_inset Formula $\beta\twoheadrightarrow c$
\end_inset

, entonces 
\begin_inset Formula $\alpha\twoheadrightarrow c-\beta$
\end_inset


\end_layout

\begin_layout Itemize

\series bold
Regla de replicación
\series default
: si 
\begin_inset Formula $\alpha\to\beta$
\end_inset

, entonces 
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset

.
 La inversa 
\series bold
no
\series default
 es cierta.
\end_layout

\begin_layout Itemize

\series bold
Regla de interacción
\series default

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Esta regla puede agregar dependencias funcionales a 
\begin_inset Formula $M$
\end_inset


\end_layout

\end_inset

: si 
\begin_inset Formula $\begin{cases}
\alpha\twoheadrightarrow\beta\\
\gamma\to Z
\end{cases}$
\end_inset

 y existe un 
\begin_inset Formula $\gamma$
\end_inset

 tal que 
\begin_inset Formula $\begin{cases}
Z\subseteq\beta\\
\gamma\cap\beta=\emptyset
\end{cases}$
\end_inset

, entonces 
\begin_inset Formula $\alpha\to Z$
\end_inset


\end_layout

\begin_layout Itemize

\series bold
Regla de aumentación
\series default
: si 
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset

 entonces 
\begin_inset Formula $\alpha w\twoheadrightarrow\beta$
\end_inset

.
\end_layout

\begin_layout Itemize

\series bold
Regla del complemento
\series default
: si 
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset

, entonces 
\begin_inset Formula $\alpha\twoheadrightarrow R-\alpha\beta$
\end_inset


\end_layout

\begin_layout Itemize

\series bold
Regla de unión
\series default
: si 
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset

, y 
\begin_inset Formula $\alpha\twoheadrightarrow c$
\end_inset

, entonces 
\begin_inset Formula $\alpha\twoheadrightarrow\beta c$
\end_inset


\end_layout

\begin_layout Itemize

\series bold
Regla de descomposición
\series default
: si 
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset

, y 
\begin_inset Formula $\alpha\twoheadrightarrow c$
\end_inset

, entonces 
\begin_inset Formula $\begin{cases}
\alpha\twoheadrightarrow\beta-c\\
\alpha\twoheadrightarrow c-\beta\\
\alpha\twoheadrightarrow\beta\cap c
\end{cases}$
\end_inset


\end_layout

\begin_layout Itemize

\series bold
Regla de pseudotransitividad:
\series default
 si 
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset

 y 
\begin_inset Formula $\beta c\twoheadrightarrow\gamma$
\end_inset

, entonces 
\begin_inset Formula $\alpha c\twoheadrightarrow\gamma-\beta c$
\end_inset


\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $R=\left\{ A_{1},\ldots,A_{n},B_{1},\ldots,B_{m}\right\} $
\end_inset

, entonces 
\begin_inset Formula $\left\{ A_{1},\ldots,A_{n}\right\} \twoheadrightarrow\left\{ B_{1},\ldots,B_{m}\right\} $
\end_inset


\end_layout

\begin_layout Standard

\series bold
Teorema
\series default
: las únicas DMVs implicadas por un conjunto de DFs son de la forma 
\begin_inset Formula $X\twoheadrightarrow Y$
\end_inset

, donde 
\begin_inset Formula $Y\subseteq X^{+}$
\end_inset

 o 
\begin_inset Formula $R-XY\subseteq X^{+}$
\end_inset

.
\end_layout

\begin_layout Standard

\series bold
Teorema
\series default
: las únicas DFs implicadas por un conjunto de DMVs son las triviales.
\end_layout

\begin_layout Standard

\series bold
Teorema
\series default
: un conjunto de DFs de tipo 
\begin_inset Formula $x_{i}\to y_{i}$
\end_inset

 sólo implica DMVs de tipo 
\begin_inset Formula $x_{i}\twoheadrightarrow y_{i}$
\end_inset

.
\end_layout

\begin_layout Standard

\series bold
Teorema
\series default
: sea 
\begin_inset Formula $r$
\end_inset

 una instancia del esquema de relación 
\begin_inset Formula $R$
\end_inset

, 
\begin_inset Formula $X,Y$
\end_inset

 subconjuntos de 
\begin_inset Formula $R$
\end_inset

, y 
\begin_inset Formula $Z=R-XY$
\end_inset

.
 La relación 
\begin_inset Formula $r$
\end_inset

 satisface la DMV 
\begin_inset Formula $X\twoheadrightarrow Y$
\end_inset

 sí y solo sí 
\begin_inset Formula $R_{1}=XY$
\end_inset

 y 
\begin_inset Formula $R_{2}=X\cup Z$
\end_inset

 descomponen sin pérdida de información a 
\begin_inset Formula $r$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: relación 
\begin_inset Formula $r(R)$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: 
\begin_inset Quotes eld
\end_inset

verdadero
\begin_inset Quotes erd
\end_inset

 si la dependencia multivaluada 
\begin_inset Formula $X\twoheadrightarrow Y$
\end_inset

 se satisface
\end_layout

\begin_layout Enumerate
Proyectar 
\begin_inset Formula $r$
\end_inset

 en 
\begin_inset Formula $R_{1}(XY)$
\end_inset

 y 
\begin_inset Formula $R_{2}(X,R-XY)$
\end_inset


\end_layout

\begin_layout Enumerate
Calcular 
\begin_inset Formula $R_{1}\bowtie R_{2}$
\end_inset


\end_layout

\begin_layout Enumerate
Si 
\begin_inset Formula $r=R_{1}\bowtie R_{2}$
\end_inset

 devolver 
\begin_inset Quotes eld
\end_inset

verdadero
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Verificar si 
\begin_inset Formula $r$
\end_inset

 satisface la dependencia multivaluada 
\begin_inset Formula $X\twoheadrightarrow Y$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: conjunto de dependencias funcionales y multivaluadas 
\begin_inset Formula $D^{+}$
\end_inset

, descomposición 
\begin_inset Formula $\left\{ R_{1},\ldots,R_{n}\right\} $
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: conjunto de dependencia funcionales y multivaluadas 
\begin_inset Formula $D_{i}$
\end_inset

 que se satisfacen en 
\begin_inset Formula $R_{i}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $Z=\{\}$
\end_inset


\end_layout

\begin_layout Enumerate
Agregar a 
\begin_inset Formula $Z$
\end_inset

 las dependencias funcionales de 
\begin_inset Formula $D^{+}$
\end_inset

 que solo incluyan atributos de 
\begin_inset Formula $R_{i}$
\end_inset


\end_layout

\begin_layout Enumerate
Agregar a 
\begin_inset Formula $Z$
\end_inset

 las dependencias multivaluadas de la forma 
\begin_inset Formula $A\to B\cap R_{i}$
\end_inset

, donde 
\begin_inset Formula $A\twoheadrightarrow B$
\end_inset

 esté en 
\begin_inset Formula $D^{+}$
\end_inset

 y 
\begin_inset Formula $A\subseteq R_{i}$
\end_inset


\end_layout

\begin_layout Enumerate
Devolver 
\begin_inset Formula $Z$
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Proyección de dependencias funcionales y multivaluadas
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Preservación de dependencias multivaluadas
\end_layout

\begin_layout Standard
Una descomposición de 
\begin_inset Formula $R$
\end_inset

 en los esquemas 
\begin_inset Formula $R_{1},\ldots,R_{n}$
\end_inset

 es una descomposición que 
\series bold
preserva las dependencias
\series default
 con respecto a un conjunto 
\begin_inset Formula $D$
\end_inset

 de dependencias funcionales y multivaluadas si, para cada relación 
\begin_inset Formula $r_{1}(R_{1}),\ldots,r_{n}(R_{n})$
\end_inset

 tal que para cada 
\begin_inset Formula $i$
\end_inset

, 
\begin_inset Formula $r_{i}$
\end_inset

 satisface 
\begin_inset Formula $D_{i}$
\end_inset

, entonces existe una relación 
\begin_inset Formula $r(R)$
\end_inset

 que satisface 
\begin_inset Formula $D$
\end_inset

 y para el cual 
\begin_inset Formula $r_{i}=\pi_{R_{i}}(r)$
\end_inset

 para todo 
\begin_inset Formula $i$
\end_inset

.
\end_layout

\begin_layout Subsection
Base minimal de Dependencias e Implicación de DMVs
\end_layout

\begin_layout Standard

\series bold
Base
\begin_inset space ~
\end_inset

minimal
\series default
 sea la colección de conjuntos 
\begin_inset Formula $S=\left\{ S_{1},\ldots,S_{p}\right\} $
\end_inset

 donde 
\begin_inset Formula $U=S_{1}\cup\ldots\cup S_{p}$
\end_inset

.
 La base minimal de 
\begin_inset Formula $S$
\end_inset

 es 
\begin_inset Formula $Base(S)$
\end_inset

 y es una partición de 
\begin_inset Formula $U$
\end_inset

 
\begin_inset Formula $\left\{ T_{1},\ldots,T_{q}\right\} $
\end_inset

 tal que:
\end_layout

\begin_layout Enumerate
Cada 
\begin_inset Formula $S_{i}$
\end_inset

 es la unión de algunos de los 
\begin_inset Formula $T_{j}$
\end_inset

.
\end_layout

\begin_layout Enumerate
No existe una partición de 
\begin_inset Formula $U$
\end_inset

 con menos elementos que cumpla la primera propiedad.
\end_layout

\begin_layout Standard

\emph on
Ejemplo: sea 
\begin_inset Formula $S=\left\{ ABCD,CDE,AE\right\} $
\end_inset

 y 
\begin_inset Formula $U=ABCDE$
\end_inset

.
 Entonces la base de 
\begin_inset Formula $S$
\end_inset

 es 
\begin_inset Formula $Base(S)=\left\{ A,B,CD,E\right\} $
\end_inset

.
\end_layout

\begin_layout Standard

\series bold
Base de dependencias
\series default
: sea 
\begin_inset Formula $M$
\end_inset

 un conjunto de dependencias multivaluadas sobre 
\begin_inset Formula $R$
\end_inset

, y sea 
\begin_inset Formula $X\subseteq R$
\end_inset

.
 Sea 
\begin_inset Formula $G=\left\{ Y/M\models X\twoheadrightarrow Y\right\} $
\end_inset

La base de dependencias de 
\begin_inset Formula $X$
\end_inset

 con respecto a 
\begin_inset Formula $M$
\end_inset

 es:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Bdep(X)=Base\left(G\right)
\]

\end_inset


\end_layout

\begin_layout Standard

\emph on
Ejemplo: sea 
\begin_inset Formula $M=\left\{ A\twoheadrightarrow BC,DE\twoheadrightarrow C\right\} $
\end_inset

 un conjunto de dependencias multivaluadas sobre 
\begin_inset Formula $R(ABCDE)$
\end_inset

.
 Entonces 
\begin_inset Formula $G=\left\{ A,BC,DE,C,BDE,B,BCDE,CDE\right\} $
\end_inset

y la base de 
\begin_inset Formula $A$
\end_inset

 es 
\begin_inset Formula 
\[
Base(A)=\left\{ A,B,C,DE\right\} 
\]

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: conjunto de dependencias multivaluadas 
\begin_inset Formula $M$
\end_inset

, conjunto de atributos 
\begin_inset Formula $X$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: 
\begin_inset Formula $Bdep(X)$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $T=R-X$
\end_inset


\end_layout

\begin_layout Enumerate
Mientras 
\begin_inset Formula $T$
\end_inset

 varíe:
\end_layout

\begin_deeper
\begin_layout Itemize
Si 
\begin_inset Formula $\exists V\in T$
\end_inset

 y 
\begin_inset Formula $Y\twoheadrightarrow Z\in M$
\end_inset

 tal que (
\begin_inset Formula $V\cap Y=\emptyset)$
\end_inset

 y (
\begin_inset Formula $V\cap Z\neq\emptyset$
\end_inset

)
\end_layout

\begin_deeper
\begin_layout Plain Layout
Reemplazar 
\begin_inset Formula $V$
\end_inset

 por 
\begin_inset Formula $\{V\cap Z\}$
\end_inset

 y 
\begin_inset Formula $\{V-Z\}$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Enumerate
\begin_inset Formula $Bdep(X)=T\cup\left\{ A/A\in X\right\} $
\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Cálculo de la base de dependencias de 
\begin_inset Formula $X$
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard

\series bold
Implicación de dependencias
\series default
: dado un conjunto 
\begin_inset Formula $M$
\end_inset

 de dependencias multivaluadas, una dependencia multivaluada 
\begin_inset Formula $X\twoheadrightarrow Y$
\end_inset

 pertenece a 
\begin_inset Formula $M^{+}$
\end_inset

 sí y solo sí 
\begin_inset Formula $Y$
\end_inset

 se puede expresar como la unión de algunos componentes de 
\begin_inset Formula $Bdep(X)$
\end_inset

.
\end_layout

\begin_layout Standard

\emph on
Ejemplo: sea 
\begin_inset Formula $R(A,B,C,D,E,I)$
\end_inset

, 
\begin_inset Formula $M=\left\{ A\twoheadrightarrow EI,C\twoheadrightarrow AB\right\} $
\end_inset

.
 ¿Se cumple 
\emph default

\begin_inset Formula $AC\twoheadrightarrow BI$
\end_inset

 
\emph on
?
\end_layout

\begin_layout Standard

\emph on
La base de dependencias de 
\begin_inset Formula $AC$
\end_inset

 es:
\end_layout

\begin_layout Enumerate
\begin_inset Formula $T^{(0)}=BDEI$
\end_inset


\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Formula $V=BDEI$
\end_inset

.
 Entonces 
\begin_inset Formula $A\twoheadrightarrow EI$
\end_inset

, 
\begin_inset Formula $Y=A$
\end_inset

, 
\begin_inset Formula $Z=EI$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $V\cap Z=EI$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $V-Z=BD$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
\begin_inset Formula $T^{(1)}=\{EI,BD\}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Enumerate
Si 
\begin_inset Formula $V=EI$
\end_inset

, 
\begin_inset Formula $Y=A$
\end_inset

, 
\begin_inset Formula $Z=EI$
\end_inset

, 
\begin_inset Formula $V\cap Z=EI$
\end_inset

, 
\begin_inset Formula $V-Z=\{\}$
\end_inset

 y no nos aporta nada.
\end_layout

\begin_layout Enumerate
\begin_inset Formula $V=BD$
\end_inset

.
 Entonces 
\begin_inset Formula $C\twoheadrightarrow AB$
\end_inset

, 
\begin_inset Formula $Y=C$
\end_inset

, 
\begin_inset Formula $Z=AB$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $V\cap Z=B$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $V-Z=D$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
\begin_inset Formula $T^{(2)}=\{EI,B,D\}$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $Bdep(AC)=\{EI,B,D,A,C\}$
\end_inset

 y entonces 
\begin_inset Formula $AC\twoheadrightarrow BI$
\end_inset

 no se cumple porque
\begin_inset Formula $BI$
\end_inset

 no se puede expresar como la unión de componentes de 
\begin_inset Formula $Bdep(AC)$
\end_inset

.
\end_layout

\begin_layout Subsection
Cuarta forma normal (4FN)
\end_layout

\begin_layout Standard
Un esquema de relación 
\begin_inset Formula $R$
\end_inset

 está en 4FN con respecto a un conjunto de dependencias funcionales y multivalua
das 
\begin_inset Formula $M$
\end_inset

 si, para todas las dependencias multivaluadas en 
\begin_inset Formula $M^{+}$
\end_inset

 de la forma 
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset

, donde 
\begin_inset Formula $\alpha\subseteq R$
\end_inset

 y 
\begin_inset Formula $\beta\subseteq R$
\end_inset

, se cumple alguna de las siguientes:
\end_layout

\begin_layout Itemize
\begin_inset Formula $\alpha\twoheadrightarrow\beta$
\end_inset

 es trivial
\end_layout

\begin_layout Itemize
\begin_inset Formula $\alpha$
\end_inset

 es una superclave para 
\begin_inset Formula $R$
\end_inset

 
\end_layout

\begin_layout Standard
Propiedades:
\end_layout

\begin_layout Itemize
No tiene pérdida de información
\end_layout

\begin_layout Itemize
Una descomposición 4FN no garantiza la preservación de dependencias
\end_layout

\begin_layout Standard

\series bold
\emph on
Ejemplo
\series default
\emph default
: la siguiente relación no está en 4FN.
 La clave es 
\begin_inset Formula $\left\{ N\text{°\,}Vuelo,Dia\, de\, la\, semana,Tipo\, de\, avión\right\} $
\end_inset

.
 
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
N° Vuelo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Dia de la semana
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Tipo de avión
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
106
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lunes
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
B737
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
106
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Martes 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
B737
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
106
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lunes
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
A380
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
106
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Martes
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
A380
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $F=\left\{ N\text{°\,}Vuelo\twoheadrightarrow Dia\, de\, la\, semana,N\text{° }Vuelo\twoheadrightarrow Tipo\, de\, avión\right\} $
\end_inset

.
 La primera dependencia multivaluada no es trivial, y el lado izquierdo
 no es una superclave de 
\begin_inset Formula $R$
\end_inset

.
\end_layout

\begin_layout Standard
Para normalizarla, hay que dividirla en dos relaciones.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="2">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
N° Vuelo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Dia de la semana
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
106
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lunes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
106
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Martes 
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="2">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
N° Vuelo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\bar under
Tipo de avión
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
106
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
B737
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
106
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
A380
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsubsection
Descomposición SPI en 2 relaciones
\end_layout

\begin_layout Standard
Sea el esquema relacional 
\begin_inset Formula $R$
\end_inset

, y sea 
\begin_inset Formula $M$
\end_inset

 el conjunto de dependencias funcionales y multivaluadas sobre 
\begin_inset Formula $R$
\end_inset

.
 Sean 
\begin_inset Formula $R_{1}$
\end_inset

 y 
\begin_inset Formula $R_{2}$
\end_inset

 una descomposición de 
\begin_inset Formula $R$
\end_inset

.
 Esta descomposición es 
\emph on
sin pérdida de información
\emph default
 (SPI) si al menos una de las siguientes dependencias multivaluadas está
 en 
\begin_inset Formula $M^{+}$
\end_inset

:
\end_layout

\begin_layout Enumerate
\begin_inset Formula $R_{1}\cap R_{2}\twoheadrightarrow R_{1}-R_{2}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $R_{1}\cap R_{2}\twoheadrightarrow R_{2}-R_{1}$
\end_inset


\end_layout

\begin_layout Subsubsection
Descomposición SPI en más de 2 relaciones
\end_layout

\begin_layout Standard
El algoritmo es idéntico al de descomposición en BCFN, excepto que se usan
 dependencias multivaluadas y se restringe 
\begin_inset Formula $R_{i}$
\end_inset

 al conjunto 
\begin_inset Formula $M^{+}$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: una relación 
\begin_inset Formula $R$
\end_inset

, un conjunto de dependencias multivaluadas 
\begin_inset Formula $M^{+}$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: una descomposición 
\begin_inset Formula $\rho=\left\{ R_{1},\ldots,R_{n}\right\} $
\end_inset

 tal que 
\begin_inset Formula $R_{i}$
\end_inset

 está en 4FN con respecto a 
\begin_inset Formula $M_{i}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $\rho=R$
\end_inset


\end_layout

\begin_layout Enumerate
Repetir hasta que no haya esquemas en 
\begin_inset Formula $\rho$
\end_inset

 que violen 4FN
\end_layout

\begin_deeper
\begin_layout Enumerate
Elegir una dependencia multivaluada 
\begin_inset Formula $X\twoheadrightarrow Y$
\end_inset

 que viole 4FN sobre 
\begin_inset Formula $\rho_{i}$
\end_inset


\end_layout

\begin_layout Enumerate
Descomponer 
\begin_inset Formula $\rho_{i}$
\end_inset

 en 2 relaciones:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $R_{1}\left(XY\right)$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $R_{2}\left(X(R-XY)\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
En 
\begin_inset Formula $\rho$
\end_inset

, reemplazar 
\begin_inset Formula $\rho_{i}$
\end_inset

 por 
\begin_inset Formula $R_{1},R_{2}$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Devolver 
\begin_inset Formula $\rho$
\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Descomposición 4FN
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Dependencias de junta
\end_layout

\begin_layout Description
Dependencia
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

junta sea un esquema de relación 
\begin_inset Formula $R$
\end_inset

 y sea la descomposición 
\begin_inset Formula $R_{1},\ldots,R_{n}$
\end_inset

.
 La dependencia de junta 
\begin_inset Formula $*\left(R_{1},\ldots,R_{n}\right)$
\end_inset

 restringe el conjunto de relaciones posibles a aquellas para las cuales
 
\begin_inset Formula $R_{1},\ldots R_{n}$
\end_inset

 es una descomposición sin pérdida de información.
\end_layout

\begin_layout Standard
Formalmente, si 
\begin_inset Formula $R=R_{1}\cup\cdots\cup R_{n}$
\end_inset

, una relación 
\begin_inset Formula $r(R)$
\end_inset

 satisface la dependencia de junta 
\begin_inset Formula $*\left(R_{1},\ldots,R_{n}\right)$
\end_inset

 si 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
r=\pi_{R_{1}}(r)\bowtie\cdots\bowtie\pi_{R_{n}}(r)
\]

\end_inset


\end_layout

\begin_layout Standard
La dependencia de junta 
\begin_inset Formula $*\left(R_{1},\ldots,R_{k}\right)$
\end_inset

 se satisface para 
\begin_inset Formula $R$
\end_inset

 si restringe los valores de toda instancia 
\begin_inset Formula $r(R)$
\end_inset

 tal que, si existen 
\begin_inset Formula $k$
\end_inset

 tuplas 
\begin_inset Formula $t_{1},\ldots,t_{k}$
\end_inset

 que satisfacen 
\begin_inset Formula $t_{i}\left[R_{i}\cap R_{j}\right]=t_{j}\left[R_{i}\cap R_{j}\right]$
\end_inset

, luego también existe en 
\begin_inset Formula $r$
\end_inset

 otra tupla 
\begin_inset Formula $t_{k+1}$
\end_inset

 definida por 
\begin_inset Formula $t_{k+1}\left[R_{i}\right]=t_{i}\left[R_{i}\right]$
\end_inset

 para 
\begin_inset Formula $1\leq i\leq k$
\end_inset

.
\end_layout

\begin_layout Standard
Propiedades:
\end_layout

\begin_layout Itemize
Si una de las 
\begin_inset Formula $R_{i}$
\end_inset

 es 
\begin_inset Formula $R$
\end_inset

, la dependencia de junta es trivial.
\end_layout

\begin_layout Itemize
Toda dependencia de junta 
\begin_inset Formula $*(R_{1},R_{2})$
\end_inset

 es equivalente a la dependencia multivaluada 
\begin_inset Formula $R_{1}\cap R_{2}\twoheadrightarrow R_{2}$
\end_inset

.
\end_layout

\begin_layout Itemize
No existen un conjunto de reglas para inferir dependencias de juntas.
\end_layout

\begin_layout Standard

\series bold
Teorema
\series default
: 
\begin_inset Formula $R$
\end_inset

 satisface la dependencia multivaluada 
\begin_inset Formula $X\twoheadrightarrow Y$
\end_inset

 sí y sólo sí 
\begin_inset Formula $R$
\end_inset

 descompone sin pérdida sobre los esquemas 
\begin_inset Formula $X\cup Y$
\end_inset

 y 
\begin_inset Formula $X(R-XY)$
\end_inset

, es decir, si 
\begin_inset Formula $R$
\end_inset

 satisface la dependencia de junta 
\begin_inset Formula $*\left(XY,X(R-XY)\right)$
\end_inset


\end_layout

\begin_layout Standard

\series bold
Teorema
\series default
: si una relación 
\begin_inset Formula $R$
\end_inset

 puede descomponerse SPI en 3 esquemas, pero no puede hacerlo sobre 2, esa
 relación solo satisface DMVs triviales.
\end_layout

\begin_layout Standard

\series bold
\emph on
Ejemplo
\series default
: sea la relación 
\begin_inset Formula $R(A,B,C)$
\end_inset

 y la dependencia de junta 
\begin_inset Formula $*\left(\underset{R_{1}}{\underbrace{AB}},\underset{R_{2}}{\underbrace{BC}},\underset{R_{3}}{\underbrace{AC}}\right)$
\end_inset

.
 ¿Qué tupla debe tener 
\begin_inset Formula $r$
\end_inset

 para satisfacer la misma? 
\end_layout

\begin_layout Standard
\noindent
\align center

\emph on
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $r$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $A$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $B$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $C$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $t_{1}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
3
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
6
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $t_{2}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
7
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $t_{3}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
8
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
7
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\emph on
Dado que se cumplen:
\end_layout

\begin_layout Itemize

\emph on
\begin_inset Formula $t_{1}\left[R_{1}\cap R_{2}\right]=t_{2}\left[R_{1}\cap R_{2}\right]=2$
\end_inset


\end_layout

\begin_layout Itemize

\emph on
\begin_inset Formula $t_{1}\left[R_{1}\cap R_{3}\right]=t_{3}\left[R_{1}\cap R_{3}\right]=1$
\end_inset


\end_layout

\begin_layout Itemize

\emph on
\begin_inset Formula $t_{2}\left[R_{2}\cap R_{3}\right]=t_{3}\left[R_{2}\cap R_{3}\right]=7$
\end_inset


\end_layout

\begin_layout Standard

\emph on
Entonces para que se satisfaga la dependencia de junta deberá existir una
 tupla 
\begin_inset Formula $t_{4}$
\end_inset

 tal que:
\end_layout

\begin_layout Itemize

\emph on
\begin_inset Formula $t_{4}\left[R_{1}\right]=t_{1}\left[R_{1}\right]=\{1,2\}$
\end_inset


\end_layout

\begin_layout Itemize

\emph on
\begin_inset Formula $t_{4}\left[R_{2}\right]=t_{2}\left[R_{2}\right]=\{2,7\}$
\end_inset


\end_layout

\begin_layout Itemize

\emph on
\begin_inset Formula $t_{4}\left[R_{3}\right]=t_{3}\left[R_{3}\right]=\{1,7\}$
\end_inset


\end_layout

\begin_layout Standard

\emph on
Es decir, deberá existir la tupla 
\begin_inset Formula $\left(1,2,7\right)$
\end_inset

.
\end_layout

\begin_layout Subsection
Dependencias de junta embebidas
\end_layout

\begin_layout Description
Dependencia
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

junta
\begin_inset space ~
\end_inset

embebida Un esquema de relación 
\begin_inset Formula $r(R)$
\end_inset

 satisface la dependencia de junta embebida 
\begin_inset Formula $DJE*\left(R_{1},\ldots,R_{p}\right)$
\end_inset

 si 
\begin_inset Formula $\pi_{S}(r)$
\end_inset

 satisface la dependencia de junta 
\begin_inset Formula $*\left(R_{1},\ldots,R_{p}\right)$
\end_inset

, donde 
\begin_inset Formula $S=R_{1}R_{2}\ldots R_{p}$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Standard
Notar que 
\begin_inset Formula $r$
\end_inset

 puede no satisfacer la DJE.
\end_layout

\end_deeper
\begin_layout Section
Quinta forma normal (5FN)
\end_layout

\begin_layout Standard
Una relación 
\begin_inset Formula $R$
\end_inset

 está en 5FN con respecto a un conjunto de dependencias funcionales, multivaluad
as y de junta 
\begin_inset Formula $D$
\end_inset

, si para todas las dependencias de junta en 
\begin_inset Formula $D^{+}$
\end_inset

 de la forma 
\begin_inset Formula $*\left(R_{1},\ldots,R_{n}\right)$
\end_inset

 donde cada 
\begin_inset Formula $R_{i}\subseteq R$
\end_inset

 y 
\begin_inset Formula $R=R_{1}\cup\cdots\cup R_{n}$
\end_inset

, al menos una de las siguientes condiciones se cumple:
\end_layout

\begin_layout Itemize
La dependencia de junta 
\begin_inset Formula $*\left(R_{1},\ldots,R_{n}\right)$
\end_inset

 es trivial
\end_layout

\begin_layout Itemize
Cada 
\begin_inset Formula $R_{i}$
\end_inset

 es una superclave de 
\begin_inset Formula $R$
\end_inset


\end_layout

\begin_layout Standard
Propiedades:
\end_layout

\begin_layout Itemize
Toda relación que está en 5FN está en 4FN, y está en BCNF.
\end_layout

\begin_layout Itemize
Una descomposición 5FN no garantiza la preservación de dependencias.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
Entrada: una relación 
\begin_inset Formula $R$
\end_inset

, un conjunto de dependencias 
\begin_inset Formula $D^{+}$
\end_inset


\end_layout

\begin_layout Plain Layout
Salida: una descomposición 
\begin_inset Formula $\rho=\left\{ R_{1},\ldots,R_{n}\right\} $
\end_inset

 tal que 
\begin_inset Formula $R_{i}$
\end_inset

 está en 5FN con respecto a 
\begin_inset Formula $D_{i}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $\rho=R$
\end_inset


\end_layout

\begin_layout Enumerate
Repetir hasta que no haya esquemas en 
\begin_inset Formula $\rho Z$
\end_inset

 que violen 5FN
\end_layout

\begin_deeper
\begin_layout Enumerate
Elegir una dependencia de junta 
\begin_inset Formula $*\left(DJ_{1},\ldots DJ_{k}\right)$
\end_inset

que viole 5FN sobre 
\begin_inset Formula $\rho_{i}$
\end_inset


\end_layout

\begin_layout Enumerate
Descomponer 
\begin_inset Formula $\rho_{i}$
\end_inset

 en 
\begin_inset Formula $k$
\end_inset

 relaciones:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $R_{1}\left(DJ_{1}\right)$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $R_{k}\left(DJ_{k}\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
En 
\begin_inset Formula $\rho$
\end_inset

, reemplazar 
\begin_inset Formula $\rho$
\end_inset

 por 
\begin_inset Formula $R_{1},\ldots,R_{k}$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Devolver 
\begin_inset Formula $\rho$
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Descomposición 5FN
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard

\series bold
\emph on
Ejemplo
\series default
: sea 
\begin_inset Formula $D=\begin{cases}
*\left(ABCD,CDE,BDI\right)\\
*\left(AB,BCD,AD\right)\\
A\to BCDE\\
BC\to AI
\end{cases}$
\end_inset

 sobre el esquema de relación 
\begin_inset Formula $R=ABCDEI$
\end_inset

.
 
\end_layout

\begin_layout Standard

\emph on
Las clave candidata de 
\begin_inset Formula $R$
\end_inset

 son, por las dependencias funcionales, 
\begin_inset Formula $\{A,BC\}$
\end_inset

.
\end_layout

\begin_layout Standard

\emph on
\begin_inset Formula $R$
\end_inset

 no está en 5FN porque la dependencia de junta 
\begin_inset Formula $*\left(ABCD,CDE,BDI\right)$
\end_inset

 no es trivial, y 
\begin_inset Formula $CDE,\, BDI$
\end_inset

 no son superclaves de 
\begin_inset Formula $R$
\end_inset

.
\end_layout

\begin_layout Standard

\emph on
La descomposición 
\begin_inset Formula $R=\begin{cases}
R_{1}= & ABCD\\
R_{2}= & CDE\\
R_{3}= & BDI
\end{cases}$
\end_inset

 sí está en 5FN porque:
\end_layout

\begin_layout Itemize

\emph on
Para 
\begin_inset Formula $R_{1}$
\end_inset

 aplica la dependencia de junta 
\begin_inset Formula $*\left(AB,BCD,AD\right)$
\end_inset

, y todos los miembros son superclaves de 
\begin_inset Formula $R$
\end_inset

, por lo tanto está en 5FN.
\end_layout

\begin_layout Itemize

\emph on
Para 
\begin_inset Formula $R_{2}$
\end_inset

 solo aplican dependencias de junta triviales.
\end_layout

\begin_layout Itemize

\emph on
Para 
\begin_inset Formula $R_{3}$
\end_inset

 solo aplican dependencias de junta triviales.
\end_layout

\begin_layout Subsection
Implicación de dependencias
\end_layout

\begin_layout Standard
Utilizar el algoritmo Chase Tableau.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/chase_tableau_dmv_1.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Graphics
	filename img/chase_tableau_dmv_2.png
	scale 70

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Part
SQL
\end_layout

\begin_layout Standard
Componentes: 
\end_layout

\begin_layout Enumerate
DDL (
\emph on
Data Definition Language
\emph default
)
\end_layout

\begin_layout Enumerate
DML (
\emph on
Data Manipulation Language
\emph default
)
\end_layout

\begin_layout Enumerate
CL (
\emph on
Control Language
\emph default
)
\end_layout

\begin_layout Standard
Para identificar unívocamente a una relación, se utiliza el formato 
\family typewriter
<catalogo>.<esquema>.<relación>
\end_layout

\begin_layout Section
DDL
\end_layout

\begin_layout Description

\series bold
DDL
\series default
 Lenguaje de definición de datos para especificar el esquema de la base
 de datos, eliminar relaciones, modificar esquemas, crear vistas, crear
 restricciones de integridad, especificar derechos de acceso, etc.
\end_layout

\begin_layout Subsection
Tipos de dominios
\end_layout

\begin_layout Itemize

\family typewriter
char(
\begin_inset Formula $n$
\end_inset

)
\family default
: texto de longitud 
\begin_inset Formula $n$
\end_inset


\end_layout

\begin_layout Itemize

\family typewriter
varchar(
\begin_inset Formula $n$
\end_inset

)
\family default
: texto de longitud variable, con un máximo de 
\begin_inset Formula $n$
\end_inset

 caracteres
\end_layout

\begin_layout Itemize

\family typewriter
nvarchar(
\begin_inset Formula $n$
\end_inset

)
\family default
: texto de longitud variable, con un máximo de 
\begin_inset Formula $n$
\end_inset

 caracteres, utilizando el formato Unicode
\end_layout

\begin_layout Itemize

\family typewriter
int
\end_layout

\begin_layout Itemize

\family typewriter
smallint
\end_layout

\begin_layout Itemize

\family typewriter
numeric(
\begin_inset Formula $p$
\end_inset

,
\begin_inset Formula $d$
\end_inset

)
\family default
: 
\begin_inset Formula $p$
\end_inset

 dígitos con signo, y 
\begin_inset Formula $d$
\end_inset

 de los 
\begin_inset Formula $p$
\end_inset

 dígitos están a la derecha del punto decimal.
\end_layout

\begin_layout Itemize

\family typewriter
real, double precision
\end_layout

\begin_layout Itemize

\family typewriter
float(
\begin_inset Formula $n$
\end_inset

)
\end_layout

\begin_layout Itemize

\family typewriter
date
\end_layout

\begin_layout Itemize

\family typewriter
time
\end_layout

\begin_layout Itemize

\family typewriter
timestamp
\end_layout

\begin_layout Itemize

\family typewriter
clob(n)
\family default
: character large object de 
\begin_inset Formula $n$
\end_inset

 bytes
\end_layout

\begin_layout Itemize

\family typewriter
blob(n)
\family default
: binary large object de 
\begin_inset Formula $n$
\end_inset

 bytes
\end_layout

\begin_layout Subsection
Create table
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE TABLE r(A1 D1, A2 D2, ..., An Dn,
\end_layout

\begin_layout Plain Layout

		<restriccion-integridad1>,
\end_layout

\begin_layout Plain Layout

		...,
\end_layout

\begin_layout Plain Layout

		<restriccion-integridadK>);
\end_layout

\end_inset


\end_layout

\begin_layout Standard
La instrucción anterior crea una tabla llamada 
\emph on
r
\emph default
 con atributos 
\begin_inset Formula $A_{i}$
\end_inset

, y 
\begin_inset Formula $D_{i}$
\end_inset

 es el dominio del atributo 
\begin_inset Formula $A_{i}$
\end_inset

.
\end_layout

\begin_layout Standard
Las restricciones de integridad pueden ser:
\end_layout

\begin_layout Itemize

\family typewriter
primary key (
\begin_inset Formula $A_{j1},A_{j2},\dots,A_{jm})$
\end_inset


\family default
: los atributos 
\begin_inset Formula $A_{ji}$
\end_inset

, con 
\begin_inset Formula $i\in[1,m]$
\end_inset

 forman la clave primaria de cada tupla.
 No pueden ser 
\emph on
null
\emph default
, y deben ser únicos.
\end_layout

\begin_layout Itemize

\family typewriter
check (
\begin_inset Formula $P$
\end_inset

)
\family default
: todas las tuplas de 
\begin_inset Formula $r$
\end_inset

 deben satisfacer el predicado 
\begin_inset Formula $P$
\end_inset

.
\end_layout

\begin_layout Itemize

\family typewriter
foreign key
\family default
:
\family typewriter

\begin_inset listings
inline false
status open

\begin_layout Plain Layout

FOREIGN KEY (atr) REFERENCES rel
\end_layout

\begin_layout Plain Layout

	ON [update|delete] [cascade|set null|set default];
\end_layout

\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
Se establece que el atributo 
\family typewriter
atr
\family default
 es una clave primaria en la relación 
\family typewriter
rel
\family default
.
 Se puede especificar lo que sucede si se produce una actualización o un
 borrado de dicho valor en la relación 
\family typewriter
rel
\family default
:
\end_layout

\begin_layout Itemize

\series bold
Cascade
\series default
: se actualiza/elimina la tupla en esta relación
\end_layout

\begin_layout Itemize

\series bold
Set null
\series default
: la clave foránea se establece en 
\emph on
null
\end_layout

\begin_layout Itemize

\series bold
Set default
\series default
: la clave foránea se establece en su valor por default
\end_layout

\end_deeper
\begin_layout Itemize

\family typewriter
assert
\family default
: define una restricción aplicable a varias tablas.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE ASSERTION nombre_asercion
\end_layout

\begin_layout Plain Layout

	CHECK P
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
Drop table
\end_layout

\begin_layout Standard
La instrucción 
\family typewriter
DROP TABLE r
\family default
 elimina todas las tuplas de la tabla 
\begin_inset Formula $r$
\end_inset

 y el esquema de relación 
\begin_inset Formula $r$
\end_inset

.
\end_layout

\begin_layout Subsection
Alter table
\end_layout

\begin_layout Standard
La instrucción puede utilizarse para agregar atributos nuevos (con valor
 
\emph on
null
\emph default
) o para eliminarlos.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

ALTER TABLE r 
\end_layout

\begin_layout Plain Layout

	ADD <Atributo> <Dominio>;
\end_layout

\begin_layout Plain Layout

ALTER TABLE r 
\end_layout

\begin_layout Plain Layout

	DROP <Atributo>;
\end_layout

\end_inset


\end_layout

\begin_layout Description

\series bold
Diccionario
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

datos 
\series default
Contiene 
\series bold
metadatos
\series default
 (información sobre los datos), en particular, sobre el esquema de la misma.
\end_layout

\begin_layout Section
DML
\end_layout

\begin_layout Description

\series bold
DML
\series default
 Lenguaje de manipulación de datos para expresar las consultas a la base
 de datos.
\end_layout

\begin_layout Standard
Operaciones CRUD (
\emph on
Create
\emph default
, 
\emph on
Read
\emph default
, 
\emph on
Update
\emph default
, 
\emph on
Delete
\emph default
)
\end_layout

\begin_layout Description
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Álgebra relacional
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
SQL
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\pi_{attr}(r)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
SELECT attr FROM r
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\sigma_{cond}(r)$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
SELECT * FROM r WHERE cond
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $r\times s$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
SELECT * FROM r,s
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
La expresión
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT a1, a2, ..., an
\end_layout

\begin_layout Plain Layout

FROM r1, r2, ..., rm
\end_layout

\begin_layout Plain Layout

WHERE p;
\end_layout

\end_inset


\end_layout

\begin_layout Standard
es equivalente a la expresión 
\begin_inset Formula $\pi_{a_{1},a_{2},\dots,a_{n}}\left(\sigma_{p}\left(r_{1}\times r_{2}\times\dots\times r_{m}\right)\right)$
\end_inset

.
\end_layout

\begin_layout Itemize
El resultado de una expresión SQL 
\series bold
puede
\series default
 contener tuplas duplicadas.
 Para eliminar los duplicados, se utiliza la cláusula 
\family typewriter
SELECT DISTINCT
\family default
.
\end_layout

\begin_layout Itemize
Las funciones agregadas no se pueden componer.
 Por ejemplo, 
\family typewriter
max(count(*))
\family default
 no es válido.
\end_layout

\begin_layout Itemize
Una cláusula de tipo 
\family typewriter
SELECT *
\family default
 indica que se seleccionan todos los atributos de las relaciones en la cláusula
 
\family typewriter
FROM
\family default
.
\end_layout

\begin_layout Itemize
El operador de renombre 
\family typewriter
as
\family default
: 
\family typewriter
SELECT viejo-nombre AS nuevo-nombre
\end_layout

\begin_layout Itemize
El operador 
\family typewriter
like
\family default
 se puede usar dentro de una cláusula 
\family typewriter
where
\family default
 para buscar valores que cumplan un patrón, especificado con los siguientes
 caracteres especiales: 
\end_layout

\begin_deeper
\begin_layout Itemize

\family typewriter
%
\family default
: matchea cualquier sub string
\end_layout

\begin_layout Itemize

\family typewriter
_
\family default
: matchea un caracter cualquiera
\end_layout

\end_deeper
\begin_layout Itemize
El operador 
\family typewriter
order by <atributo(s)> [asc|desc]
\family default
 ordena el resultado de una consulta por uno o varios de los atributos,
 de forma ascendente o descendente (ascendente por default).
\end_layout

\begin_layout Itemize
Operadores sobre conjuntos:
\end_layout

\begin_deeper
\begin_layout Itemize

\family typewriter
Union
\end_layout

\begin_layout Itemize

\family typewriter
Intersect
\end_layout

\begin_layout Itemize

\family typewriter
Except
\end_layout

\end_deeper
\begin_layout Itemize
El operador 
\family typewriter
group by
\family default
 permite agrupar tuplas en base a uno o más atributos (las tuplas con el
 mismo valor para los atributos en esta cláusula se ponen en un mismo grupo).
 Los atributos en la cláusula 
\family typewriter
select
\family default
, por fuera de las funciones agregadas, deben estar en el operador 
\family typewriter
group by
\family default
.
 La sintaxis es:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT expr1, ..., exprN, funcionAgregada(expr)
\end_layout

\begin_layout Plain Layout

FROM tablas
\end_layout

\begin_layout Plain Layout

WHERE condiciones
\end_layout

\begin_layout Plain Layout

GROUP BY expr1, ..., exprN;
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\emph on
Ejemplo: encontrar el promedio del saldo de las cuentas en cada sucursal
 de un banco.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT sucursal-nombre, avg(saldo)
\end_layout

\begin_layout Plain Layout

FROM cuentas
\end_layout

\begin_layout Plain Layout

GROUP BY sucursal-nombre;
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
El operador 
\family typewriter
having
\family default
 permite seleccionar a grupos formados con 
\family typewriter
group by 
\family default
que cumplan una condición.
 Cualquier atributo que esté presente en la cláusula 
\family typewriter
having
\family default
 sin agregar, debe aparecer en el operador 
\family typewriter
group by
\family default
.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT columna, funcion_agregada(columna) 
\end_layout

\begin_layout Plain Layout

FROM tabla 
\end_layout

\begin_layout Plain Layout

WHERE columna operator value 
\end_layout

\begin_layout Plain Layout

GROUP BY columna
\end_layout

\begin_layout Plain Layout

HAVING funcion_agregada(columna) operator value;
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\emph on
Ejemplo: encontrar los nombres de las sucursales del banco que tengan un
 promedio general de saldo mayor a $1200.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT sucursal-nombre
\end_layout

\begin_layout Plain Layout

FROM cuentas
\end_layout

\begin_layout Plain Layout

GROUP BY sucursal-nombre
\end_layout

\begin_layout Plain Layout

HAVING avg(saldo) > 1200
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Standard

\series bold
Nota
\series default
: si se utilizan el operador 
\family typewriter
where
\family default
 y el operador 
\family typewriter
having
\family default
, primero se aplica el 
\family typewriter
where
\family default
 y luego se filtra por 
\family typewriter
having
\family default
.
\end_layout

\begin_layout Subsection
Consultas anidadas
\end_layout

\begin_layout Standard
En una consulta anidada, el 
\family typewriter
select
\family default
 interno puede tener variables de tuplas definidas dentro del 
\family typewriter
select
\family default
, o en cualquier consulta que incluya a ésta.
\end_layout

\begin_layout Itemize
El conector 
\family typewriter
in
\family default
 permite verificar la pertenencia de un valor a un conjunto que es resultado
 de una cláusula 
\family typewriter
select
\family default
.
 De forma equivalente, existe el conector 
\family typewriter
not in
\family default
.
\end_layout

\begin_deeper
\begin_layout Standard

\emph on
Ejemplo: encontrar los nombres de los clientes que tienen un préstamo y
 una cuenta en el banco.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT DISTINCT cliente-nombre
\end_layout

\begin_layout Plain Layout

FROM pidio-prestamo
\end_layout

\begin_layout Plain Layout

WHERE cliente-nombre IN (SELECT cliente-nombre
\end_layout

\begin_layout Plain Layout

			FROM tiene-cuenta);
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
El operador de comparación 
\family typewriter
some
\family default
 en una cláusula 
\family typewriter
where
\family default
 de un 
\family typewriter
select
\family default
 externo devuelve verdadero si el valor del atributo en cuestión es mayor
 o menor que al menos un valor de la cláusula 
\family typewriter
select
\family default
 interna.
\end_layout

\begin_deeper
\begin_layout Standard

\emph on
Ejemplo: encontrar los nombres de las sucursales del banco que tienen activos
 mayores que los de al menos una sucursal en Brooklyn.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT sucursal-nombre
\end_layout

\begin_layout Plain Layout

FROM sucursales
\end_layout

\begin_layout Plain Layout

WHERE activos > SOME (SELECT activos
\end_layout

\begin_layout Plain Layout

			FROM sucursales
\end_layout

\begin_layout Plain Layout

			WHERE sucursal-nombre = 'Brooklyn');
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
El operador de comparación 
\family typewriter
all
\family default
 en una cláusula 
\family typewriter
where
\family default
 de un 
\family typewriter
select
\family default
 externo devuelve verdadero si el valor del atributo en cuestión es mayor
 a todos los valores de la cláusula 
\family typewriter
select
\family default
 interna.
\end_layout

\begin_deeper
\begin_layout Standard

\emph on
Ejemplo: encontrar los nombres de las sucursales del banco que tienen activos
 mayores que los todas las sucursales en Brooklyn.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT sucursal-nombre
\end_layout

\begin_layout Plain Layout

FROM sucursales
\end_layout

\begin_layout Plain Layout

WHERE activos > ALL (SELECT activos
\end_layout

\begin_layout Plain Layout

			FROM sucursales
\end_layout

\begin_layout Plain Layout

			WHERE sucursal-nombre = 'Brooklyn');
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
El operador 
\family typewriter
any
\family default
 devuelve verdadero si existe al menos un valor para
\end_layout

\begin_deeper
\begin_layout Standard

\emph on
Ejemplo: encontrar los clientes que pidieron un préstamo de monto mayor
 a al menos los activos de una sucursal.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT cliente-nombre
\end_layout

\begin_layout Plain Layout

FROM pidio-prestamo
\end_layout

\begin_layout Plain Layout

WHERE cantidad > ANY (SELECT activos
\end_layout

\begin_layout Plain Layout

			FROM sucursales);
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
El operador 
\family typewriter
exists
\family default
 devuelve verdadero si la consulta interna no es vacía.
\end_layout

\begin_deeper
\begin_layout Standard

\emph on
Ejemplo: encontrar los clientes que tienen una cuenta y un préstamo en el
 banco.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT cliente-nombre
\end_layout

\begin_layout Plain Layout

FROM pidio-prestamo
\end_layout

\begin_layout Plain Layout

WHERE EXISTS (SELECT *
\end_layout

\begin_layout Plain Layout

		FROM tiene-cuenta
\end_layout

\begin_layout Plain Layout

            WHERE pidio-prestamo.cliente-nombre = tiene-cuenta.cliente-nombre);
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
El operador 
\family typewriter
unique
\family default
 devuelve verdadero si la consulta interna no contiene tuplas duplicadas.
\end_layout

\begin_layout Standard
SQL no ofrece en forma nativa la posibilidad de ejecutar el operador división.
 Sin embargo, este se puede implementar usando consultas anidadas.
\end_layout

\begin_layout Standard

\emph on
Ejemplo: dados los siguientes esquemas relacionales
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

Estudiante (Enro, Enombre, Carrera, Anio_cursa, Edad) 
\end_layout

\begin_layout Plain Layout

Curso (Cnombre, Horario, Aula, Pid) 
\end_layout

\begin_layout Plain Layout

Cursa (Enro, Cnombre) 
\end_layout

\begin_layout Plain Layout

Profesor (Pid, Pnombre, departamento) 
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\emph on
Hallar los nombres de todos los profesores que enseñan en todas las aulas
 en las que se dicta algún curso.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT P.Pnombre 
\end_layout

\begin_layout Plain Layout

FROM Profesor P 
\end_layout

\begin_layout Plain Layout

WHERE NOT EXISTS (SELECT C.Aula                   
\end_layout

\begin_layout Plain Layout

				FROM Curso C1                  
\end_layout

\begin_layout Plain Layout

				WHERE NOT EXISTS (SELECT *                                    
\end_layout

\begin_layout Plain Layout

								FROM Curso C2                                    
\end_layout

\begin_layout Plain Layout

								WHERE C2.Aula = c1.Aula AND      
\end_layout

\begin_layout Plain Layout

                                    C2.Pid = P.Pid));
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Delete
\end_layout

\begin_layout Standard
Sintaxis para el borrado de tuplas de la relación 
\begin_inset Formula $r$
\end_inset

 para las cuales 
\begin_inset Formula $P$
\end_inset

 es verdadera:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

DELETE FROM r
\end_layout

\begin_layout Plain Layout

WHERE P
\end_layout

\end_inset


\end_layout

\begin_layout Itemize
Sólo se borra de una relación.
\end_layout

\begin_layout Itemize
Sólo se borran tuplas (no atributos de tuplas).
\end_layout

\begin_layout Itemize
Primero se buscan todas las tuplas que satisfacen 
\begin_inset Formula $P$
\end_inset

, y luego se borran todas ellas.
\end_layout

\begin_layout Subsection
Insert
\end_layout

\begin_layout Standard
Sintaxis para la inserción de tuplas en la relación 
\begin_inset Formula $r$
\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

INSERT INTO r (nombreAtributo1, ..., nombreAtributoN)
\end_layout

\begin_layout Plain Layout

VALUES (valor1, ..., valorN)
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

INSERT INTO r 
\end_layout

\begin_layout Plain Layout

	SELECT (...)
\end_layout

\end_inset


\end_layout

\begin_layout Itemize
Primero se buscan todas las tuplas que satisfacen el 
\family typewriter
select
\family default
, y luego se insertan todas ellas.
\end_layout

\begin_layout Subsection
Update
\end_layout

\begin_layout Standard
Sintaxis para la actualización de un atributo de una tupla de 
\begin_inset Formula $r$
\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

UPDATE r
\end_layout

\begin_layout Plain Layout

SET atributo = valor
\end_layout

\begin_layout Plain Layout

WHERE condicion
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

UPDATE r
\end_layout

\begin_layout Plain Layout

SET atributo = CASE
\end_layout

\begin_layout Plain Layout

				WHEN condicion1 THEN valor1
\end_layout

\begin_layout Plain Layout

				WHEN condicion2 THEN valor2
\end_layout

\begin_layout Plain Layout

				ELSE valor3
\end_layout

\begin_layout Plain Layout

			   END
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Part
Procesamiento de Consultas
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/proc_consultas.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Pasos en el procesamiento de consultas
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Asumimos que toda la relación se almacena de forma contigua en disco.
\end_layout

\begin_layout Standard
Metadatos que se almacenan para cada base de datos:
\end_layout

\begin_layout Enumerate
\begin_inset Formula $n_{r}=$
\end_inset

 cantidad de tuplas en la relación 
\begin_inset Formula $r$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $l_{r}=$
\end_inset

 tamaño de una tupla, en bytes
\end_layout

\begin_layout Enumerate
\begin_inset Formula $b_{r}=$
\end_inset

 cantidad de bloques que ocupa la relación 
\begin_inset Formula $r$
\end_inset

.
 
\begin_inset Formula 
\[
b_{r}=\frac{l_{r}\times n_{r}}{tam\, bloque\, en\, bytes}
\]

\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $f_{r}=$
\end_inset

 factor de bloqueo de la relación 
\begin_inset Formula $r$
\end_inset

 (es decir, cuantas tuplas caben en un bloque)
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
f_{r}=\left\lceil \frac{n_{r}}{b_{r}}\right\rceil 
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
\begin_inset Formula $V(A,r)=$
\end_inset

cantidad de valores distintos que toma el atributo 
\begin_inset Formula $A$
\end_inset

 en la relación 
\begin_inset Formula $r$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $MIN(A,r)=$
\end_inset

mínimo valor que toma el atributo 
\begin_inset Formula $A$
\end_inset

 en la relación 
\begin_inset Formula $r$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $MAX(A,r)=$
\end_inset

máximo valor que toma el atributo 
\begin_inset Formula $A$
\end_inset

 en la relación 
\begin_inset Formula $r$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/info_db.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Estadísticas que se almacenan de la base de datos
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Índices
\end_layout

\begin_layout Standard
Ciertas consultas sobre algunos atributos son más frecuentes que otras.
 Para acelerar estas consultas, se utilizan los índices.
 Podemos tener más de un índice sobre una relación.
\end_layout

\begin_layout Description
Índice Estructura de datos (usualmente árbol B+) que permiten encontrar
 rápidamente las tuplas de una relación que tengan un valor especifico para
 un atributo o atributos (el/los que el índice almacena), con la desventaja
 de que cada modificación a la relación requiere actualizar el índice.
\end_layout

\begin_deeper
\begin_layout Standard
Un registro de un índice tiene un valor de la clave de búsqueda, y punteros
 a uno o más tuplas con esa clave de búsqueda.
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE [CLUSTERED] INDEX estudianteID_indice
\end_layout

\begin_layout Plain Layout

	ON estudiante
\end_layout

\begin_layout Plain Layout

{
\end_layout

\begin_layout Plain Layout

	ID asc
\end_layout

\begin_layout Plain Layout

};
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Tipos de índices:
\end_layout

\begin_layout Itemize
Según la clave:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Clusterizado
\series default
 
\series bold
/ primario
\series default
: índice cuya clave de búsqueda define el orden secuencial del archivo de
 la tabla.
 Sólo puede haber uno de estos índices para cada relación
\end_layout

\begin_layout Itemize

\series bold
Clusterizado / secundario
\series default
.
\end_layout

\begin_deeper
\begin_layout Itemize
El orden físico de las tuplas no es igual al orden del índice
\end_layout

\begin_layout Itemize
Las columnas que se indexan son, típicamente, atributos no claves
\end_layout

\begin_layout Itemize
Siempre son densos
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
Según la cantidad de registros que tiene:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Denso
\series default
: tiene un registro para cada valor posible de la clave de búsqueda.
 Si es clusterizado, tiene un puntero al primer registro con ese valor.
 Si es no clusterizado, tiene punteros a todos los registros con ese valor.
\end_layout

\begin_layout Itemize

\series bold
Esparcido
\series default
: tiene registros para algunos valores de la clave de búsqueda.
 Solo se pueden usar si el archivo de datos está ordenado por la clave de
 búsqueda.
\end_layout

\end_deeper
\begin_layout Standard
\noindent
\align center
\begin_inset Formula $Esparcido\implies Primario$
\end_inset


\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Formula $Secundario\implies Denso$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/dense_index.PNG
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Índice denso
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/sparse_index.PNG
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Índice esparcido
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Índices densos y esparcidos
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Description
Índice
\begin_inset space ~
\end_inset

compuesto índice cuya clave de búsqueda está formada por más de un atributo.
 Conviene que los atributos de más a la izquierda sean más discriminantes
 que los de la derecha.
 
\emph on
Ejemplo: para una relación 
\begin_inset Formula $pelicula(nombre,año)$
\end_inset

, es esperable que haya más consultas sobre el 
\begin_inset Formula $nombre$
\end_inset

 que sobre el 
\begin_inset Formula $año$
\end_inset

.
 Entonces, un índice 
\begin_inset Formula $(nombre,año)$
\end_inset

 sería mejor que 
\begin_inset Formula $(año,nombre).$
\end_inset


\end_layout

\begin_layout Description
Índice
\begin_inset space ~
\end_inset

cubridor Es un índice que contiene todas las columnas de una consulta, y
 por ende no se necesita realizar búsquedas adicionales en el índice clusterizad
o.
\end_layout

\begin_layout Subsection
Estructuras de índices
\end_layout

\begin_layout Itemize
Árbol B+
\end_layout

\begin_layout Itemize
Tabla de hash
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Ventajas
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Desventajas
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Árbol B+
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Soporta búsquedas por rango
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Operaciones más costosas
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Tabla de hash
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
La búsqueda típica requiere solo una operación de I/O
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No soporta búsquedas por rango.
 
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Section
Formas de realizar consultas
\end_layout

\begin_layout Enumerate
Búsqueda lineal sobre toda la relación
\end_layout

\begin_layout Enumerate
Usando índices
\end_layout

\begin_layout Enumerate

\emph on
Hashing
\end_layout

\begin_layout Enumerate
Ordenamiento
\end_layout

\begin_layout Standard
Los algoritmos pueden asumir que una relación entra completamente en memoria,
 o que son muy grandes.
\end_layout

\begin_layout Subsection
Operadores
\end_layout

\begin_layout Itemize

\emph on
Scan
\end_layout

\begin_deeper
\begin_layout Itemize

\emph on
Table scan
\emph default
: se leen todos los bloques de la relación en disco.
\end_layout

\begin_layout Itemize

\emph on
Index scan
\emph default
: se leen todos los bloques de la relación en disco, utilizando un índice.
\end_layout

\begin_layout Itemize

\emph on
Sort scan:
\emph default
 ordena una relación 
\begin_inset Formula $R$
\end_inset

 sobre un atributo 
\begin_inset Formula $a$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Itemize
Si hay un índice sobre 
\begin_inset Formula $a$
\end_inset

, se lo usa.
\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $R$
\end_inset

 entra en memoria, se la trae a memoria con 
\emph on
table
\emph default
 o 
\emph on
index scan
\emph default
, y se la ordena en memoria
\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $R$
\end_inset

 no entra en memoria, se la ordena externamente.
\end_layout

\end_deeper
\end_deeper
\begin_layout Section
Algoritmos
\end_layout

\begin_layout Subsection
Selección
\end_layout

\begin_layout Standard
\begin_inset Formula $\sigma_{A=a}(r)$
\end_inset


\end_layout

\begin_layout Itemize
Búsqueda lineal sobre 
\begin_inset Formula $r$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
Si la relación es clusterizada: 
\begin_inset Formula $b_{r}$
\end_inset


\end_layout

\begin_layout Itemize
Si la relación no está clusterizada: 
\begin_inset Formula $n_{r}$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Búsqueda con índice sobre los atributos de 
\begin_inset Formula $A$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
Si el índice es clusterizado: costo 
\begin_inset Formula $\frac{b_{r}}{V(A,r)}$
\end_inset


\end_layout

\begin_layout Itemize
Si el índice no es clusterizado: costo 
\begin_inset Formula $\frac{n_{r}}{V(A,r)}$
\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
Junta
\end_layout

\begin_layout Standard
\begin_inset Formula $R(X,Y)\bowtie S(Y,Z)$
\end_inset

, donde 
\begin_inset Formula $R$
\end_inset

 es la relación más pequeña.
 Suponemos que la memoria está formada por 
\begin_inset Formula $M$
\end_inset

 buffers.
\end_layout

\begin_layout Itemize
Iteración ingenua (
\emph on
tuple based nested-loop join
\emph default
): 
\end_layout

\begin_deeper
\begin_layout Itemize
costo 
\begin_inset Formula $n_{s}\times n_{r}$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

para cada tupla s en S:
\end_layout

\begin_layout Plain Layout

	para cada tupla r en R:
\end_layout

\begin_layout Plain Layout

		si (s join r = t):
\end_layout

\begin_layout Plain Layout

			devolver t
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Iteración por bloques (
\emph on
block based nested-loop join
\emph default
): 
\end_layout

\begin_deeper
\begin_layout Itemize
Costo 
\begin_inset Formula $b_{r}+\frac{b_{r}}{m-1}\times b_{s}$
\end_inset

 (
\begin_inset Formula $R$
\end_inset

 se lee una vez, 
\begin_inset Formula $S$
\end_inset

 se lee por cada pedazo de 
\begin_inset Formula $R$
\end_inset

, cada pedazo es de tamaño 
\begin_inset Formula $\frac{b_{r}}{m-1}$
\end_inset

)
\end_layout

\begin_layout Itemize
Conviene que la relación del ciclo externo sea la más pequeña
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

desde i=1 hasta i=(bR / m-1):
\end_layout

\begin_layout Plain Layout

	leer R en memoria (ocupar M-1 buffers)
\end_layout

\begin_layout Plain Layout

	para cada bloque bs en S:
\end_layout

\begin_layout Plain Layout

		leer bs en memoria (ocupar 1 buffer)
\end_layout

\begin_layout Plain Layout

		para cada tupla t en bs:
\end_layout

\begin_layout Plain Layout

			buscar las tuplas de R en que hacen join con t
\end_layout

\begin_layout Plain Layout

			devolver t
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\emph on
Indexed nested-loop join
\emph default
: suponer que se tiene un índice sobre 
\begin_inset Formula $S$
\end_inset

 del atributo 
\begin_inset Formula $Y$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Itemize
Si el índice es clusterizado: costo 
\begin_inset Formula $b_{r}+\frac{n_{r}b_{s}}{V(Y,S)}$
\end_inset


\end_layout

\begin_layout Itemize
Si el índice no es clusterizado: costo 
\begin_inset Formula $b_{r}+\frac{n_{r}n_{s}}{V(Y,S)}$
\end_inset


\end_layout

\begin_layout Itemize
Este método es eficiente cuando 
\begin_inset Formula $S$
\end_inset

 no está almacenada en forma contigua en disco.
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

para cada bloque br de R:
\end_layout

\begin_layout Plain Layout

	para cada tupla t de br:
\end_layout

\begin_layout Plain Layout

		buscar con el indice las tuplas de S que hacen join con t
\end_layout

\begin_layout Plain Layout

		para cada tupla s join t:
\end_layout

\begin_layout Plain Layout

			agregar <s,t> al resultado
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Sort-merge (
\emph on
sort based join
\emph default
): 
\end_layout

\begin_deeper
\begin_layout Itemize
Costo 
\begin_inset Formula $b_{s}+b_{r}+b_{s}\log(b_{s})+b_{r}\log(b_{r})$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

ordenar R con respecto a Y
\end_layout

\begin_layout Plain Layout

ordenar S con respecto a Y
\end_layout

\begin_layout Plain Layout

mergear R y S:
\end_layout

\begin_layout Plain Layout

	encontrar min(R) y min(S)
\end_layout

\begin_layout Plain Layout

	si min(R) > min(S)
\end_layout

\begin_layout Plain Layout

		quitar las tuplas de S con Y como atributo
\end_layout

\begin_layout Plain Layout

		leer S
\end_layout

\begin_layout Plain Layout

	si min(R) < min(S)
\end_layout

\begin_layout Plain Layout

		quitar las tuplas de R con Y como atributo
\end_layout

\begin_layout Plain Layout

		leer R
\end_layout

\begin_layout Plain Layout

	si min(R) == min(S)
\end_layout

\begin_layout Plain Layout

		agregar r join s al resultado
\end_layout

\begin_layout Plain Layout

		leer R
\end_layout

\begin_layout Plain Layout

		leer S
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Método Simple de Junta Hash: utiliza una función de hash 
\begin_inset Formula $h$
\end_inset

.
 Requiere que la relación 
\begin_inset Formula $R$
\end_inset

 entre en memoria.
 
\begin_inset Formula $h\to[0,M-1]$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Itemize
Costo: 
\begin_inset Formula $2\left(b_{r}+b_{s}\right)$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

TH = {} // en memoria
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

// fase constructiva
\end_layout

\begin_layout Plain Layout

para cada bloque de R:
\end_layout

\begin_layout Plain Layout

	para cada tupla r del bloque:
\end_layout

\begin_layout Plain Layout

		calcular h(r[Y])
\end_layout

\begin_layout Plain Layout

		guardar TH[Y] = r
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

// fase exploratoria
\end_layout

\begin_layout Plain Layout

para cada bloque de S:
\end_layout

\begin_layout Plain Layout

	para cada tupla s del bloque:
\end_layout

\begin_layout Plain Layout

		calcular h(s[Y])
\end_layout

\begin_layout Plain Layout

		agregar al resultado las tuplas de TH[Y] join "s"
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Método GRACE:
\end_layout

\begin_deeper
\begin_layout Standard
El método de junta Hash versión GRACE se usa para calcular la junta 
\begin_inset Formula $R\bowtie_{R.A=S.A}S$
\end_inset

 cuando ninguna de las tablas entran en memoria.
 Lo que se hace es generar 2 conjuntos de 
\begin_inset Formula $M$
\end_inset

 particiones.
 Se utilizan dos funciones de hash: una para generar las particiones 
\begin_inset Formula $h:A\to[0,M-1]$
\end_inset

, y otra para calcular qué tuplas hacen 
\emph on
join
\emph default
.
\end_layout

\begin_layout Standard
En una primera etapa, por cada tupla 
\begin_inset Formula $t$
\end_inset

 de cada bloque de 
\begin_inset Formula $R$
\end_inset

 se aplica la función de hashing 
\begin_inset Formula $h(t)$
\end_inset

 para saber a cuál partición enviar la tupla.
 Se envía cada tupla a esa partición (un archivo) en disco.
 Al finalizar la etapa, se tienen 
\begin_inset Formula $M$
\end_inset

 archivos.
\end_layout

\begin_layout Standard
En una segunda etapa, se hace lo mismo con 
\begin_inset Formula $S$
\end_inset

, pero con otros 
\begin_inset Formula $M$
\end_inset

 archivos.
 La clave está en que si dos tuplas hacen 
\emph on
join
\emph default
, entonces necesariamente deben estar en el mismo número de partición.
 
\end_layout

\begin_layout Standard
Finalmente, se leen las 
\begin_inset Formula $i$
\end_inset

 particiones.
 A cada tupla leída de la partición 
\begin_inset Formula $i$
\end_inset

 de 
\begin_inset Formula $R$
\end_inset

 se le aplica la función de hash 
\begin_inset Formula $h_{2}$
\end_inset

 para saber dónde guardarla en una tabla de hash en memoria.
 Luego, se calcula 
\begin_inset Formula $h_{2}$
\end_inset

 para cada tupla de la partición 
\begin_inset Formula $i$
\end_inset

 de 
\begin_inset Formula $S$
\end_inset

.
 Este valor nos dirá la posición en la tabla de hash donde están las tuplas
 de 
\begin_inset Formula $R$
\end_inset

 que hacen 
\emph on
join
\emph default
 con dicha tupla.
 De esta forma se obtienen las tuplas que hacen 
\emph on
join
\emph default
, y se las graba en disco.
\end_layout

\begin_layout Itemize
Costo: 
\begin_inset Formula $3\left(b_{s}+b_{r}\right)$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

// particionamiento de R.
 Costo: 2*bR
\end_layout

\begin_layout Plain Layout

para cada tupla r de R:
\end_layout

\begin_layout Plain Layout

	num buffer = calcular h1(r[Y])
\end_layout

\begin_layout Plain Layout

	guardar "r" en el buffer
\end_layout

\begin_layout Plain Layout

	si (buffer completo)
\end_layout

\begin_layout Plain Layout

		guardarlo en disco Ri
\end_layout

\begin_layout Plain Layout

// particionamiento de S.
 Costo: 2*bS
\end_layout

\begin_layout Plain Layout

para cada tupla s de S:
\end_layout

\begin_layout Plain Layout

	num buffer = calcular h1(s[Y])
\end_layout

\begin_layout Plain Layout

	guardar "s" en el buffer
\end_layout

\begin_layout Plain Layout

	si (buffer completo)
\end_layout

\begin_layout Plain Layout

		guardarlo en disco Si
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

// metodo simple de hash.
 Costo: bR + bS
\end_layout

\begin_layout Plain Layout

para i desde 0 a M-1:
\end_layout

\begin_layout Plain Layout

	leer Ri
\end_layout

\begin_layout Plain Layout

	para cada tupla r en Ri:
\end_layout

\begin_layout Plain Layout

		calcular h2(r[Y])
\end_layout

\begin_layout Plain Layout

		guardar TH[r[Y]] = r
\end_layout

\begin_layout Plain Layout

	leer Si
\end_layout

\begin_layout Plain Layout

	para cada tupla s en Si:
\end_layout

\begin_layout Plain Layout

		calcular h2(s[Y])
\end_layout

\begin_layout Plain Layout

		agregar al resultado las tuplas de TH[r[Y]] join "s"
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Section
Evaluación de expresiones
\end_layout

\begin_layout Standard
La forma obvia de evaluar una expresión que tiene varias operaciones es
 evaluar cada operación en el orden indicado, materializando en disco cada
 resultado intermedio como relaciones temporales.
\end_layout

\begin_layout Standard
Otra alternativa, más eficiente, es evaluar las operaciones en simultáneo
 en un 
\series bold
pipeline
\series default
, donde los resultados de una operación pasan a la próxima, y se elimina
 la necesidad de almacenar relaciones temporales.
 Esto se puede utilizar para evaluar juntas múltiples: 
\begin_inset Formula $R_{1}\bowtie R_{2}\bowtie\cdots\bowtie R_{k}$
\end_inset

.
\end_layout

\begin_layout Standard
Ventajas de 
\emph on
pipeline:
\end_layout

\begin_layout Enumerate
Elimina el costo de leer y escribir relaciones temporales.
\end_layout

\begin_layout Enumerate
Puede empezar a generar resultados inmediatamente.
\end_layout

\begin_layout Standard
Uso de 
\emph on
pipelining
\emph default
:
\end_layout

\begin_layout Itemize

\emph on
Sort
\emph default
: no se puede aplicar.
 El resultado del sort no se puede mostrar hasta que no se hayan procesado
 todas las tuplas.
\end_layout

\begin_layout Itemize

\emph on
Join
\emph default
: el método GRACE no se puede aplicar porque requiere leer y particionar
 todas las tuplas antes de que pueda producirse un resultado.
 Sin embargo, el método 
\emph on
indexed nested-loop
\emph default
 puede aprovechar del 
\emph on
pipelining.
 
\emph default
Si las relaciones están ordenadas por los atributos de join, merge join
 también puede aprovechar del 
\emph on
pipelining.
\end_layout

\begin_layout Section
Optimización de consultas
\end_layout

\begin_layout Description
Plan
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

evaluación conjunto de operaciones de álgebra relacional a ejecutar, junto
 con las instrucciones para llevarlas a cabo (por ejemplo, los índices a
 usar).
\end_layout

\begin_layout Description
Optimización
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

consultas proceso de seleccionar el mejor plan de evaluación.
 El costo de cada plan se evalúa teniendo en cuenta información estadística
 de las relaciones.
 Lo que se busca minimizar es la cantidad de transferencias de bloques del
 disco a la memoria y la cantidad de 
\emph on
seeks
\emph default
 que se hacen en el disco.
 
\end_layout

\begin_deeper
\begin_layout Standard
Para ello se tiene en cuenta:
\end_layout

\begin_layout Enumerate
¿Cuál de la de las expresiones equivalentes a la consulta es más eficiente
 para resolver la misma?
\end_layout

\begin_layout Enumerate
¿Qué algoritmo se utilizará para implementar la operación?
\end_layout

\begin_layout Enumerate
¿Cómo deberían las operaciones pasarse datos entre sí? (
\emph on
Pipeline
\emph default
, buffers de memoria, disco)
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

EXPLAIN consulta
\end_layout

\end_inset

 
\end_layout

\begin_layout Subsection
Reglas de equivalencia
\end_layout

\begin_layout Standard
Reglas relacionadas con la selección:
\end_layout

\begin_layout Enumerate
\begin_inset Formula $\sigma_{a\wedge b}(r)=\sigma_{a}\left(\sigma_{b}(r)\right)=\sigma_{b}\left(\sigma_{a}(r)\right)$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $\sigma_{a\vee b}(r)=\sigma_{a}(r)\cup\sigma_{b}(r)$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $\sigma_{a}(r\cup s)=\sigma_{a}(r)\cup\sigma_{a}(s)$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $\sigma_{a}(r-s)=\sigma_{a}(r)-s=\sigma_{a}(r)-\sigma_{a}(s)$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $\sigma_{a}(r\bowtie s)=\sigma_{a}(r)\bowtie\sigma_{a}(s)$
\end_inset


\end_layout

\begin_layout Enumerate
Si 
\begin_inset Formula $a$
\end_inset

 solo tiene atributos de 
\begin_inset Formula $S$
\end_inset

: 
\begin_inset Formula $\sigma_{a}(r\times s)=r\times\sigma_{a}(s)$
\end_inset


\end_layout

\begin_layout Standard
Reglas relacionadas con la proyección:
\end_layout

\begin_layout Enumerate
\begin_inset Formula $\pi_{L}(R\cup S)=\pi_{L}(R)\cup\pi_{L}(S)$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $\pi_{L}\left(\sigma_{a}(R)\right)=\pi_{L}\left(\sigma_{a}\left(\left(\pi_{M}(R)\right)\right)\right)$
\end_inset

 donde 
\begin_inset Formula $M$
\end_inset

 es la lista de atributos que figuran en 
\begin_inset Formula $L$
\end_inset

 o en 
\begin_inset Formula $a$
\end_inset


\end_layout

\begin_layout Standard
Reglas relacionadas con el 
\emph on
join
\emph default
:
\end_layout

\begin_layout Enumerate
\begin_inset Formula $r_{1}\bowtie r_{2}=r_{2}\bowtie r_{1}$
\end_inset


\end_layout

\begin_layout Enumerate
\begin_inset Formula $\left(r_{1}\bowtie r_{2}\right)\bowtie r_{3}=r_{1}\bowtie\left(r_{2}\bowtie r_{3}\right)$
\end_inset


\end_layout

\begin_layout Subsection
Heurísticas de optimización de consultas
\end_layout

\begin_layout Enumerate
Ejecutar las selecciones 
\begin_inset Formula $(\sigma)$
\end_inset

 lo antes posible 
\end_layout

\begin_layout Enumerate
Ejecutar las proyecciones 
\begin_inset Formula $(\pi)$
\end_inset

 lo antes posible
\end_layout

\begin_layout Enumerate
El orden de las operaciones de 
\emph on
join
\emph default
 
\begin_inset Formula $(\bowtie)$
\end_inset

 es importante
\end_layout

\begin_layout Enumerate
Evitar cuando sea posible los productos cartesianos 
\begin_inset Formula $(\times)$
\end_inset


\end_layout

\begin_layout Section
Estimación de tamaño de consultas
\end_layout

\begin_layout Standard
A continuación se describe la estimación de cantidad de tuplas para cada
 tipo de consulta.
 
\end_layout

\begin_layout Standard
Se utiliza el concepto de 
\series bold
selectividad
\series default
 de una condición 
\begin_inset Formula $A$
\end_inset

 como la 
\begin_inset Quotes eld
\end_inset

probabilidad de que una tupla satisfaga una condición 
\begin_inset Formula $A$
\end_inset


\begin_inset Quotes erd
\end_inset

.
 Sea 
\begin_inset Formula $s_{i}=V(\sigma_{i},r)$
\end_inset

 la cantidad de tuplas que satisfacen la condición 
\begin_inset Formula $\sigma_{i}$
\end_inset

.
 La probabilidad de satisfacer 
\begin_inset Formula $\sigma_{i}$
\end_inset

 es 
\begin_inset Formula $\frac{s_{i}}{n_{r}}$
\end_inset

.
\end_layout

\begin_layout Itemize
Selección
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $\sigma_{A=a}(r)$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Si 
\begin_inset Formula $A$
\end_inset

 distribuye uniformemente: 
\begin_inset Formula $\frac{n_{r}}{V(A,r)}$
\end_inset


\end_layout

\begin_layout Itemize
Si se dispone de un histograma para 
\begin_inset Formula $A$
\end_inset

, y 
\begin_inset Formula $a\in rango$
\end_inset

: 
\begin_inset Formula $\frac{freq_{rango}(A,r)}{cant_{rangos}}$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $\sigma_{A\leq v}(r)$
\end_inset

 con 
\begin_inset Formula $v$
\end_inset

 conocido
\end_layout

\begin_deeper
\begin_layout Itemize
Si 
\begin_inset Formula $A$
\end_inset

 distribuye uniformemente y 
\begin_inset Formula $v<\min(A,r)$
\end_inset

: 
\begin_inset Formula $0$
\end_inset


\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $A$
\end_inset

 distribuye uniformemente y 
\begin_inset Formula $v\geq\max(A,r)$
\end_inset

: 
\begin_inset Formula $n_{r}$
\end_inset


\end_layout

\begin_layout Itemize
En cualquier otro caso: 
\begin_inset Formula $n_{r}\cdot\frac{v-min(A,r)}{max(A,r)-min(A,r)}$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $\sigma_{a\wedge b\wedge\cdots\wedge z}(r)$
\end_inset

 donde hay 
\begin_inset Formula $x$
\end_inset

 selectores: 
\begin_inset Formula $n_{r}\times P(a)\times\cdots\times P(z)=n_{r}\cdot\frac{s_{a}\cdot s_{b}\cdots s_{z}}{\left(n_{r}\right)^{x}}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $\sigma_{a\lor b\lor\cdots\lor z}(r)$
\end_inset

 donde hay 
\begin_inset Formula $x$
\end_inset

 selectores independientes entre sí: 
\begin_inset Formula 
\[
n_{r}\times\left[P(a)+\cdots+P(z)\right]=n_{r}\cdot\left[1-\left(1-\frac{s_{a}}{n_{r}}\right)\times\cdots\times\left(1-\frac{s_{z}}{n_{r}}\right)\right]
\]

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $\sigma_{\lnot a}(r)$
\end_inset

: 
\begin_inset Formula $n_{r}-V(a,r)$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Junta natural
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Se introducen dos simplificaciones:
\end_layout

\begin_layout Enumerate
Si 
\begin_inset Formula $R(X,Y)$
\end_inset

 y 
\begin_inset Formula $S(Y,Z)$
\end_inset

, y 
\begin_inset Formula $V(R,Y)\leq V(S,Y)$
\end_inset

 entonces cada valor de 
\begin_inset Formula $Y$
\end_inset

 en 
\begin_inset Formula $R$
\end_inset

 será un valor de 
\begin_inset Formula $Y$
\end_inset

 en 
\begin_inset Formula $S$
\end_inset

.
\end_layout

\begin_layout Enumerate
Si 
\begin_inset Formula $A$
\end_inset

 es un atributo de 
\begin_inset Formula $R$
\end_inset

 pero no de 
\begin_inset Formula $S$
\end_inset

, 
\begin_inset Formula $V\left(R\bowtie S,A\right)=v\left(R,A\right)$
\end_inset


\end_layout

\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Si 
\begin_inset Formula $R\cap S=\emptyset$
\end_inset

: 
\begin_inset Formula $n_{r}\times n_{s}$
\end_inset


\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $R\cap S=PK_{R}:$
\end_inset

 
\begin_inset Formula $\leq n_{S}$
\end_inset

 (porque podría haber 
\emph on
nulls
\emph default
)
\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $R\cap S=PK_{S}:$
\end_inset

 
\begin_inset Formula $\leq n_{R}$
\end_inset

 (porque podría haber 
\emph on
nulls
\emph default
)
\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $R\cap S=FK_{S}:$
\end_inset

 
\begin_inset Formula $n_{S}$
\end_inset


\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $R\cap S=FK_{R}:$
\end_inset

 
\begin_inset Formula $n_{R}$
\end_inset


\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $\#(R\cap S)=1$
\end_inset

: 
\begin_inset Formula $\frac{n_{s}\times n_{r}}{\max\left(V(S,R\cap S),V(R,R\cap S)\right)}\approx\frac{n_{s}\times n_{r}}{V(S,R\cap S)}\approx\frac{n_{s}\times n_{r}}{V(R,R\cap S)}$
\end_inset


\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $\#(R\cap S)=2$
\end_inset

 y el 
\emph on
join
\emph default
 es de tipo 
\begin_inset Formula $R.A_{1}=S.A_{2}\wedge R.B_{1}=S.B_{2}$
\end_inset

: 
\begin_inset Formula 
\[
\frac{n_{r}\times n_{s}}{\max\left(V(R,A_{1}),V(S,A_{2}\right)\times\max\left(V(R,B_{1}),V(S,B_{2})\right)}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Proyección: 
\begin_inset Formula $\pi_{A}(r):$
\end_inset

 
\begin_inset Formula $V(A,r)$
\end_inset


\end_layout

\begin_layout Itemize
Agregación 
\begin_inset Formula $_{A}\varrho_{f}(r):$
\end_inset

 
\begin_inset Formula $V(A,r)$
\end_inset


\end_layout

\begin_layout Itemize
Unión 
\begin_inset Formula $R\cup S$
\end_inset

: 
\begin_inset Formula $n_{r}+n_{s}$
\end_inset


\end_layout

\begin_layout Itemize
Intersección 
\begin_inset Formula $R\cap S:$
\end_inset

 
\begin_inset Formula $\min\left(n_{r},n_{s}\right)$
\end_inset

 (cota superior)
\end_layout

\begin_layout Itemize
Diferencia 
\begin_inset Formula $R-S:$
\end_inset

 
\begin_inset Formula $r$
\end_inset

 (cota superior)
\end_layout

\begin_layout Itemize
\begin_inset Formula $V\left(A,\sigma_{A\, op\, v}(r)\right):$
\end_inset

 
\begin_inset Formula $V(A,r)\times s_{A\, op\, v}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $V\left(A,r\bowtie s\right):$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
Si 
\begin_inset Formula $A\in R$
\end_inset

: 
\begin_inset Formula $\min\left(V(A,r),n_{r\bowtie s}\right)$
\end_inset


\end_layout

\begin_layout Itemize
Si 
\begin_inset Formula $a_{1}\in A$
\end_inset

 y 
\begin_inset Formula $a_{2}\in A$
\end_inset

, 
\begin_inset Formula $\min\left(V(a_{1},r)\times V(a_{2}-a_{1},s);V(a_{1}-a_{2},r)\times V(a_{2},S);n_{r\bowtie s}\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
Cálculo de juntas con histogramas
\end_layout

\begin_layout Standard
Un sistema de bases de datos puede computar un histograma de valores para
 un atributo dado.
 Si 
\begin_inset Formula $V(R,A)$
\end_inset

 no es muy grande, el histograma puede consistir de la cantidad de tuplas
 que tienen cada posible valor del atributo.
 Si 
\begin_inset Formula $V(R,A)$
\end_inset

 es muy grande, entonces podría guardarse solamente los valores más frecuentes,
 o agruparlos en rangos.
\end_layout

\begin_layout Standard
Los tipos de histogramas más frecuentes son:
\end_layout

\begin_layout Enumerate

\series bold
Igual ancho:
\series default
 se escoge un ancho 
\begin_inset Formula $w$
\end_inset

 y una constante 
\begin_inset Formula $v_{0}$
\end_inset

.
 Se almacena la cantidad de tuplas con valores 
\begin_inset Formula $v$
\end_inset

 en los rangos
\emph on
 
\begin_inset Formula $v_{0}\leq v<v_{0}+w,$
\end_inset

 
\begin_inset Formula $v_{0}+w\leq v<v_{0}+2w$
\end_inset


\emph default
, etcétera
\emph on
.
\end_layout

\begin_layout Enumerate

\series bold
Valores más frecuentes
\series default
: se listan los valores más frecuentes y la cantidad de tuplas que tienen
 esos valores.
 También se puede proporcionar la cantidad de tuplas que tienen 
\begin_inset Quotes eld
\end_inset

otros
\begin_inset Quotes erd
\end_inset

 valores.
\end_layout

\begin_layout Standard

\emph on
\bar under
Ejemplo
\bar default
: sea la junta 
\begin_inset Formula $R(A,B)\bowtie S(B,C)$
\end_inset

.
 Sabemos que 
\begin_inset Formula $V(R,B)=14$
\end_inset

 y que 
\begin_inset Formula $V(S,B)=13$
\end_inset

.
 Tenemos los histogramas de valores más frecuentes para 
\begin_inset Formula $R\cap S=B$
\end_inset

.
\end_layout

\begin_layout Standard
\noindent
\align center

\emph on
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="6">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Quotes eld
\end_inset

Otros
\begin_inset Quotes erd
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $R.B$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
150
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
200
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
?
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
550 (11 valores)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $S.B$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
80
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
70
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
?
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
250 (10 valores)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\emph on
Suponemos que cada valor que aparece en la relación con menos valores de
 
\begin_inset Formula $B$
\end_inset

 (en este caso, 
\begin_inset Formula $S$
\end_inset

) también aparecen en la otra relación (en este caso, 
\begin_inset Formula $R$
\end_inset

).
 También suponemos que la distribución de los valores dentro de 
\begin_inset Quotes eld
\end_inset

Otros
\begin_inset Quotes erd
\end_inset

 es uniforme, y estimamos la frecuencia de los datos desconocidos:
\end_layout

\begin_layout Standard
\noindent
\align center

\emph on
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="6">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Otros
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $R.B$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
150
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
200
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $\frac{550}{11}=50$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
550 (10 valores)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $S.B$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
80
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
70
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
\begin_inset Formula $\frac{250}{10}=25$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
250 (9 valores)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\emph on
Entonces, el tamaño de la junta es:
\end_layout

\begin_layout Standard

\emph on
\begin_inset Formula 
\begin{eqnarray*}
T\left[R\bowtie S\right] & = & T\left[R\bowtie_{B=0}S\right]+T\left[R\bowtie_{B=1}S\right]+T\left[R\bowtie_{B=2}S\right]T\left[R\bowtie_{B=5}S\right]+T\left[R\bowtie_{B\neq0,1,2,5}S\right]\\
 & = & \left(150\times100\right)+\left(200\times80\right)+\left(50\times70\right)+\left(100\times25\right)+\min(9,10)\times\left(\frac{550}{11}\times\frac{250}{10}\right)\\
 & = & 15.000+16.000+3.500+2.500+9\times1250\\
 & = & 48.250
\end{eqnarray*}

\end_inset


\end_layout

\begin_layout Standard

\emph on
\bar under
Ejemplo
\bar default
: sean las relaciones 
\begin_inset Formula $Enero(dia,temp)$
\end_inset

 y 
\begin_inset Formula $Julio(dia,temp)$
\end_inset

.
 Sea la consulta
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT Enero.dia, Julio.dia
\end_layout

\begin_layout Plain Layout

FROM Enero, Julio
\end_layout

\begin_layout Plain Layout

WHERE Enero.temp = Julio.temp
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\emph on
Suponer los siguientes histogramas de igual ancho:
\end_layout

\begin_layout Standard
\noindent
\align center

\emph on
\begin_inset Tabular
<lyxtabular version="3" rows="11" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Rango C°
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Enero
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Julio
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
-17, -13
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
40
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
-13, -9
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
60
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
-8, -4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
80
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
-3, 1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
50
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
2, 6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
10
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
7, 11
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
20
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
5
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
12, 16
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
50
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
17, 21
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
22, 26
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
60
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
0
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
27, 31
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
10
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
0
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\emph on
Sabemos que si dos bandas tienen 
\begin_inset Formula $T_{1}$
\end_inset

 y 
\begin_inset Formula $T_{2}$
\end_inset

 tuplas respectivamente, y la cantidad de valores de la banda es 
\begin_inset Formula $V$
\end_inset

, entonces la estimación del tamaño de la junta es 
\begin_inset Formula $\frac{T_{1}T_{2}}{V}$
\end_inset

.
\end_layout

\begin_layout Standard

\emph on
En el ejemplo anterior, las únicas bandas que contribuyen al resultado son
 las de [2,6] y [7,11].
 Entonces, el tamaño de la junta es:
\end_layout

\begin_layout Standard

\emph on
\begin_inset Formula 
\begin{eqnarray*}
T\left[R\bowtie S\right] & = & T\left[R\bowtie_{temp\in[2,6]}S\right]+T\left[R\bowtie_{temp\in[7,11]}S\right]\\
 & = & \frac{5\times10}{4}+\frac{20\times5}{4}\\
 & = & 12,5+25\\
 & = & 37,5
\end{eqnarray*}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Part
Control de Concurrencia
\end_layout

\begin_layout Description
Ítem
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

dato elemento al que accede una transacción.
 Puede ser un registro de una base de datos, un bloque de disco, un campo
 de un registro, o incluso toda la base de datos.
 Cada ítem tiene un nombre único que lo identifica (por ejemplo, la dirección
 física de un bloque de disco).
 
\end_layout

\begin_layout Description
Modelo
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

concurrencia
\begin_inset space ~
\end_inset

intercalada la CPU ejecuta una transacción a la vez, pero varias transacciones
 en un período de tiempo.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/transaction_manager.png
	scale 70

\end_inset


\begin_inset Graphics
	filename img/scheduler.png
	scale 80

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
El manejador de transacciones (a) le emite órdenes al manejador del log,
 (b) se asegura que transacciones concurrentes no interfieran entre ellas.
 El scheduler permite o bloquea transacciones
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Transacciones
\end_layout

\begin_layout Description
Transacción unidad lógica de procesamiento.
 Está formada por una o más operaciones que acceden a la base de datos.
 Tiene un identificador único de transacción.
 
\end_layout

\begin_deeper
\begin_layout Standard
Debe tener las siguientes propiedades 
\series bold
ACID
\series default
:
\end_layout

\begin_layout Description
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="middle">
<column alignment="center" valignment="middle" width="7cm">
<column alignment="center" valignment="middle" width="5cm">
<row>
<cell alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Atomicity
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
La transacción debe ejecutarse en su totalidad o no debe ejecutarse
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Responsabilidad del gestor de recuperación, que mantiene un log donde guarda
 los valores viejos sobrescritos por una transacción
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Consistency
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
La transacción debe llevar a la base de datos de un estado consistente a
 otro (i.e.
 que respeten las reglas de integridad de la base de datos)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="middle" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Responsabilidad de los programadores
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Isolation
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
La ejecución de una transacción no debe interferir con otras
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="middle" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Responsabilidad del gestor de concurrencia
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Durability
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Los efectos de una transacción commiteada deben persistir en la base de
 datos.
 Es decir, luego de commiteada, no deberíamos necesitar ejecutar un 
\emph on
rollback
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Gestor de recuperación, que debe garantizar que el log esté en disco antes
 de que termine la transacción
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\emph on
How transactions interact with the database.
 There are three address spaces that interact in important ways: 
\end_layout

\begin_layout Enumerate

\emph on
The space of disk blocks holding the database elements.
\end_layout

\begin_layout Enumerate

\emph on
The virtual or main memory address space that is managed by the buffer manager.
\end_layout

\begin_layout Enumerate

\emph on
The local address space of the transaction.
\end_layout

\begin_layout Standard
Cada transacción está formada por una o más operaciones:
\end_layout

\begin_layout Itemize

\family typewriter
\series bold
start
\end_layout

\begin_layout Itemize

\family typewriter
\series bold
leer(X)
\family default
\series default
: lee un item de dato de la base de datos a una variable local a la transacción,
 que está en memoria
\end_layout

\begin_layout Itemize

\family typewriter
\series bold
escribir(X)
\family default
\series default
: escribe una variable de programa en memoria, en la base de datos
\end_layout

\begin_layout Itemize

\family typewriter
\series bold
commit
\family default
\series default
: marca el fin exitoso de una transacción.
 Los cambios que introdujo son seguros para guardar en la base de datos.
\end_layout

\begin_layout Itemize

\family typewriter
\series bold
abort
\family default
\series default
: marca el fin con errores de una transacción.
 Los cambios que introdujo se deben revertir.
\end_layout

\begin_layout Standard
Estados posibles de una transacción:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Partially committed
\series default
\emph default
: luego de que se ejecutó la última instrucción pero antes de ejecutar el
 
\emph on
commit
\emph default
 o 
\emph on
abort
\end_layout

\begin_layout Itemize

\series bold
\emph on
Commited
\series default
\emph default
: sus efectos fueron almacenados permanentemente en la base de datos
\end_layout

\begin_layout Itemize

\series bold
\emph on
Aborted
\series default
\emph default
: se ejecutó un 
\emph on
roll back
\emph default
 de la transacción y la base de datos se restauró a su estado original
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/state_diagram_transaction.PNG
	scale 80

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diagrama de estados de una transacción
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
Una transacción llega al 
\series bold
punto de commit
\series default
 cuando todas sus operaciones se ejecutaron correctamente y se grabaron
 todos sus registros de operaciones en el log.
 Luego de este punto, la transacción está 
\series bold
commiteada
\series default
 y se debe almacenar permanentemente en la base de datos.
 Esto se marca agregando un registro 
\family typewriter
[commit,T]
\family default
 en el log.
\end_layout

\begin_layout Enumerate
Si ocurre una falla y la transacción aún no grabó 
\family typewriter
[commit,T]
\family default
, se debe ejecutar un 
\emph on
rollback
\emph default
 de esta transacción.
\end_layout

\begin_layout Enumerate
Si ocurre una falla y la transacción ya había grabado 
\family typewriter
[commit,T]
\family default
 en el log, se debe 
\emph on
rehacer
\emph default
 esta transacción.
\end_layout

\begin_layout Standard
El protocolo 
\series bold
WAL (
\emph on
Write-Ahead Logging
\emph default
)
\series default
 indica que antes de commitear una transacción se debe guardar el log en
 memoria al log en disco.
\end_layout

\end_deeper
\begin_layout Section
Problemas de Concurrencia
\end_layout

\begin_layout Enumerate

\series bold
\emph on
The Lost Update Problem
\series default
\emph default
: una 
\family typewriter
Escritura
\family default
 que sobrescribe a otra.
\end_layout

\begin_layout Enumerate

\series bold
\emph on
The Dirty Read Problem
\series default
\emph default
: una 
\family typewriter
Lectura
\family default
 de un valor incorrecto.
\end_layout

\begin_layout Enumerate

\series bold
\emph on
The Incorrect Summary Problem
\series default
\emph default
: una 
\family typewriter
Lectura
\family default
 de muchos valores incorrectos.
\end_layout

\begin_layout Enumerate

\series bold
\emph on
The Unrepeatable Read Problem
\series default
\emph default
: dos 
\family typewriter
Lectura
\family default
s consecutivas que producen resultados distintos, por haber una transacción
 intermedia que cambió el valor.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/problem_lost_update.PNG
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Lost Update
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/problem_dirty_read.PNG
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Dirty Read
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/problem_incorrect_summary.PNG
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Incorrect Summary
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Probemas de concurrencia
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
Atributos de una Transacción
\end_layout

\begin_layout Itemize
Modo de acceso: 
\family typewriter
READ ONLY
\family default
, 
\family typewriter
READ WRITE
\end_layout

\begin_layout Itemize
Nivel de 
\emph on
isolation
\emph default
:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top" width="2cm">
<column alignment="center" valignment="top" width="3cm">
<column alignment="center" valignment="top" width="3cm">
<column alignment="center" valignment="top" width="3cm">
<column alignment="center" valignment="top" width="3cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Nivel de isolation
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Tipo de violación que se puede producir para dos transacciones 
\begin_inset Formula $T$
\end_inset

 y 
\begin_inset Formula $S$
\end_inset


\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Escritura sucia
\series default
 (
\begin_inset Formula $T$
\end_inset

 escribe el valor 
\begin_inset Formula $X$
\end_inset

 después de que una transacción 
\begin_inset Formula $S$
\end_inset

 lo escribiera, y 
\begin_inset Formula $S$
\end_inset

 no comitió ni abortó)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Lectura Sucia
\series default
 (
\begin_inset Formula $T$
\end_inset

 lee el valor
\begin_inset Formula $X$
\end_inset

 después de una transacción 
\begin_inset Formula $S$
\end_inset

 que no comitió ni abortó)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Lectura No Repetible
\series default
 (
\begin_inset Formula $T$
\end_inset

 lee el valor 
\begin_inset Formula $X$
\end_inset

, luego 
\begin_inset Formula $S$
\end_inset

 lo actualiza, luego 
\begin_inset Formula $T$
\end_inset

 lee 
\begin_inset Formula $X$
\end_inset

 y es un nuevo valor)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
Phantoms
\series default
\emph default
 (
\begin_inset Formula $T$
\end_inset

 lee varios datos que cumplen una condición, luego 
\begin_inset Formula $S$
\end_inset

 agrega un dato que también lo verifica.
 Si 
\begin_inset Formula $T$
\end_inset

 lee de nuevo, encontrará un nuevo dato que antes no estaba)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
READ UNCOMMITTED
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Si
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Si
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Si
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
READ COMMITTED
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Si
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Si 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
REPEATABLE READ
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Si
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
SERIALIZABLE
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Violaciones que se pueden producir en cada nivel
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Section
Schedules de Transacciones
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/schedules_equivalentes.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\emph on
Schedules
\emph default
 equivalentes
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/schedule_no_recuperable.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\emph on
Schedule
\emph default
 no recuperable
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Description

\emph on
Schedule
\emph default
 ordenamiento cronológico de las operaciones de 
\begin_inset Formula $n$
\end_inset

 transacciones.
 Se pueden intercalar operaciones de distintas transacciones, pero las operacion
es de una transacción se deben ejecutar en forma secuencial.
\end_layout

\begin_deeper
\begin_layout Standard
Un 
\emph on
schedule
\emph default
 es 
\series bold
recuperable
\series default
 si, para cada par de transacciones 
\begin_inset Formula $T_{i}$
\end_inset

 y 
\begin_inset Formula $T_{j}$
\end_inset

 tal que 
\begin_inset Formula $T_{j}$
\end_inset

 lee un ítem de dato previamente escrito por 
\begin_inset Formula $T_{i}$
\end_inset

, el 
\family typewriter
commit
\family default
 de 
\begin_inset Formula $T_{i}$
\end_inset

 aparece 
\emph on
antes
\emph default
 del 
\family typewriter
commit
\family default
 de 
\begin_inset Formula $T_{j}$
\end_inset

.
 
\end_layout

\begin_layout Standard
Un 
\emph on
schedule
\series bold
\emph default
 
\series default
es
\series bold
 sin cascada
\series default
 (
\series bold
\emph on
avoids cascading rollback
\emph default
, AVR
\series default
) si, para cada par de transacciones 
\begin_inset Formula $T_{i}$
\end_inset

 y 
\begin_inset Formula $T_{j}$
\end_inset

 tal que 
\begin_inset Formula $T_{j}$
\end_inset

 lee un ítem de dato previamente escrito por 
\begin_inset Formula $T_{i}$
\end_inset

, el 
\family typewriter
commit
\family default
 de 
\begin_inset Formula $T_{i}$
\end_inset

 aparece 
\emph on
antes
\emph default
 del 
\family typewriter
read
\family default
 de 
\begin_inset Formula $T_{j}$
\end_inset

.
 
\end_layout

\begin_layout Standard
Un 
\emph on
schedule
\emph default
 que usa 
\emph on
locks 
\emph default
es 
\series bold
estricto
\series default
 si cada transacción commitea o aborta, y luego libera todos sus 
\emph on
locks
\emph default
 exclusivos.
\end_layout

\begin_layout Standard
\noindent
\align center
estricto 
\begin_inset Formula $\implies$
\end_inset

sin cascada 
\begin_inset Formula $\implies$
\end_inset

recuperable
\end_layout

\begin_layout Standard
\noindent
\align center
estricto 
\begin_inset Formula $\implies$
\end_inset

serializable
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/relacion_schedules.PNG
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Relación de 
\emph on
schedules
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Description
Conflicto dos 
\emph on
operaciones
\emph default
 en un 
\emph on
schedule
\emph default
 entran en conflicto cuando se cumplen todas las condiciones siguientes:
\end_layout

\begin_deeper
\begin_layout Enumerate
Corresponden a distintas transacciones
\end_layout

\begin_layout Enumerate
Acceden al mismo ítem de dato 
\begin_inset Formula $X$
\end_inset


\end_layout

\begin_layout Enumerate
Al menos una de esas operaciones es 
\family typewriter
escribir(X)
\end_layout

\begin_layout Standard
Dicho de otra forma, están en conflicto cuando, si alteramos el orden de
 ejecución, cambia el resultado final de 
\begin_inset Formula $X$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Standard
Un schedule es 
\series bold
serial
\series default
 cuando ejecuta primero todas las operaciones de 
\begin_inset Formula $T_{1}$
\end_inset

, luego todas las operaciones de 
\begin_inset Formula $T_{2}$
\end_inset

, ..., y finalmente todas las operaciones de 
\begin_inset Formula $T_{n}$
\end_inset

.
 Cualquier esquema serial preserva la consistencia de la base de datos.
\end_layout

\begin_layout Standard
Un 
\emph on
schedule
\emph default
 es 
\series bold
serializable
\series default
 cuando es equivalente a algún 
\emph on
schedule
\emph default
 serial con las mismas transacciones.
\end_layout

\begin_layout Standard
Dos 
\emph on
schedules
\emph default
 son 
\series bold
conflicto-equivalentes
\series default
 si el orden de las operaciones en conflicto es la misma en ambos.
 Es decir, si podemos transformar uno en el otro mediante una secuencia
 de 
\emph on
swaps
\emph default
 de acciones adyacentes que no están en conflicto.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/conflicto_serializable.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Convirtiendo un schedule conflicto-serializable en uno serial mediante 
\emph on
swaps
\emph default
 de acciones adyacentes.
 A cada paso están subrayadas las acciones a punto de ser 
\emph on
swappeadas
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Un 
\emph on
schedule
\emph default
 es 
\series bold
conflicto-serializable
\series default
 si es conflicto-equivalente a algún 
\emph on
schedule
\emph default
 serial.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Conflicto\, serializable\implies Serializable
\]

\end_inset


\end_layout

\begin_layout Standard
Para verificar si un 
\emph on
schedule 
\begin_inset Formula $S$
\end_inset

 
\emph default
es conflicto-serializable se utiliza un grafo dirigido 
\begin_inset Formula $G=(N,E)$
\end_inset

:
\end_layout

\begin_layout Itemize
\begin_inset Formula $N$
\end_inset

 es el conjunto de transacciones 
\begin_inset Formula $\left\{ T_{1},T_{2},\ldots,T_{n}\right\} $
\end_inset

 que forman el 
\emph on
schedule
\end_layout

\begin_layout Itemize
\begin_inset Formula $E$
\end_inset

 es el conjunto de aristas de la forma 
\begin_inset Formula $T_{i}\to T_{j}$
\end_inset

.
 Cada arista significa que 
\begin_inset Formula $T_{i}$
\end_inset

 debe preceder a 
\begin_inset Formula $T_{j}$
\end_inset

 en cualquier 
\emph on
schedule
\emph default
 serial equivalente a 
\begin_inset Formula $S$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

Entrada: schedule S
\end_layout

\begin_layout Plain Layout

Salida: "verdadero" si es conflicto serializable
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	para cada transaccion Ti en S:
\end_layout

\begin_layout Plain Layout

		crear un nodo Ti en el grafo de precedencia
\end_layout

\begin_layout Plain Layout

	para cada caso donde Ti ejecuta READ(X) y luego Tj ejecuta WRITE(X):
\end_layout

\begin_layout Plain Layout

		agregar una arista (Ti -> Tj) en el grafo de precedencia
\end_layout

\begin_layout Plain Layout

	para cada caso donde Ti ejecuta WRITE(X) y luego Tj ejecuta READ(X):
\end_layout

\begin_layout Plain Layout

		agregar una arista (Ti -> Tj) en el grafo de precedencia
\end_layout

\begin_layout Plain Layout

	para cada caso donde Ti ejecuta WRITE(X) y luego Tj ejecuta WRITE(X):
\end_layout

\begin_layout Plain Layout

		agregar una arista (Ti -> Tj) en el grafo de precedencia
\end_layout

\begin_layout Plain Layout

	
\end_layout

\begin_layout Plain Layout

	si el grafo es aciclico:
\end_layout

\begin_layout Plain Layout

		devolver "verdadero"
\end_layout

\begin_layout Plain Layout

	si el gafo es ciclico:
\end_layout

\begin_layout Plain Layout

		devolver "falso"
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Verificación de serializabilidad de un 
\emph on
schedule
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Si el grafo de precedencia es acíclico, el 
\emph on
schedule
\emph default
 serial equivalente puede construirse utilizando un 
\series bold
orden topológico 
\series default
de la siguiente forma: siempre que exista una arista 
\begin_inset Formula $T_{i}\to T_{j}$
\end_inset

, 
\begin_inset Formula $T_{i}$
\end_inset

 debe preceder a 
\begin_inset Formula $T_{j}$
\end_inset

 en el 
\emph on
schedule 
\emph default
serial.
\end_layout

\begin_layout Standard
En la práctica, los DBMS no utilizan este algoritmo para garantizar la serializa
bilidad (porque habría que verificarlo para cada 
\emph on
schedule
\emph default
).
\end_layout

\begin_layout Section
Protocolos de Control de Concurrencia: Protocolo de Locking
\end_layout

\begin_layout Standard
Una forma de garantizar el aislamiento de transacciones y prevenir comportamient
o no serializable es mediante el uso de 
\emph on
locks
\emph default
.
 Notar que este mecanismo no funciona bien cuando los 
\emph on
locks
\emph default
 se mantienen durante días, o cuando las decisiones humanas son parte de
 una transacción.
\end_layout

\begin_layout Description

\emph on
Lock
\emph default
 variable que se asocia a un ítem de dato.
 Describe el estado del ítem con respecto a las posibles operaciones que
 pueden aplicarse a el.
 Generalmente hay un 
\emph on
lock
\emph default
 por item de dato.
\end_layout

\begin_deeper
\begin_layout Standard
Tipos de 
\emph on
locks
\emph default
:
\end_layout

\begin_layout Enumerate

\series bold
Binarios
\series default
: pueden tener dos valores: 
\emph on
locked
\emph default
 (1) o 
\emph on
unlocked
\emph default
 (0).
 Un 
\emph on
lock
\emph default
 binario impone la exclusión mutua en el item de dato asociado, porque solo
 puede haber a lo sumo una transacción con un lock para un mismo dato.
\end_layout

\begin_deeper
\begin_layout Standard
El registro de este tipo de 
\emph on
lock
\emph default
 tiene la forma 
\family typewriter
<Item de dato, LOCK, Transacción con lock>
\end_layout

\begin_layout Standard
Reglas que deben aplicarse a cada transacción:
\end_layout

\begin_layout Enumerate

\family typewriter
lock(X)
\family default
 antes de cualquier
\family typewriter
 leer(X) 
\family default
o
\family typewriter
 escribir(X)
\end_layout

\begin_layout Enumerate

\family typewriter
unlock(X)
\family default
 después de 
\series bold
todos
\series default
 los 
\family typewriter
leer(X)
\family default
 y 
\family typewriter
escribir(X)
\end_layout

\begin_layout Enumerate
no se permite ejecutar 
\family typewriter
lock(X)
\family default
 si ya se tiene un 
\emph on
lock
\emph default
 de X
\end_layout

\begin_layout Enumerate
no se permite ejecutar 
\family typewriter
unlock(X)
\family default
 si no se tiene el 
\emph on
lock
\emph default
 de X
\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
Compartidos/Exclusivos (Lectura/Escritura)
\series default
: es más laxo que los 
\emph on
locks
\emph default
 binarios porque permite que varias transacciones que solo van a ejecutar
 
\family typewriter
leer(X)
\family default
 tengan acceso a X.
 El 
\emph on
lock
\emph default
 puede tener dos valores: 
\emph on
read-locked 
\emph default
o 
\emph on
write-locked
\emph default
.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Lock exclusivo
\series default
: puede leer y escribir el dato 
\begin_inset Formula $X$
\end_inset

.
\end_layout

\begin_layout Itemize

\series bold
Lock compartido
\series default
: puede leer pero no puede escribir 
\begin_inset Formula $X$
\end_inset

.
\end_layout

\begin_layout Standard
El registro este tipo de 
\emph on
lock
\emph default
 tiene la forma 
\family typewriter
<Item de dato, LOCK, # de lecturas, Transaccion(es) con lock>
\end_layout

\begin_layout Standard
Reglas que deben aplicarse a cada transacción:
\end_layout

\begin_layout Enumerate

\family typewriter
read_lock(X)
\family default
 o 
\family typewriter
write_lock(X)
\family default
 antes de cualquier 
\begin_inset Formula $leer(X)$
\end_inset


\end_layout

\begin_layout Enumerate

\family typewriter
write_lock(X)
\family default
 antes de cualquier 
\begin_inset Formula $escribir(X)$
\end_inset


\end_layout

\begin_layout Enumerate
luego de todos los 
\begin_inset Formula $leer(X)$
\end_inset

 y 
\begin_inset Formula $escribir(X)$
\end_inset

, ejecutar 
\begin_inset Formula $unlock(X)$
\end_inset


\end_layout

\begin_layout Enumerate
si ya tiene un 
\emph on
lock
\emph default
 (compartido o exclusivo) de 
\begin_inset Formula $X$
\end_inset

, no se puede ejecutar ni 
\family typewriter
read_lock(X)
\family default
 ni 
\family typewriter
write_lock(X)
\end_layout

\begin_layout Enumerate
no se permite ejecutar 
\begin_inset Formula $unlock(X)$
\end_inset

 si no se tiene un 
\emph on
lock
\emph default
 de 
\begin_inset Formula $X$
\end_inset

 (compartido o exclusivo)
\end_layout

\end_deeper
\begin_layout Standard
Problemas con el uso de 
\emph on
locks
\emph default
:
\end_layout

\begin_layout Enumerate
El uso por sí solo de 
\emph on
locks
\emph default
 no garantiza la serializabilidad de 
\emph on
schedules
\emph default
.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/lock_serializability.PNG
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
El uso de 
\emph on
locks
\emph default
 no garantiza la serializabilidad.
 Si se produce una actualización a 
\begin_inset Formula $A$
\end_inset

 entre 
\begin_inset Formula $unlock(A)$
\end_inset

 y 
\begin_inset Formula $lock(B)$
\end_inset

, 
\series bold

\begin_inset Formula $A+B$
\end_inset

 
\series default
sería incorrecto
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
\emph on
Deadlock
\series default
\emph default
: ocurre cuando cada transacción en un 
\emph on
schedule
\emph default
 está esperando que se libere un 
\emph on
lock
\emph default
 que fue adquirido por otra transacción del 
\emph on
schedule.
\end_layout

\begin_deeper
\begin_layout Standard
Para detectar y/o prevenir un 
\emph on
deadlock
\emph default
, el gestor de concurrencia puede mantener un 
\series bold
grafo de espera
\series default
.
 Cuando una transacción 
\begin_inset Formula $T$
\end_inset

 está esperando a que la transacción 
\begin_inset Formula $S$
\end_inset

 libere un 
\emph on
lock
\emph default
, se dibuja una arista 
\begin_inset Formula $T\to S$
\end_inset

.
 Cuando 
\begin_inset Formula $S$
\end_inset

 libera el 
\emph on
lock
\emph default
, la arista se borra.
 El deadlock se detecta cuando el grafo es cíclico.
\end_layout

\begin_layout Standard
Cuando ocurre un 
\emph on
deadlock
\emph default
, el sistema debe ejecutar el 
\emph on
rollback
\emph default
 de alguna de las dos transacciones, y liberar los 
\emph on
locks
\emph default
 que ésta poseía.
\end_layout

\begin_layout Standard
También se pueden arreglar 
\emph on
deadlocks
\emph default
 especificando un 
\emph on
timeout
\emph default
 para cada transacción.
 Si se ejecutan por más tiempo que este 
\emph on
timeout
\emph default
, es abortada y sus 
\emph on
locks
\emph default
 se liberan.
\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
\emph on
Starvation
\series default
\emph default
: ocurre cuando una transacción se queda esperando indefinidamente a que
 se libere un 
\emph on
lock
\emph default
.
 Se puede evitar de la siguiente forma: cuando una transacción 
\begin_inset Formula $T_{i}$
\end_inset

 solicita un 
\emph on
lock
\emph default
 sobre 
\begin_inset Formula $X$
\end_inset

 en un modo 
\begin_inset Formula $M$
\end_inset

, el gestor de concurrencia se lo provee si se verifica que:
\end_layout

\begin_deeper
\begin_layout Enumerate
No hay otra transacción con un 
\emph on
lock 
\emph default
sobre 
\begin_inset Formula $X$
\end_inset

 en un modo que conflictúe con 
\begin_inset Formula $M$
\end_inset

.
\end_layout

\begin_layout Enumerate
No hay otra transacción esperando obtener un 
\emph on
lock 
\emph default
sobre 
\begin_inset Formula $X$
\end_inset

 antes que 
\begin_inset Formula $T_{i}$
\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Description
Lock
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

update un 
\emph on
lock
\emph default
 de 
\emph on
update
\emph default
 le da a una transacción el privilegio para leer 
\begin_inset Formula $X$
\end_inset

, pero 
\series bold
no 
\series default
para escribirlo.
 Sin embargo, este tipo de 
\emph on
lock 
\emph default
se puede actualizar a un 
\emph on
lock
\emph default
 exclusivo más tarde.
\end_layout

\begin_layout Description
Matriz
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

compatibilidad
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

locks se puede otorgar un 
\emph on
lock
\emph default
 de tipo 
\begin_inset Formula $C$
\end_inset

 si y solo si, para cada fila 
\begin_inset Formula $R$
\end_inset

 tal que ya se otorgó a otra transacción un lock de tipo 
\begin_inset Formula $R$
\end_inset

, hay un 
\begin_inset Quotes eld
\end_inset

Si
\begin_inset Quotes erd
\end_inset

 en la columna 
\begin_inset Formula $C$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="left" valignment="top" width="0pt">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Se solicita un lock de tipo....
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Exclusivo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Compartido
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Se otorgó un lock de tipo...
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Exclusivo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Compartido
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Si
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Para locks compartidos y exclusivos
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top" width="0pt">
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Se solicita un 
\emph on
lock
\emph default
 de tipo....
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Exclusivo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Compartido
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Actualización
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Se otorgó un 
\emph on
lock
\emph default
 de tipo...
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Exclusivo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Compartido
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Si
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Si
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Actualización
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Para locks compartidos, exclusivos y de actualización
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Ejemplos de matrices de compatibilidad
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Description

\emph on
Lock
\begin_inset space ~
\end_inset

table 
\emph default
tabla que utiliza el gestor de concurrencia para almacenar el estado de
 los 
\emph on
locks 
\emph default
activos.
\end_layout

\begin_deeper
\begin_layout Standard
Para cada ítem de dato con 
\emph on
locks
\emph default
 activos, mantiene una lista de transacciones que solicitaron el 
\emph on
lock
\emph default
, en el orden en que llegaron los pedidos.
 Se registra qué transacción es y qué modo de 
\emph on
lock 
\emph default
solicitó.
 También se registra si el 
\emph on
lock
\emph default
 le fue concedido.
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/lock_table.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\emph on
Lock table
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Protocolo de dos fases (
\emph on
two-phase locking)
\end_layout

\begin_layout Standard
Una transacción cumple con el protocolo 
\series bold
\emph on
two-phase locking
\emph default
 (2PL)
\series default
 si todas las operaciones de 
\emph on
lock
\emph default
 (
\family typewriter
read_lock
\family default
, 
\family typewriter
write_lock
\family default
) preceden al primer 
\emph on
unlock
\emph default
 de la transacción.
 Se dice entonces que la transacción se divide en dos fases: la creciente
 (donde se adquieren los 
\emph on
locks
\emph default
) y la decreciente (donde se liberan los 
\emph on
locks
\emph default
).
\end_layout

\begin_layout Standard
Si cada transacción de un 
\emph on
schedule
\emph default
 cumple el protocolo 2PL, se garantiza que el 
\emph on
schedule
\emph default
 es serializable.
 De hecho, las transacciones se pueden ordenar de acuerdo a sus 
\emph on
lock points
\emph default
 (el punto donde termina la fase creciente).
\end_layout

\begin_layout Standard
Este protocolo limita la cantidad de concurrencia que se permite, porque
 una transacción no puede liberar un 
\emph on
lock
\emph default
 hasta que haya adquirido un 
\emph on
lock
\emph default
 para todos los demás ítems, y entonces puede haber muchas otras transacciones
 esperando que se libere el primer 
\emph on
lock
\emph default
.
 Además, no se previene el 
\emph on
deadlock
\emph default
, ni los 
\emph on
rollbacks
\emph default
 en cascada.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/2PL.png
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
2PL
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/2pl_deadlock.png
	scale 70

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schedule 2PL con 
\emph on
deadlock
\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/2pl_cascading_rollback.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Schedule 2PL con 
\emph on
cascading rollback 
\emph default
si 
\begin_inset Formula $T_{5}$
\end_inset

 falla al final de todo
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Para prevenir el problema de 
\emph on
deadlock
\emph default
, este protocolo puede ampliarse y exigir que las transacciones adquieran
 por adelantado todos los 
\emph on
locks
\emph default
 que se necesitan; si un 
\emph on
lock
\emph default
 no se puede conseguir, no se adquiere ninguno.
 Esto limita aún más la concurrencia.
\end_layout

\begin_layout Standard
Para prevenir el problema de 
\emph on
rollbacks
\emph default
 en cascada, existe el protocolo
\series bold
 2PL estricto
\series default
.
 Este modo, además de requerir lo mismo que 2PL, requiere que todos los
 
\emph on
locks
\emph default
 exclusivos adquiridos por una transacción se mantengan hasta que la misma
 ejecute 
\emph on
commit.
\end_layout

\begin_layout Subsection
Protocolo de árbol
\end_layout

\begin_layout Description
Protocolo
\begin_inset space ~
\end_inset

de
\begin_inset space ~
\end_inset

árbol protocolo especializado para transacciones que acceden a datos en
 forma de árbol (ejemplo: un índice B).
 El protocolo viola 2PL, pero utiliza el hecho de que acceder a elementos
 debe ser hacia abajo para garantizar serializabilidad.
\end_layout

\begin_layout Standard
Si una transacción quiere insertar un registro, debería adquirir un 
\emph on
lock
\emph default
 exclusivo de la raíz, ergo de todo el árbol, y por ende estaría bloqueando
 a todas las demás transacciones.
\end_layout

\begin_layout Standard
Puede aprovecharse la estructura de árbol del índice de la siguiente forma:
\end_layout

\begin_layout Itemize
Cuando se adquiere un 
\emph on
read_lock
\emph default
 en un nodo hijo, el 
\emph on
lock
\emph default
 del nodo padre puede liberarse porque no se usará más.
\end_layout

\begin_layout Itemize
Cuando se adquiere un 
\emph on
write_lock
\emph default
 en un nodo hoja (para realizar una inserción), se debe adquirir un 
\emph on
lock 
\emph default
exclusivo en el nodo hoja.
\end_layout

\begin_layout Standard
Utilizar la técnica de 
\series bold
\emph on
index locking
\series default
\emph default
 soluciona el problema de registros 
\emph on
phantom
\emph default
.
\end_layout

\begin_layout Standard
El protocolo de árbol garantiza un orden serial en las transacciones.
 El orden de precedencia se define así: si 
\begin_inset Formula $T_{i}$
\end_inset

 y 
\begin_inset Formula $T_{j}$
\end_inset

 adquieren un 
\emph on
lock 
\emph default
sobre 
\begin_inset Formula $X$
\end_inset

 y 
\begin_inset Formula $T_{i}$
\end_inset

 adquiere el 
\emph on
lock 
\emph default
primero, entonces 
\begin_inset Formula $T_{i}\to T_{j}$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Enumerate
El primer lock de una transacción puede hacerse sobre cualquier nodo del
 árbol.
\end_layout

\begin_layout Enumerate
Los locks subsiguientes pueden otorgarse sólo si se posee un lock sobre
 el nodo padre.
\end_layout

\begin_layout Enumerate
Se puede ejecutar 
\emph on
unlock
\emph default
 de un nodo en cualquier momento.
\end_layout

\begin_layout Enumerate
No se puede adquirir 
\emph on
lock
\emph default
 de un nodo 2 veces, incluso cuando se tiene un 
\emph on
lock 
\emph default
sobre el nodo padre.
\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Protocolo de árbol
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Part
Técnicas de Recuperación
\end_layout

\begin_layout Section
Necesidad de Recuperación
\end_layout

\begin_layout Standard
Tipos de fallas que pueden ocurrir:
\end_layout

\begin_layout Enumerate
Fallas de la computadora: por ejemplo, una desconexión en la red
\end_layout

\begin_layout Enumerate
Fallas de transacciones: por ejemplo, una transacción que intenta dividir
 por cero
\end_layout

\begin_layout Enumerate
Errores locales: por ejemplo, una transacción que no encuentra datos
\end_layout

\begin_layout Enumerate
Aplicación de procedimientos de control de concurrencia: por ejemplo, una
 transacción abortada porque viola la serializabilidad o para resolver un
 estado de 
\emph on
deadlock
\end_layout

\begin_layout Enumerate
Fallas del disco
\end_layout

\begin_layout Enumerate
Catástrofes
\end_layout

\begin_layout Standard
Los algoritmos de recuperación tienen dos partes:
\end_layout

\begin_layout Enumerate
Acciones que se toman durante el procesamiento normal de transacciones,
 para asegurar que, en caso de falla, se dispone de suficiente información
 para recuperar
\end_layout

\begin_layout Enumerate
Acciones que se toman después de una falla para devolver la base de datos
 a un estado consistente.
\end_layout

\begin_layout Standard
Idealmente, la base de datos en disco debería contener, para cada ítem de
 dato, el último valor escrito por una transacción que ejecutó 
\emph on
commit
\emph default
.
\end_layout

\begin_layout Standard
En la práctica, la base de datos podría:
\end_layout

\begin_layout Itemize
Contener valores escritos por transacciones no commiteadas
\end_layout

\begin_layout Itemize
No contener valores escritos por transacciones commiteadas
\end_layout

\begin_layout Section
Archivo de Log
\end_layout

\begin_layout Standard
La base de datos se almacena en disco.
 Éste está formado por bloques.
 Como todos los bloques no caben en memoria principal, se necesita una forma
 de trabajar con la base de datos en memoria.
 Por ende, se necesita una forma de organizar los bloques en memoria y luego
 copiarlos en el disco (
\emph on
flush
\emph default
).
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename img/input_output.png

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Operaciones sobre bloques
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Para alcanzar el objetivo de transacciones atómicas, primero se debe guardar
 en disco información sobre las modificaciones, sin modificar la base de
 datos en sí.
 Para eso se utiliza un archivo de 
\emph on
log
\emph default
.
 Este archivo permite: 
\end_layout

\begin_layout Itemize
Deshacer (
\emph on
undo
\emph default
) cambios hechos por transacciones que deben ser abortadas
\end_layout

\begin_layout Itemize
Rehacer (
\emph on
redo
\emph default
) cambios hechos por transacciones que ejecutaron 
\emph on
commit
\emph default
 pero cuyos cambios no fueron almacenados en la base de datos en disco.
\end_layout

\begin_layout Description
Log archivo secuencial al que solo se le pueden agregar registros.
\end_layout

\begin_layout Standard
Decimos que una transacción ejecutó 
\series bold
commit
\series default
 cuando su registro 
\family typewriter
[commit,T] 
\family default
fue almacenado en disco.
 Si hay una falla luego de esto, se ejecuta un 
\series bold
redo
\series default
.
 Si hay una falla antes de esto, se hace 
\series bold
\emph on
undo.
\end_layout

\begin_layout Itemize

\series bold
Redo
\series default
 debe hacerse en el orden en el que los cambios fueron hechos originalmente.
\end_layout

\begin_layout Itemize

\series bold
Undo 
\series default
escribe registros especiales llamados 
\begin_inset Quotes eld
\end_inset

redo-only
\begin_inset Quotes erd
\end_inset

, que no tienen el valor viejo del item de dato.
 Al finalizar las escrituras, se escribe un registro 
\family typewriter
<abort,T> 
\family default
para indicar que el 
\emph on
undo 
\emph default
finalizó.
\end_layout

\begin_layout Subsection
Checkpoints
\end_layout

\begin_layout Standard
Cuando se produce una caída del sistema, hay que consultar el 
\emph on
log
\emph default
 para determinar aquellas transacciones que deben rehacerse o deshacerse.
 En principio, habría que buscar en todo el 
\emph on
log
\emph default
 para determinar esta información.
 Hay dos grandes dificultades con este enfoque: 
\end_layout

\begin_layout Enumerate
El proceso de búsqueda lleva mucho tiempo.
 
\end_layout

\begin_layout Enumerate
La mayor parte de las transacciones ya han escrito sus actualizaciones en
 la base de datos.
 
\end_layout

\begin_layout Standard
Para reducir este tipo de gastos generales, se usan los 
\series bold
\emph on
checkpoints
\series default
\emph default
.
 La periodicidad con que se ejecutan 
\emph on
checkpoints
\emph default
 la decide el administrador de base de datos.
\end_layout

\begin_layout Subsubsection
Checkpoints bloqueantes
\end_layout

\begin_layout Standard
Se describe a continuación un esquema de control simple que (a) no permite
 realizar ningún cambio mientras la operación está en curso, y (b) se escriben
 en disco todos los 
\emph on
buffers
\emph default
 en memoria modificados.
 
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout

\emph on
1.
 Stop accepting new transactions.
\end_layout

\begin_layout Plain Layout

\emph on
2.
 Wait until all currently active transactions commit or abort and have written
 a 
\family typewriter
COMMIT
\family default
 or 
\family typewriter
ABORT
\family default
 record on the log.
 
\end_layout

\begin_layout Plain Layout

\emph on
3.
 Flush the log to disk.
 
\end_layout

\begin_layout Plain Layout

\emph on
4.
 Write a log record 
\family typewriter
<CHECKPOINT>
\family default
, and flush the log again.
 
\end_layout

\begin_layout Plain Layout

\emph on
5.
 Resume accepting transactions.
\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Checkpoint bloqueante en un log UNDO
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Checkpoints no bloqueantes
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout

\emph on
1.
 Write a log record 
\family typewriter
<START CHECKPOINT (T1, ...
 , Tk)>
\family default
.
 Here, 
\begin_inset Formula $T_{1},\ldots,T_{k}$
\end_inset

 are the identifiers for all the active transactions (i.e., transactions that
 have not yet committed and written their changes to disk).
 
\end_layout

\begin_layout Plain Layout

\emph on
2.
 Flush the log.
\end_layout

\begin_layout Plain Layout

\emph on
3.
 Wait until all of 
\begin_inset Formula $T_{1},\ldots,T_{k}$
\end_inset

 commit or abort, but do not prohibit other transactions from starting.
 
\end_layout

\begin_layout Plain Layout

\emph on
4.
 When all of 
\begin_inset Formula $T_{1},\ldots,T_{k}$
\end_inset

 have completed, write a log record 
\family typewriter
<END CHECKPOINT>
\family default
.
 
\end_layout

\begin_layout Plain Layout

\emph on
5.
 Flush the log.
\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Checkpoint no bloqueante en un log UNDO
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout

\emph on
1.
 Write a log record 
\family typewriter
<START CHECKPOINT (T1, ...
 , Tk)>
\family default
.
 Here, 
\begin_inset Formula $T_{1},\ldots,T_{k}$
\end_inset

 are the identifiers for all the active transactions (i.e., transactions that
 have not yet committed).
 
\end_layout

\begin_layout Plain Layout

\emph on
2.
 Flush the log.
\end_layout

\begin_layout Plain Layout

\emph on
3.
 Write to disk all database elements that were written to buffers but not
 yet to disk by transactions that had already committed when the <START
 CHECKPOINT> record was written to the log.
\end_layout

\begin_layout Plain Layout

\emph on
4.
 Write a log record 
\family typewriter
<END CHECKPOINT>
\family default
.
 
\end_layout

\begin_layout Plain Layout

\emph on
5.
 Flush the log.
\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Checkpoint no bloqueante en un log REDO
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout

\emph on
1.
 Write a log record 
\family typewriter
<START CHECKPOINT (T1, ...
 , Tk)>
\family default
.
 Here, 
\begin_inset Formula $T_{1},\ldots,T_{k}$
\end_inset

 are the identifiers for all the active transactions (i.e., transactions that
 have not yet committed).
 
\end_layout

\begin_layout Plain Layout

\emph on
2.
 Flush the log.
\end_layout

\begin_layout Plain Layout

\emph on
3.
 Write to disk 
\series bold
all
\series default
 buffers that are dirty (not just those written by committed transactions)
\end_layout

\begin_layout Plain Layout

\emph on
4.
 Write a log record 
\family typewriter
<END CHECKPOINT>
\family default
.
 
\end_layout

\begin_layout Plain Layout

\emph on
5.
 Flush the log.
\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Checkpoint no bloqueante en un log UNDO/REDO
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Protocolos de Recuperación
\end_layout

\begin_layout Itemize
Para fallas de tipo 5 y 6, se necesita haber grabado con anterioridad un
 
\emph on
backup
\emph default
 de la base de datos y reconstruir la misma con el archivo de log hasta
 el momento de la falla.
\end_layout

\begin_layout Itemize
Para fallas de tipo 1 a 4, existen dos técnicas de recuperación:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
\emph on
Deferred update
\end_layout

\begin_deeper
\begin_layout Standard
Las transacciones y el manejador de buffers obedecen 1 regla:
\end_layout

\begin_layout Itemize

\series bold
Write-Ahead Logging (WAL)
\series default
:
\series bold
 
\series default
se deben grabar en disco todos los registros de log sobre las actualización
 (incluyendo 
\family typewriter
<UPDATE T,X,Nuevo_valor>
\family default
 y 
\family typewriter
<COMMIT T>
\family default
), y luego actualizar 
\begin_inset Formula $X$
\end_inset

 en disco.
\end_layout

\begin_layout Standard
Tipos de registros:
\end_layout

\begin_layout Itemize

\family typewriter
<START T>
\end_layout

\begin_layout Itemize

\family typewriter
<COMMIT T>
\end_layout

\begin_layout Itemize

\family typewriter
<ABORT T>
\end_layout

\begin_layout Itemize

\family typewriter
<UPDATE T,X,Valor_Nuevo>
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

transacciones_commiteadas = identificarlas
\end_layout

\begin_layout Plain Layout

transacciones_incompletas = identificarlas
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

desde el comienzo del log hasta el fin:
\end_layout

\begin_layout Plain Layout

	si hay un registro <UPDATE <T,X,Valor_Nuevo>:
\end_layout

\begin_layout Plain Layout

		si T está en "transacciones_commiteadas":
\end_layout

\begin_layout Plain Layout

			escribir "Valor_Nuevo" en X
\end_layout

\begin_layout Plain Layout

		si no:
\end_layout

\begin_layout Plain Layout

			no hacer nada
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

para cada T en "transacciones_incompletas":
\end_layout

\begin_layout Plain Layout

	escribir <ABORT T>
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

flush_log()
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Procedimiento de recuperación 
\series bold
REDO 
\series default
sin checkpoints
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

transacciones_commiteadas = identificarlas
\end_layout

\begin_layout Plain Layout

transacciones_incompletas = identificarlas
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

desde el comienzo del log hasta el fin:
\end_layout

\begin_layout Plain Layout

	si hay un registro <UPDATE <T,X,Valor_Nuevo>:
\end_layout

\begin_layout Plain Layout

		si T está en "transacciones_commiteadas":
\end_layout

\begin_layout Plain Layout

			escribir "Valor_Nuevo" en X
\end_layout

\begin_layout Plain Layout

		si no:
\end_layout

\begin_layout Plain Layout

			no hacer nada
\end_layout

\begin_layout Plain Layout

	si el ultimo registro de checkpoint es <END CHECKPOINT>:
\end_layout

\begin_layout Plain Layout

		// se debe mirar el log hasta el <START Ti> que se ejecuto primero
\end_layout

\begin_layout Plain Layout

	si el ultimo registro de checkpoint es <START CHECKPOINT T1,...,TK>:
\end_layout

\begin_layout Plain Layout

		// la caida se produjo durante el checkpointing
\end_layout

\begin_layout Plain Layout

		// buscar el registro <END CHECKPOINT> anterior y su par <START CHECKPOINT
 S1,...,SK>
\end_layout

\begin_layout Plain Layout

		// rehacer todas las transacciones commiteadas que empezaron despues de
 ese START 
\end_layout

\begin_layout Plain Layout

		//	o son Si
\end_layout

\begin_layout Plain Layout

		// (si no hay, rehacer desde el principio del log)
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

para cada T en transacciones_incompletas:
\end_layout

\begin_layout Plain Layout

	escribir <ABORT T>
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

flush_log()
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Procedimiento de recuperación 
\series bold
REDO 
\series default
con checkpoints no bloqueantes
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
El algoritmo anterior puede ser más eficiente si se ejecuta, para cada item
 de dato, sólo el último REDO existente (porque todos los anteriores serían
 sobrescritos por éste).
\end_layout

\begin_layout Standard
Este mecanismo garantiza:
\end_layout

\begin_layout Itemize
Que no se deban hacer 
\emph on
rollbacks
\emph default
 de transacciones (porque las mismas sólo escriben en la base de datos luego
 de ejecutar commit)
\end_layout

\begin_layout Itemize
Que no se deban hacer 
\emph on
rollbacks
\emph default
 en cascada (porque los ítems tienen locks que no permiten leerlos antes
 de que una transacción que los escribió no ejecute commit)
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
\emph on
Immediate update
\series default
\emph default
: a su vez tiene dos variantes:
\end_layout

\begin_deeper
\begin_layout Enumerate

\series bold
UNDO/REDO
\series default
: Las transacciones y el manejador de buffer obedecen 1 regla:
\end_layout

\begin_deeper
\begin_layout Itemize
Si la transacción 
\begin_inset Formula $T$
\end_inset

 modifica el ítem de dato 
\begin_inset Formula $X$
\end_inset

, el registro de log 
\family typewriter
<UPDATE T,X,Valor_Viejo,Valor_Nuevo>
\family default
 debe ser escrito al disco 
\series bold
antes
\series default
 que el ítem 
\begin_inset Formula $X$
\end_inset

 sea escrito al disco.
\end_layout

\begin_layout Standard
Tipos de registros:
\end_layout

\begin_layout Itemize

\family typewriter
<START T>
\end_layout

\begin_layout Itemize

\family typewriter
<COMMIT T>
\end_layout

\begin_layout Itemize

\family typewriter
<ABORT T>
\end_layout

\begin_layout Itemize

\family typewriter
<UPDATE T,X,Valor_Viejo,Valor_Nuevo>
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

mantener dos listas de transacciones:
\end_layout

\begin_layout Plain Layout

1) transacciones commiteadas desde el ultimo checkpoint
\end_layout

\begin_layout Plain Layout

2) transacciones activas
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

ejecutar REDO de todos los ESCRIBIR de las transacciones de la primera lista,
 
\end_layout

\begin_layout Plain Layout

en el orden en que fueron escritos en el log
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

ejecutar UNDO de todos los ESCRIBIR de las transacciones de la segunda lista,
 
\end_layout

\begin_layout Plain Layout

en el orden inverso en que fueron escritos en el log
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Procedimiento de recuperación 
\series bold
UNDO/REDO
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
UNDO
\series default
: Las transacciones y el manejador de buffer obedecen 2 reglas:
\end_layout

\begin_deeper
\begin_layout Enumerate
Si la transacción 
\begin_inset Formula $T$
\end_inset

 modifica el ítem de dato 
\begin_inset Formula $X$
\end_inset

, el registro de log 
\family typewriter
<UPDATE T,X,Valor_Viejo>
\family default
 debe ser escrito al disco 
\series bold
antes
\series default
 que el ítem 
\begin_inset Formula $X$
\end_inset

 sea escrito al disco.
\end_layout

\begin_layout Enumerate

\series bold
\emph on
Force Log at Commi
\emph default
t (FLC
\series default
): si la transacción ejecuta commit, los ítems de datos actualizados por
 la transacción se deben escribir en el disco, y luego el registro de log
 
\family typewriter
<COMMIT T>
\family default
 debe ser escrito al disco.
\end_layout

\begin_layout Standard
Tipos de registros:
\end_layout

\begin_layout Itemize

\family typewriter
<START T>
\end_layout

\begin_layout Itemize

\family typewriter
<COMMIT T>
\end_layout

\begin_layout Itemize

\family typewriter
<ABORT T>
\end_layout

\begin_layout Itemize

\family typewriter
<UPDATE T,X,Valor_Viejo>
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

transacciones_completas = {}
\end_layout

\begin_layout Plain Layout

transacciones_incompletas = {}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

desde el fin del log hasta el comienzo: // o hasta que se encuentre un registro
 <CHECKPOINT>
\end_layout

\begin_layout Plain Layout

	si hay un registro <COMMIT T> o <ABORT T>:
\end_layout

\begin_layout Plain Layout

		transacciones_completas += T
\end_layout

\begin_layout Plain Layout

	si hay un registro <UPDATE <T,X,Valor_Viejo>:
\end_layout

\begin_layout Plain Layout

		si T está en "transacciones_completas":
\end_layout

\begin_layout Plain Layout

			no hacer nada
\end_layout

\begin_layout Plain Layout

		sino:
\end_layout

\begin_layout Plain Layout

			transacciones_incompletas += T
\end_layout

\begin_layout Plain Layout

			escribir "Valor_Viejo" en "X"
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

para cada T en "transacciones_incompletas":
\end_layout

\begin_layout Plain Layout

	escribir <ABORT T>
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

flush_log()
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Procedimiento de recuperación 
\series bold
UNDO 
\series default
con checkpoint bloqueante
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

transacciones_completas = {}
\end_layout

\begin_layout Plain Layout

transacciones_incompletas = {}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

desde el fin del log: 
\end_layout

\begin_layout Plain Layout

	si hay un registro <COMMIT T> o <ABORT T>:
\end_layout

\begin_layout Plain Layout

		transacciones_completas += T
\end_layout

\begin_layout Plain Layout

	si hay un registro <UPDATE <T,X,Valor_Viejo>:
\end_layout

\begin_layout Plain Layout

		si T está en "transacciones_completas":
\end_layout

\begin_layout Plain Layout

			no hacer nada
\end_layout

\begin_layout Plain Layout

		sino:
\end_layout

\begin_layout Plain Layout

			transacciones_incompletas += T
\end_layout

\begin_layout Plain Layout

			escribir "Valor_Viejo" en "X"
\end_layout

\begin_layout Plain Layout

	si hay un registro <END CHECKPOINT>:
\end_layout

\begin_layout Plain Layout

		// se debe mirar el log hasta el <START CHECKPOINT> correspondiente
\end_layout

\begin_layout Plain Layout

	si hay un registro <START CHECKPOINT T1,...,TK> pero no un <END CHECKPOINT>:
\end_layout

\begin_layout Plain Layout

		// la caida se produjo durante el checkpointing
\end_layout

\begin_layout Plain Layout

		// se debe mirar el log hasta el comienzo de la primera transacción incompleta
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

para cada T en "transacciones_incompletas":
\end_layout

\begin_layout Plain Layout

	escribir <ABORT T>
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

flush_log()
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Procedimiento de recuperación 
\series bold
UNDO 
\series default
con checkpoint no bloqueante
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Standard
Es necesario que las operaciones de UNDO y REDO sean 
\series bold
idempotentes
\series default
: ejecutarlas muchas veces debe ser igual a ejecutarlas muchas veces.
 De hecho, todo el proceso de recuperación debe ser idempotente para garantizar
 que si existe una falla durante la recuperación de una falla, la misma
 se pueda recuperar también.
\end_layout

\begin_layout Standard
Es necesario que el DBMS mantenga:
\end_layout

\begin_layout Itemize
Lista de transacciones activas
\end_layout

\begin_layout Itemize
Lista de transacciones que ejecutaron commit
\end_layout

\begin_layout Itemize
Lista de transacciones abortadas desde el último checkpoint
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/undo_logging.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Log UNDO
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/redo_logging.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Log REDO
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/undo_redo_logging.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Log UNDO/REDO
\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Ejemplos de logs
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
\series bold
UNDO
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
\series bold
REDO
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
\series bold
UNDO/REDO
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $Logs\, X\implies Bd\, X\implies Commit\, al\, log$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $Logs\, X\,\&\, Commit\, al\, log\implies Bd\, X$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $Log\, X\implies Bd\, X$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Immediate update
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Deferred update
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
Immediate update
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_body
\end_document
